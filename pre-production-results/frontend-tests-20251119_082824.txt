
> trick-card-game-frontend@2.3.0 test
> vitest --run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mC:/Users/marc_/Documents/WebApp/anthropicJoffre/frontend[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mLoading State[2m > [22m[2mshould show loading spinner on mount[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mLoading State[2m > [22m[2mshould emit get_game_replay on mount[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mLoading State[2m > [22m[2mshould register socket event handlers[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould display replay data when loaded successfully[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould handle 404 errors with correlation ID[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould handle 404 errors with correlation ID[22m[39m
[GameReplay] Error loading replay: { message: [32m'Game not found'[39m, correlationId: [32m'abc-123-def'[39m } for game: test-game-123

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould handle network errors[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould handle network errors[22m[39m
[GameReplay] Error loading replay: { message: [32m'Network connection failed'[39m } for game: test-game-123

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould show warning when replay has no rounds[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m0[39m

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mData Loading[2m > [22m[2mshould show warning when replay has no rounds[22m[39m
[GameReplay] round_history is empty for game: test-game-123

 [32mâœ“[39m src/components/BettingPhase.test.tsx [2m ([22m[2m19 tests[22m[2m)[22m[90m 162[2mms[22m[39m
[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould have play/pause button[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould start auto-playback when play clicked[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould have step forward button[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

 [32mâœ“[39m src/components/TeamSelection.test.tsx [2m ([22m[2m18 tests[22m[2m)[22m[90m 244[2mms[22m[39m
 [32mâœ“[39m src/components/PlayingPhase.test.tsx [2m ([22m[2m20 tests[22m[2m)[22m[90m 237[2mms[22m[39m
[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mRendering and Basic UI[2m > [22m[2mshould render player hand[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 3
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3, green-7
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 3
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3, green-7

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mRendering and Basic UI[2m > [22m[2mshould show error state when player not found[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: non-existent-player, found player: undefined at index -1, hand size: undefined

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mRendering and Basic UI[2m > [22m[2mshould render spectator view[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mCard Play Functionality[2m > [22m[2mshould disable unplayable cards[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 2
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 2
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mCard Play Functionality[2m > [22m[2mshould enable all cards when leading trick[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 3
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3, green-7
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 3
ðŸŽ´ Rendering hand for TestPlayer: red-5, blue-3, green-7

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mCard Play Functionality[2m > [22m[2mshould call onPlayCard when card clicked[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mCard Play Functionality[2m > [22m[2mshould prevent double-clicking same card[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: red-5

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mTrick Display[2m > [22m[2mshould show current trick cards[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mTrick Display[2m > [22m[2mshould highlight current player turn[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mTrick Display[2m > [22m[2mshould show empty trick at round start[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mLed Suit Indicator[2m > [22m[2mshould show led suit when trick started[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: blue-5
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ´ Rendering hand for TestPlayer: blue-5

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mLed Suit Indicator[2m > [22m[2mshould not show led suit when leading[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mGame State Display[2m > [22m[2mshould show current scores[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mGame State Display[2m > [22m[2mshould show trump color[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mGame State Display[2m > [22m[2mshould show round number[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mError States[2m > [22m[2mshould handle missing player gracefully[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: invalid-id, found player: undefined at index -1, hand size: undefined

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mError States[2m > [22m[2mshould handle empty hand gracefully[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mError States[2m > [22m[2mshould handle invalid game state gracefully[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mAutoplay Feature[2m > [22m[2mshould show autoplay toggle when enabled[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: Player 1 at index 0, hand size: 0

[90mstdout[2m | src/components/PlayingPhase.test.tsx[2m > [22m[2mPlayingPhase[2m > [22m[2mSpectator Mode[2m > [22m[2mshould not allow card play in spectator mode[22m[39m
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1
ðŸŽ® PlayingPhase render - currentPlayerId: player-1, found player: TestPlayer at index 0, hand size: 1

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould have step backward button[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mrenders all stat buttons[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens player stats when My Stats button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould have speed control[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mPlayback Controls[2m > [22m[2mshould change playback speed[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mNavigation[2m > [22m[2mshould display current round number[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m3[39m

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mrenders create game form with all elements[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mshows player name input with placeholder for guests[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mdisables player name input for authenticated users[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mdefaults to ranked mode (ELO)[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mtoggles between ranked and casual mode[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mrenders with all difficulty buttons[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mhighlights the selected difficulty[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mshows correct description for each difficulty level[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onBotDifficultyChange when difficulty button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mrenders join game form with all elements[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows join type selection with player and spectator options[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mdefaults to player join type[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mswitches to spectator join type when clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mNavigation[2m > [22m[2mshould navigate to next round[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m3[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mNavigation[2m > [22m[2mshould navigate to previous round[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m3[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mNavigation[2m > [22m[2mshould jump to specific round[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m3[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mState Visualization[2m > [22m[2mshould show game scores[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mState Visualization[2m > [22m[2mshould display trick history[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mState Visualization[2m > [22m[2mshould show trump suit[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens player stats when My Stats button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens player stats when My Stats button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mState Visualization[2m > [22m[2mshould display winning team[22m[39m
[GameReplay] Requesting replay for game: test-game-123
[GameReplay] Received replay data for game: test-game-123 rounds: [33m5[39m
[GameReplay] Replay data validated successfully. Rounds: [33m2[39m

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens leaderboard when Global Leaderboard button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould have Try Again button on error[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould have Try Again button on error[22m[39m
[GameReplay] Error loading replay: { message: [32m'Connection failed'[39m } for game: test-game-123

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mrenders online and recent tab buttons[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mswitches tabs when tab buttons are clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mdisplays online players when on online tab[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mshows join button for players in game[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mdoes not show join button for players in lobby[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mdisplays message when no online players[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mdisplays recent players when on recent tab[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mfilters out bot players from recent list[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mshows game count for recent players[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mdisplays message when no recent players[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/SocialPanel.test.tsx[2m > [22m[2mSocialPanel[2m > [22m[2mshows player status labels correctly[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

 [33mâ¯[39m src/components/SocialPanel.test.tsx [2m ([22m[2m11 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[90m 162[2mms[22m[39m
[31m   [33mâ¯[31m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mrenders online and recent tab buttons[39m
[31m     â†’ Unable to find an element with the text: /Online \(2\)/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"grid grid-cols-5 gap-1.5"[31m
    [36m>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs relative focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-messages"[31m
      [36m>[31m
        [0mðŸ’¬[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-friends"[31m
      [36m>[31m
        [0mðŸ‘¥[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-gradient-to-r from-umber-500 to-umber-600 dark:from-purple-600 dark:to-purple-700 text-white shadow-lg border-b-2 border-orange-400"[31m
        [33mdata-keyboard-nav[31m=[32m"social-online"[31m
      [36m>[31m
        [0mðŸŸ¢ [0m
        [0m2[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-profile"[31m
      [36m>[31m
        [0mðŸ‘¤[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-chat"[31m
      [36m>[31m
        [0mðŸ’­[0m
      [36m</button>[31m
    [36m</div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"bg-parchment-200 dark:bg-gray-700 rounded-lg p-4 border-2 border-parchment-400 dark:border-gray-600 min-h-[320px] max-h-[320px] overflow-y-auto"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-2"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2 flex-1 min-w-0"[31m
            [36m>[31m
              [36m<span[31m
                [33mclass[31m=[32m"text-green-500 text-lg flex-shrink-0"[31m
              [36m>[31m
                [0mðŸŸ¢[0m
              [36m</span>[31m
              [36m<div[31m
                [33mclass[31m=[32m"min-w-0 flex-1"[31m
              [36m>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"View Alice's profile"[31m
                  [33mclass[31m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[31m
                  [33mtitle[31m=[32m"View Alice's profile"[31m
                [36m>[31m
                  [0mAlice[0m
                [36m</button>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"text-xs text-umber-600 dark:text-gray-400"[31m
                [36m>[31m
                  [0mPlaying[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<button[31m
              [33mclass[31m=[32m"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold transition-colors flex-shrink-0"[31m
              [33mdata-keyboard-nav[31m=[32m"join-player-socket-1"[31m
              [33mtitle[31m=[32m"Join their game"[31m
            [36m>[31m
              [0mðŸŽ® Join[0m
            [36m</button>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2 flex-1 min-w-0"[31m
            [36m>[31m
              [36m<span[31m
                [33mclass[31m=[32m"text-green-500 text-lg flex-shrink-0"[31m
              [36m>[31m
                [0mðŸŸ¢[0m
              [36m</span>[31m
              [36m<div[31m
                [33mclass[31m=[32m"min-w-0 flex-1"[31m
              [36m>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"View Bob's profile"[31m
                  [33mclass[31m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[31m
                  [33mtitle[31m=[32m"View Bob's profile"[31m
                [36m>[31m
                  [0mBob[0m
                [36m</button>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"text-xs text-umber-600 dark:text-gray-400"[31m
                [36m>[31m
                  [0mIn Lobby[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [33mâ¯[31m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mswitches tabs when tab buttons are clicked[39m
[31m     â†’ Unable to find an element with the text: ðŸ“œ Recent. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"grid grid-cols-5 gap-1.5"[31m
    [36m>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs relative focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-messages"[31m
      [36m>[31m
        [0mðŸ’¬[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-friends"[31m
      [36m>[31m
        [0mðŸ‘¥[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-gradient-to-r from-umber-500 to-umber-600 dark:from-purple-600 dark:to-purple-700 text-white shadow-lg border-b-2 border-orange-400"[31m
        [33mdata-keyboard-nav[31m=[32m"social-online"[31m
      [36m>[31m
        [0mðŸŸ¢ [0m
        [0m2[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-profile"[31m
      [36m>[31m
        [0mðŸ‘¤[0m
      [36m</button>[31m
      [36m<button[31m
        [33mclass[31m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[31m
        [33mdata-keyboard-nav[31m=[32m"social-chat"[31m
      [36m>[31m
        [0mðŸ’­[0m
      [36m</button>[31m
    [36m</div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"bg-parchment-200 dark:bg-gray-700 rounded-lg p-4 border-2 border-parchment-400 dark:border-gray-600 min-h-[320px] max-h-[320px] overflow-y-auto"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-2"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2 flex-1 min-w-0"[31m
            [36m>[31m
              [36m<span[31m
                [33mclass[31m=[32m"text-green-500 text-lg flex-shrink-0"[31m
              [36m>[31m
                [0mðŸŸ¢[0m
              [36m</span>[31m
              [36m<div[31m
                [33mclass[31m=[32m"min-w-0 flex-1"[31m
              [36m>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"View Alice's profile"[31m
                  [33mclass[31m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[31m
                  [33mtitle[31m=[32m"View Alice's profile"[31m
                [36m>[31m
                  [0mAlice[0m
                [36m</button>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"text-xs text-umber-600 dark:text-gray-400"[31m
                [36m>[31m
                  [0mPlaying[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<button[31m
              [33mclass[31m=[32m"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold transition-colors flex-shrink-0"[31m
              [33mdata-keyboard-nav[31m=[32m"join-player-socket-1"[31m
              [33mtitle[31m=[32m"Join their game"[31m
            [36m>[31m
              [0mðŸŽ® Join[0m
            [36m</button>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2 flex-1 min-w-0"[31m
            [36m>[31m
              [36m<span[31m
                [33mclass[31m=[32m"text-green-500 text-lg flex-shrink-0"[31m
              [36m>[31m
                [0mðŸŸ¢[0m
              [36m</span>[31m
              [36m<div[31m
                [33mclass[31m=[32m"min-w-0 flex-1"[31m
              [36m>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"View Bob's profile"[31m
                  [33mclass[31m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[31m
                  [33mtitle[31m=[32m"View Bob's profile"[31m
                [36m>[31m
                  [0mBob[0m
                [36m</button>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"text-xs text-umber-600 dark:text-gray-400"[31m
                [36m>[31m
                  [0mIn Lobby[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [33mâ¯[31m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mdoes not show join button for players in lobby[39m
[31m     â†’ expected <button â€¦(3)></button> to be null[39m
[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens leaderboard when Global Leaderboard button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens leaderboard when Global Leaderboard button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | src\utils\csrf.ts:43:15[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould retry fetching on Try Again click[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould retry fetching on Try Again click[22m[39m
[GameReplay] Error loading replay: { message: [32m'Connection failed'[39m } for game: test-game-123

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onBotDifficultyChange when difficulty button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onBotDifficultyChange when difficulty button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | Module.initializeCsrf (C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\src\utils\csrf.ts:148:13)[22m[39m
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould close on Close button click[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstderr[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mError Recovery[2m > [22m[2mshould close on Close button click[22m[39m
[GameReplay] Error loading replay: { message: [32m'Connection failed'[39m } for game: test-game-123

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mtoggles between ranked and casual mode[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mtoggles between ranked and casual mode[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

 [32mâœ“[39m src/components/GameReplay.test.tsx [2m ([22m[2m25 tests[22m[2m)[22m[33m 544[2mms[22m[39m
[90mstdout[2m | src/components/GameReplay.test.tsx[2m > [22m[2mGameReplay[2m > [22m[2mCleanup[2m > [22m[2mshould unregister socket handlers on unmount[22m[39m
[GameReplay] Requesting replay for game: test-game-123

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens browser when Recent Games button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens browser when Recent Games button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mopens browser when Recent Games button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mdisables My Stats and Leaderboard buttons when socket is null[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mshows warning message when socket is null[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mRecent Games button is always enabled[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/StatsPanel.test.tsx[2m > [22m[2mStatsPanel[2m > [22m[2mdisplays player statistics title[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

 [32mâœ“[39m src/components/StatsPanel.test.tsx [2m ([22m[2m8 tests[22m[2m)[22m[33m 380[2mms[22m[39m
[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mdisplays persistence mode toggle[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mtoggles persistence mode when checkbox is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mswitches to spectator join type when clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mswitches to spectator join type when clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | src\utils\csrf.ts:43:15[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mtoggles persistence mode when checkbox is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mtoggles persistence mode when checkbox is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | Module.initializeCsrf (C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\src\utils\csrf.ts:148:13)[22m[39m
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mshows appropriate info message for ranked mode[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mshows appropriate info message for casual mode[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mshows appropriate info message for casual mode[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mshows appropriate info message for casual mode[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with player name and ranked mode on submit[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mdisables ranked mode checkbox when user is not authenticated[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mshows ranked badge when persistence is elo[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onQuickPlay with correct parameters when button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onQuickPlay with correct parameters when button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mcalls onQuickPlay with correct parameters when button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with player name and ranked mode on submit[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with player name and ranked mode on submit[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/QuickPlayPanel.test.tsx[2m > [22m[2mQuickPlayPanel[2m > [22m[2mrenders Quick Play button with correct text[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

 [32mâœ“[39m src/components/QuickPlayPanel.test.tsx [2m ([22m[2m10 tests[22m[2m)[22m[33m 512[2mms[22m[39m
[90mstderr[2m | src\utils\csrf.ts:43:15[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with casual mode when checkbox is unchecked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with casual mode when checkbox is unchecked[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onCreateGame with casual mode when checkbox is unchecked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows spectator info message when spectator type is selected[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows (Optional) for player name when spectator type is selected[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onJoinGame with correct parameters when joining as player[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onJoinGame with correct parameters when joining as player[22m[39m
<empty line>
[90mstderr[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onJoinGame with correct parameters when joining as player[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onSpectateGame when joining as spectator[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onSpectateGame when joining as spectator[22m[39m
<empty line>
[90mstderr[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onSpectateGame when joining as spectator[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows auto-join message when autoJoinGameId is provided[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows back to homepage button when autoJoinGameId is provided[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows regular back button when autoJoinGameId is not provided[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mupdates player name when typing in input[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBack when back button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mupdates player name when typing in input[22m[39m
<empty line>
[90mstderr[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mupdates player name when typing in input[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBackToHomepage when back to homepage button is clicked[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBackToHomepage when back to homepage button is clicked[22m[39m
<empty line>
[90mstderr[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mcalls onBackToHomepage when back to homepage button is clicked[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mdisables player name input for authenticated users[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mrequires game ID to submit[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mrequires player name when joining as player[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mdoes not require player name when joining as spectator[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows Join as Player button text when player type selected[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

[90mstdout[2m | src/components/JoinGameForm.test.tsx[2m > [22m[2mJoinGameForm[2m > [22m[2mshows Join as Guest button text when spectator type selected[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

 [32mâœ“[39m src/components/JoinGameForm.test.tsx [2m ([22m[2m19 tests[22m[2m)[22m[33m 803[2mms[22m[39m
[90mstderr[2m | src\utils\csrf.ts:43:15[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | Module.initializeCsrf (C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\src\utils\csrf.ts:148:13)[22m[39m
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24 {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstdout[2m | src/components/GameCreationForm.test.tsx[2m > [22m[2mGameCreationForm[2m > [22m[2mrequires player name to submit[22m[39m
[ModalProvider] Render, states: {
  showLoginModal: [33mfalse[39m,
  showRegisterModal: [33mfalse[39m,
  showPasswordResetModal: [33mfalse[39m
}
[AuthContext] Initial load - initializing CSRF and fetching current user

 [32mâœ“[39m src/components/GameCreationForm.test.tsx [2m ([22m[2m12 tests[22m[2m)[22m[33m 900[2mms[22m[39m
[90mstderr[2m | src\utils\csrf.ts:43:15[22m[39m
Error fetching CSRF token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}

[90mstderr[2m | Module.initializeCsrf (C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\src\utils\csrf.ts:148:13)[22m[39m
[CSRF] Failed to initialize token: TypeError: fetch failed
[90m    at node:internal/deps/undici/undici:13510:13[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at [90mC:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:31:24
    at Module.initializeCsrf [90m(C:\Users\marc_\Documents\WebApp\anthropicJoffre\frontend\[39msrc\utils\csrf.ts:145:5[90m)[39m {
  [cause]: AggregateError: 
  [90m    at internalConnectMultiple (node:net:1139:18)[39m
  [90m    at afterConnectMultiple (node:net:1714:7)[39m {
    code: [32m'ECONNREFUSED'[39m,
    [errors]: [ [36m[Error][39m, [36m[Error][39m ]
  }
}


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 3 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mrenders online and recent tab buttons
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /Online \(2\)/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"grid grid-cols-5 gap-1.5"[39m
    [36m>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs relative focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-messages"[39m
      [36m>[39m
        [0mðŸ’¬[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-friends"[39m
      [36m>[39m
        [0mðŸ‘¥[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-gradient-to-r from-umber-500 to-umber-600 dark:from-purple-600 dark:to-purple-700 text-white shadow-lg border-b-2 border-orange-400"[39m
        [33mdata-keyboard-nav[39m=[32m"social-online"[39m
      [36m>[39m
        [0mðŸŸ¢ [0m
        [0m2[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-profile"[39m
      [36m>[39m
        [0mðŸ‘¤[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-chat"[39m
      [36m>[39m
        [0mðŸ’­[0m
      [36m</button>[39m
    [36m</div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-parchment-200 dark:bg-gray-700 rounded-lg p-4 border-2 border-parchment-400 dark:border-gray-600 min-h-[320px] max-h-[320px] overflow-y-auto"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-2"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-2 flex-1 min-w-0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-green-500 text-lg flex-shrink-0"[39m
              [36m>[39m
                [0mðŸŸ¢[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"min-w-0 flex-1"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"View Alice's profile"[39m
                  [33mclass[39m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[39m
                  [33mtitle[39m=[32m"View Alice's profile"[39m
                [36m>[39m
                  [0mAlice[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-umber-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mPlaying[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold transition-colors flex-shrink-0"[39m
              [33mdata-keyboard-nav[39m=[32m"join-player-socket-1"[39m
              [33mtitle[39m=[32m"Join their game"[39m
            [36m>[39m
              [0mðŸŽ® Join[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-2 flex-1 min-w-0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-green-500 text-lg flex-shrink-0"[39m
              [36m>[39m
                [0mðŸŸ¢[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"min-w-0 flex-1"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"View Bob's profile"[39m
                  [33mclass[39m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[39m
                  [33mtitle[39m=[32m"View Bob's profile"[39m
                [36m>[39m
                  [0mBob[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-umber-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mIn Lobby[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/SocialPanel.test.tsx:[2m66:19[22m[39m
    [90m 64| [39m    [34mrenderWithProviders[39m([33m<[39m[33mSocialPanel[39m [33m{[39m[33m...[39mdefaultProps[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 65| [39m
    [90m 66| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/Online \(2\)/[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 67| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'ðŸ“œ Recent'[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m 68| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mswitches tabs when tab buttons are clicked
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: ðŸ“œ Recent. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"grid grid-cols-5 gap-1.5"[39m
    [36m>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs relative focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-messages"[39m
      [36m>[39m
        [0mðŸ’¬[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-friends"[39m
      [36m>[39m
        [0mðŸ‘¥[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-gradient-to-r from-umber-500 to-umber-600 dark:from-purple-600 dark:to-purple-700 text-white shadow-lg border-b-2 border-orange-400"[39m
        [33mdata-keyboard-nav[39m=[32m"social-online"[39m
      [36m>[39m
        [0mðŸŸ¢ [0m
        [0m2[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-profile"[39m
      [36m>[39m
        [0mðŸ‘¤[0m
      [36m</button>[39m
      [36m<button[39m
        [33mclass[39m=[32m"py-2 rounded-lg font-bold transition-all duration-200 text-xs focus-visible:ring-2 focus-visible:ring-orange-500 focus-visible:ring-offset-1 bg-parchment-200 dark:bg-gray-700 text-umber-700 dark:text-gray-300 hover:bg-parchment-300 dark:hover:bg-gray-600"[39m
        [33mdata-keyboard-nav[39m=[32m"social-chat"[39m
      [36m>[39m
        [0mðŸ’­[0m
      [36m</button>[39m
    [36m</div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"bg-parchment-200 dark:bg-gray-700 rounded-lg p-4 border-2 border-parchment-400 dark:border-gray-600 min-h-[320px] max-h-[320px] overflow-y-auto"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"space-y-2"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-2 flex-1 min-w-0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-green-500 text-lg flex-shrink-0"[39m
              [36m>[39m
                [0mðŸŸ¢[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"min-w-0 flex-1"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"View Alice's profile"[39m
                  [33mclass[39m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[39m
                  [33mtitle[39m=[32m"View Alice's profile"[39m
                [36m>[39m
                  [0mAlice[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-umber-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mPlaying[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded-md text-xs font-bold transition-colors flex-shrink-0"[39m
              [33mdata-keyboard-nav[39m=[32m"join-player-socket-1"[39m
              [33mtitle[39m=[32m"Join their game"[39m
            [36m>[39m
              [0mðŸŽ® Join[0m
            [36m</button>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-parchment-100 dark:bg-gray-600 rounded-lg p-3 border-2 border-parchment-400 dark:border-gray-500 hover:border-green-400 dark:hover:border-green-500 transition-colors"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-center justify-between gap-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center gap-2 flex-1 min-w-0"[39m
            [36m>[39m
              [36m<span[39m
                [33mclass[39m=[32m"text-green-500 text-lg flex-shrink-0"[39m
              [36m>[39m
                [0mðŸŸ¢[0m
              [36m</span>[39m
              [36m<div[39m
                [33mclass[39m=[32m"min-w-0 flex-1"[39m
              [36m>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"View Bob's profile"[39m
                  [33mclass[39m=[32m"cursor-pointer transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-400/50 rounded text-white hover:text-orange-400 font-bold text-umber-900 dark:text-gray-100 hover:text-orange-600 dark:hover:text-orange-400 truncate text-left"[39m
                  [33mtitle[39m=[32m"View Bob's profile"[39m
                [36m>[39m
                  [0mBob[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-xs text-umber-600 dark:text-gray-400"[39m
                [36m>[39m
                  [0mIn Lobby[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/SocialPanel.test.tsx:[2m74:29[22m[39m
    [90m 72| [39m    [34mrenderWithProviders[39m([33m<[39m[33mSocialPanel[39m [33m{[39m[33m...[39mdefaultProps[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m 73| [39m
    [90m 74| [39m    [35mawait[39m user[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByText[39m([32m'ðŸ“œ Recent'[39m))[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m 75| [39m    [34mexpect[39m(mockSetSocialTab)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'recent'[39m)[33m;[39m
    [90m 76| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/3]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/SocialPanel.test.tsx[2m > [22mSocialPanel[2m > [22mdoes not show join button for players in lobby
[31m[1mAssertionError[22m: expected <button â€¦(3)></button> to be null[39m
[36m [2mâ¯[22m src/components/SocialPanel.test.tsx:[2m98:51[22m[39m
    [90m 96| [39m    [35mconst[39m bobContainer [33m=[39m bobElement[33m.[39m[34mclosest[39m([32m'div'[39m)[33m?.[39mparentElement[33m;[39m
    [90m 97| [39m
    [90m 98| [39m    [34mexpect[39m(bobContainer[33m?.[39m[34mquerySelector[39m([32m'button'[39m))[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                                                  [31m^[39m
    [90m 99| [39m  })[33m;[39m
    [90m100| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/3]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (9)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m139 passed[39m[22m[90m (142)[39m
[2m   Start at [22m 08:28:34
[2m   Duration [22m 4.57s[2m (transform 1.39s, setup 2.48s, collect 5.11s, tests 3.94s, environment 14.90s, prepare 7.12s)[22m

