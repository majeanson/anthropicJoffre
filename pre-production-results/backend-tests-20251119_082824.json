
> trick-card-game-backend@2.3.0 test
> vitest --reporter=json

{"numTotalTestSuites":174,"numPassedTestSuites":174,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":456,"numPassedTests":451,"numFailedTests":0,"numPendingTests":5,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763558905798,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should refresh token with valid refresh token cookie","status":"passed","title":"should refresh token with valid refresh token cookie","duration":21.56600000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should set secure cookie in production","status":"passed","title":"should set secure cookie in production","duration":4.29989999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should detect and reject suspicious token usage","status":"passed","title":"should detect and reject suspicious token usage","duration":14.150000000000091,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should revoke all user tokens on theft detection","status":"passed","title":"should revoke all user tokens on theft detection","duration":16.443199999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject request without refresh token cookie","status":"passed","title":"should reject request without refresh token cookie","duration":10.634599999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject expired refresh token","status":"passed","title":"should reject expired refresh token","duration":3.2613000000001193,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for banned user","status":"passed","title":"should reject token for banned user","duration":2.9033999999999196,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for deleted user","status":"passed","title":"should reject token for deleted user","duration":2.6562999999998738,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Rate Limiting"],"fullName":"POST /api/auth/refresh Rate Limiting should apply rate limiting to refresh endpoint","status":"passed","title":"should apply rate limiting to refresh endpoint","duration":11.814499999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should invalidate old token when rotating","status":"passed","title":"should invalidate old token when rotating","duration":4.017500000000155,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should track IP and user agent in rotation","status":"passed","title":"should track IP and user agent in rotation","duration":8.416600000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.812299999999823,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle rotation failures gracefully","status":"passed","title":"should handle rotation failures gracefully","duration":2.5877000000000407,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should revoke refresh token on logout","status":"passed","title":"should revoke refresh token on logout","duration":2.690699999999879,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even without refresh token","status":"passed","title":"should succeed even without refresh token","duration":12.208300000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even if revocation fails","status":"passed","title":"should succeed even if revocation fails","duration":3.20900000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should revoke all user tokens","status":"passed","title":"should revoke all user tokens","duration":2.408700000000181,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should require valid access token","status":"passed","title":"should require valid access token","duration":2.0687000000000353,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should reject invalid access token","status":"passed","title":"should reject invalid access token","duration":2.0452000000000226,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should clear refresh token cookie","status":"passed","title":"should clear refresh token cookie","duration":4.564800000000105,"failureMessages":[],"meta":{}}],"startTime":1763558907255,"endTime":1763558907390.5647,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/auth.refresh.test.ts"},{"assertionResults":[{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow viewing own profile with friends_only visibility","status":"passed","title":"should allow viewing own profile with friends_only visibility","duration":1.6598999999999933,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block anonymous users from friends_only profiles","status":"passed","title":"should block anonymous users from friends_only profiles","duration":0.294399999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block non-friends from friends_only profiles","status":"passed","title":"should block non-friends from friends_only profiles","duration":0.17540000000002465,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow friends to view friends_only profiles","status":"passed","title":"should allow friends to view friends_only profiles","duration":0.33320000000003347,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Public visibility"],"fullName":"Profile Visibility Logic Public visibility should allow anyone to view public profiles","status":"passed","title":"should allow anyone to view public profiles","duration":0.5396000000000072,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Private visibility"],"fullName":"Profile Visibility Logic Private visibility should block everyone from private profiles","status":"passed","title":"should block everyone from private profiles","duration":0.198599999999999,"failureMessages":[],"meta":{}}],"startTime":1763558906867,"endTime":1763558906871.5396,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/profiles.test.ts"},{"assertionResults":[{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should create a deck with 32 cards","status":"passed","title":"should create a deck with 32 cards","duration":2.360500000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have 8 cards of each color","status":"passed","title":"should have 8 cards of each color","duration":0.6738000000000284,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have values from 0 to 7","status":"passed","title":"should have values from 0 to 7","duration":1.1385000000000218,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should return a deck with the same cards","status":"passed","title":"should return a deck with the same cards","duration":0.9504000000000588,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should not modify the original deck","status":"passed","title":"should not modify the original deck","duration":0.8639000000000578,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should deal cards evenly to 4 players","status":"passed","title":"should deal cards evenly to 4 players","duration":0.8401999999999816,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should distribute all cards","status":"passed","title":"should distribute all cards","duration":0.25879999999995107,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should not duplicate any cards","status":"passed","title":"should not duplicate any cards","duration":0.3425000000000864,"failureMessages":[],"meta":{}}],"startTime":1763558906419,"endTime":1763558906426.3425,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/deck.test.ts"},{"assertionResults":[{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 5 points for red 0","status":"passed","title":"should return 5 points for red 0","duration":1.1777000000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return -3 points for brown 0","status":"passed","title":"should return -3 points for brown 0","duration":0.14929999999998245,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 0 points for normal cards","status":"passed","title":"should return 0 points for normal cards","duration":0.22169999999999845,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should calculate total points including special cards","status":"passed","title":"should calculate total points including special cards","duration":0.19089999999999918,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should return 0 for trick with no special cards","status":"passed","title":"should return 0 for trick with no special cards","duration":0.1822999999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should throw error for empty trick","status":"passed","title":"should throw error for empty trick","duration":0.7835999999999785,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner based on highest led suit card when no trump","status":"passed","title":"should determine winner based on highest led suit card when no trump","duration":0.2278999999999769,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when trump card is played","status":"passed","title":"should determine winner when trump card is played","duration":0.20510000000001583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when multiple trump cards are played","status":"passed","title":"should determine winner when multiple trump cards are played","duration":0.3072999999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick trump 0 over led suit 7","status":"passed","title":"should pick trump 0 over led suit 7","duration":0.2219000000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick higher trump when multiple trumps","status":"passed","title":"should pick higher trump when multiple trumps","duration":0.14929999999998245,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should handle single card trick","status":"passed","title":"should handle single card trick","duration":0.13900000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should keep first card when all equal values","status":"passed","title":"should keep first card when all equal values","duration":0.1442000000000121,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate positive score when bet is met","status":"passed","title":"should calculate positive score when bet is met","duration":0.21420000000000528,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate negative score when bet is not met","status":"passed","title":"should calculate negative score when bet is not met","duration":0.13749999999998863,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should double score when without trump","status":"passed","title":"should double score when without trump","duration":0.09019999999998163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return true when bet1 has higher amount","status":"passed","title":"should return true when bet1 has higher amount","duration":0.12880000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when bet1 has lower amount","status":"passed","title":"should return false when bet1 has lower amount","duration":0.08280000000002019,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.07670000000001664,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when both bets are identical","status":"passed","title":"should return false when both bets are identical","duration":0.09329999999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when withoutTrump is reversed but amounts equal","status":"passed","title":"should return false when withoutTrump is reversed but amounts equal","duration":0.1291999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return the highest bet by amount","status":"passed","title":"should return the highest bet by amount","duration":0.24150000000003047,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.14740000000000464,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null for empty bets","status":"passed","title":"should return null for empty bets","duration":0.15620000000001255,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should filter out skipped bets","status":"passed","title":"should filter out skipped bets","duration":0.16030000000000655,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null when all bets are skipped","status":"passed","title":"should return null when all bets are skipped","duration":0.12829999999996744,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should give dealer priority when bets are exactly equal","status":"passed","title":"should give dealer priority when bets are exactly equal","duration":0.17060000000003583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should not give dealer priority when without trump differs","status":"passed","title":"should not give dealer priority when without trump differs","duration":0.17400000000003502,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should handle multiple equal bets with dealer in middle","status":"passed","title":"should handle multiple equal bets with dealer in middle","duration":0.14680000000004156,"failureMessages":[],"meta":{}}],"startTime":1763558906381,"endTime":1763558906389.1467,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/logic.test.ts"},{"assertionResults":[{"ancestorTitles":["Round Statistics","initializeRoundStats"],"fullName":"Round Statistics initializeRoundStats should initialize empty stats for all players","status":"passed","title":"should initialize empty stats for all players","duration":2.269999999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return undefined if stats is undefined","status":"passed","title":"should return undefined if stats is undefined","duration":0.3269000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track red zero collection","status":"passed","title":"should track red zero collection","duration":0.4299000000000319,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track brown zero collection","status":"passed","title":"should track brown zero collection","duration":0.4987000000000421,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track both red and brown zeros in same trick","status":"passed","title":"should track both red and brown zeros in same trick","duration":0.29560000000003583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should accumulate stats across multiple tricks","status":"passed","title":"should accumulate stats across multiple tricks","duration":0.36119999999999663,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should not modify stats if no special cards in trick","status":"passed","title":"should not modify stats if no special cards in trick","duration":0.30340000000001055,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return the stats object for chaining","status":"passed","title":"should return the stats object for chaining","duration":0.2740999999999758,"failureMessages":[],"meta":{}}],"startTime":1763558906815,"endTime":1763558906820.2742,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/roundStatistics.test.ts"},{"assertionResults":[{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should add card to trick and remove from hand","status":"passed","title":"should add card to trick and remove from hand","duration":2.8010000000000446,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should set trump on first card","status":"passed","title":"should set trump on first card","duration":0.5414000000000669,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should not set trump on subsequent cards","status":"passed","title":"should not set trump on subsequent cards","duration":0.29700000000002547,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should advance to next player","status":"passed","title":"should advance to next player","duration":0.45820000000003347,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should wrap around after player 4","status":"passed","title":"should wrap around after player 4","duration":0.17650000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should mark trick as complete after 4 cards","status":"passed","title":"should mark trick as complete after 4 cards","duration":0.27320000000008804,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should add bet to currentBets","status":"passed","title":"should add bet to currentBets","duration":0.44229999999993197,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should handle skipped bet","status":"passed","title":"should handle skipped bet","duration":0.2767000000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should advance to next player","status":"passed","title":"should advance to next player","duration":0.8509999999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should mark betting as complete after 4 bets","status":"passed","title":"should mark betting as complete after 4 bets","duration":0.21749999999997272,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should detect all players skipped","status":"passed","title":"should detect all players skipped","duration":0.42689999999993233,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should clear currentBets","status":"passed","title":"should clear currentBets","duration":0.15619999999989886,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.4400999999999158,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should wrap around when dealer is last player","status":"passed","title":"should wrap around when dealer is last player","duration":0.09669999999994161,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should set player teamId","status":"passed","title":"should set player teamId","duration":0.5007000000000517,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.11820000000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap player positions in array","status":"passed","title":"should swap player positions in array","duration":1.8677999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap all player data fields","status":"passed","title":"should swap all player data fields","duration":1.6216999999999189,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve bot status and difficulty when swapping","status":"passed","title":"should preserve bot status and difficulty when swapping","duration":3.120800000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve connection status fields when swapping","status":"passed","title":"should preserve connection status fields when swapping","duration":0.6879000000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentTrick references after swap","status":"passed","title":"should update currentTrick references after swap","duration":0.4154999999999518,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentBets references after swap","status":"passed","title":"should update currentBets references after swap","duration":0.80499999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update highestBet reference after swap","status":"passed","title":"should update highestBet reference after swap","duration":0.29330000000004475,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should recalculate team IDs based on position after swap","status":"passed","title":"should recalculate team IDs based on position after swap","duration":0.39439999999990505,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.23769999999990432,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should deal 8 cards to each player","status":"passed","title":"should deal 8 cards to each player","duration":0.2576000000000249,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should reset round state","status":"passed","title":"should reset round state","duration":0.3007999999999811,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should rotate dealer","status":"passed","title":"should rotate dealer","duration":0.18790000000001328,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.1492000000000644,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should clear currentTrick","status":"passed","title":"should clear currentTrick","duration":0.21380000000010568,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.12779999999997926,"failureMessages":[],"meta":{}},{"ancestorTitles":["addTeamPoints"],"fullName":"addTeamPoints should be a placeholder function (points tracked per player)","status":"passed","title":"should be a placeholder function (points tracked per player)","duration":0.13179999999999836,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should add round scores to team totals","status":"passed","title":"should add round scores to team totals","duration":0.2522999999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 1 reaches 41","status":"passed","title":"should return true when team 1 reaches 41","duration":0.14580000000000837,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 2 reaches 41","status":"passed","title":"should return true when team 2 reaches 41","duration":0.13559999999995398,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should update game phase","status":"passed","title":"should update game phase","duration":0.14250000000004093,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should handle all phase transitions","status":"passed","title":"should handle all phase transitions","duration":0.18399999999996908,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should award tricks and points to winner","status":"passed","title":"should award tricks and points to winner","duration":0.6764000000000578,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should store trick as previousTrick","status":"passed","title":"should store trick as previousTrick","duration":0.5469999999999118,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should add trick to currentRoundTricks","status":"passed","title":"should add trick to currentRoundTricks","duration":1.1802000000000135,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should NOT clear currentTrick (cleared later after delay)","status":"passed","title":"should NOT clear currentTrick (cleared later after delay)","duration":0.3505999999999858,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should set winner as current player","status":"passed","title":"should set winner as current player","duration":0.2785000000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should detect round over when all hands empty","status":"passed","title":"should detect round over when all hands empty","duration":0.3746999999999616,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should not transition to scoring if hands remain","status":"passed","title":"should not transition to scoring if hands remain","duration":0.2901000000000522,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team wins bet","status":"passed","title":"should calculate offensive team wins bet","duration":0.9089000000000169,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team fails bet","status":"passed","title":"should calculate offensive team fails bet","duration":0.35990000000003874,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should apply without-trump multiplier","status":"passed","title":"should apply without-trump multiplier","duration":0.3104000000000724,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over at 41 points","status":"passed","title":"should detect game over at 41 points","duration":0.22280000000000655,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over for team 2","status":"passed","title":"should detect game over for team 2","duration":0.30920000000003256,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should update team scores","status":"passed","title":"should update team scores","duration":0.29589999999996053,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should add round to history","status":"passed","title":"should add round to history","duration":0.4692999999999756,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should transition to game_over when gameOver is true","status":"passed","title":"should transition to game_over when gameOver is true","duration":0.18719999999996162,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should not transition if game continues","status":"passed","title":"should not transition if game continues","duration":0.165300000000002,"failureMessages":[],"meta":{}}],"startTime":1763558906422,"endTime":1763558906450.1873,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/state.test.ts"},{"assertionResults":[{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should return new GameState (immutability)","status":"passed","title":"should return new GameState (immutability)","duration":3.1422999999999774,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should award trick to winner with correct points","status":"passed","title":"should award trick to winner with correct points","duration":0.6019000000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Red 0 special card (+5 points)","status":"passed","title":"should handle Red 0 special card (+5 points)","duration":0.37369999999998527,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Brown 0 special card (-3 points)","status":"passed","title":"should handle Brown 0 special card (-3 points)","duration":0.35940000000005057,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should clear current trick after resolution","status":"passed","title":"should clear current trick after resolution","duration":0.2196999999999889,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set previousTrick with winner info","status":"passed","title":"should set previousTrick with winner info","duration":0.43240000000002965,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.2699000000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should transition to scoring phase when round is over","status":"passed","title":"should transition to scoring phase when round is over","duration":0.23319999999989705,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should stay in playing phase when cards remain","status":"passed","title":"should stay in playing phase when cards remain","duration":0.5366999999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should throw error if trick is incomplete","status":"passed","title":"should throw error if trick is incomplete","duration":0.8145999999999276,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - immutability guarantees"],"fullName":"stateTransitions - immutability guarantees should never mutate original game state","status":"passed","title":"should never mutate original game state","duration":0.22879999999997835,"failureMessages":[],"meta":{}}],"startTime":1763558906474,"endTime":1763558906481.2288,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/stateTransitions.test.ts"},{"assertionResults":[{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not in playing phase","status":"passed","title":"should reject play when not in playing phase","duration":2.01520000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when player already played in trick","status":"passed","title":"should reject play when player already played in trick","duration":0.4073000000000775,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when trick is complete (4 cards)","status":"passed","title":"should reject play when trick is complete (4 cards)","duration":0.3079000000000178,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not player's turn","status":"passed","title":"should reject play when not player's turn","duration":0.23769999999990432,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject invalid card data","status":"passed","title":"should reject invalid card data","duration":0.38009999999997035,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject card not in player's hand","status":"passed","title":"should reject card not in player's hand","duration":0.2846999999999298,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should enforce suit-following rule","status":"passed","title":"should enforce suit-following rule","duration":0.23739999999997963,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow playing off-suit when no led suit in hand","status":"passed","title":"should allow playing off-suit when no led suit in hand","duration":0.18449999999995725,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow valid card play","status":"passed","title":"should allow valid card play","duration":0.3868999999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not in betting phase","status":"passed","title":"should reject bet when not in betting phase","duration":0.27740000000005693,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not player's turn","status":"passed","title":"should reject bet when not player's turn","duration":0.1854999999999336,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject duplicate bet","status":"passed","title":"should reject duplicate bet","duration":0.237700000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount < 7","status":"passed","title":"should reject bet amount < 7","duration":0.15869999999995343,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount > 12","status":"passed","title":"should reject bet amount > 12","duration":0.165300000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject dealer skip when no valid bets","status":"passed","title":"should reject dealer skip when no valid bets","duration":0.17610000000001946,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow dealer to skip when there are valid bets","status":"passed","title":"should allow dealer to skip when there are valid bets","duration":0.13999999999998636,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow valid bet","status":"passed","title":"should allow valid bet","duration":0.1331000000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.22900000000004184,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.16269999999997253,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player already on team","status":"passed","title":"should reject when player already on team","duration":0.17269999999996344,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when team is full","status":"passed","title":"should reject when team is full","duration":0.1977999999999156,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should allow valid team selection","status":"passed","title":"should allow valid team selection","duration":0.14869999999996253,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with human during active gameplay","status":"passed","title":"should allow swapping with human during active gameplay","duration":0.2197999999999638,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with bot during active gameplay","status":"passed","title":"should allow swapping with bot during active gameplay","duration":0.13530000000002929,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap with bot during active gameplay","status":"passed","title":"should allow cross-team swap with bot during active gameplay","duration":0.14590000000009695,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping during game_over phase","status":"passed","title":"should reject swapping during game_over phase","duration":0.1957999999999629,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.1716000000000122,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping with self","status":"passed","title":"should reject swapping with self","duration":0.11389999999994416,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow valid position swap between teammates","status":"passed","title":"should allow valid position swap between teammates","duration":0.1269999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap during team_selection","status":"passed","title":"should allow cross-team swap during team_selection","duration":0.09439999999995052,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.2639000000000351,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not exactly 4 players","status":"passed","title":"should reject when not exactly 4 players","duration":0.17700000000002092,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when teams are not balanced","status":"passed","title":"should reject when teams are not balanced","duration":0.17719999999997071,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should allow starting with valid setup","status":"passed","title":"should allow starting with valid setup","duration":0.14679999999998472,"failureMessages":[],"meta":{}}],"startTime":1763558906477,"endTime":1763558906487.1772,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/validation.test.ts"},{"assertionResults":[{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should save new game with correct status","status":"passed","title":"should save new game with correct status","duration":14.007699999999659,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to team_selection for 4 players in team_selection phase","status":"passed","title":"should set status to team_selection for 4 players in team_selection phase","duration":0.40879999999970096,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to in_progress for gameplay phases","status":"passed","title":"should set status to in_progress for gameplay phases","duration":0.2602000000001681,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to finished for game_over phase","status":"passed","title":"should set status to finished for game_over phase","duration":2.0687000000002627,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should convert Maps to objects for serialization","status":"passed","title":"should convert Maps to objects for serialization","duration":0.36419999999998254,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should load existing game","status":"passed","title":"should load existing game","duration":7.621399999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should return null for non-existent game","status":"passed","title":"should return null for non-existent game","duration":0.17239999999992506,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should restore Map objects from plain objects","status":"passed","title":"should restore Map objects from plain objects","duration":0.5387000000000626,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should deep clone to prevent mutations","status":"passed","title":"should deep clone to prevent mutations","duration":6.304299999999785,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","deleteGameState"],"fullName":"gameState persistence deleteGameState should delete existing game","status":"passed","title":"should delete existing game","duration":0.42980000000034124,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should list all games by default","status":"passed","title":"should list all games by default","duration":3.638500000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by status","status":"passed","title":"should filter by status","duration":0.7442000000000917,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by isPublic","status":"passed","title":"should filter by isPublic","duration":0.17160000000012587,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should apply limit","status":"passed","title":"should apply limit","duration":0.17650000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should include team assignments in result","status":"passed","title":"should include team assignments in result","duration":0.21000000000003638,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return games containing player","status":"passed","title":"should return games containing player","duration":0.5018000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return empty array if player has no games","status":"passed","title":"should return empty array if player has no games","duration":0.9501000000000204,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return true for existing game","status":"passed","title":"should return true for existing game","duration":9.332699999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return false for non-existent game","status":"passed","title":"should return false for non-existent game","duration":0.10600000000022192,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should call cleanup function and return count","status":"passed","title":"should call cleanup function and return count","duration":0.18269999999984066,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should return 0 if no games cleaned up","status":"passed","title":"should return 0 if no games cleaned up","duration":0.11199999999962529,"failureMessages":[],"meta":{}}],"startTime":1763558908007,"endTime":1763558908064.3328,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/gameState.test.ts"},{"assertionResults":[{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first game stat update","status":"passed","title":"should initialize player_stats record on first game stat update","duration":1145.259,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first round stat update","status":"passed","title":"should initialize player_stats record on first round stat update","duration":117.12069999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game win correctly","status":"passed","title":"should record game win correctly","duration":121.74749999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game loss correctly","status":"passed","title":"should record game loss correctly","duration":119.2534999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive wins (win streak)","status":"passed","title":"should track consecutive wins (win streak)","duration":423.08500000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive losses (loss streak)","status":"passed","title":"should track consecutive losses (loss streak)","duration":311.66290000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track fastest win","status":"passed","title":"should track fastest win","duration":382.78089999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track longest game","status":"passed","title":"should track longest game","duration":289.15290000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should calculate average game duration","status":"passed","title":"should calculate average game duration","duration":358.9295999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should update highest and lowest ELO ratings","status":"passed","title":"should update highest and lowest ELO ratings","duration":286.4562999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record successful bet","status":"passed","title":"should record successful bet","duration":87.24179999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record failed bet","status":"passed","title":"should record failed bet","duration":87.75980000000072,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track without trump bets","status":"passed","title":"should track without trump bets","duration":90.86520000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track trump cards played","status":"passed","title":"should track trump cards played","duration":189.23670000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track red zeros collected","status":"passed","title":"should track red zeros collected","duration":89.09500000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track brown zeros received","status":"passed","title":"should track brown zeros received","duration":89.55500000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should calculate average tricks per round","status":"passed","title":"should calculate average tricks per round","duration":177.63820000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should update highest bet","status":"passed","title":"should update highest bet","duration":264.1286,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should create game history record","status":"skipped","title":"should create game history record","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should mark game as finished","status":"skipped","title":"should mark game as finished","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve leaderboard with top players","status":"skipped","title":"should retrieve leaderboard with top players","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve player history","status":"skipped","title":"should retrieve player history","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Integration: Complete Game Flow"],"fullName":"Database Stats Functions Integration: Complete Game Flow should record all stats for a complete game","status":"skipped","title":"should record all stats for a complete game","failureMessages":[],"meta":{}}],"startTime":1763558906964,"endTime":1763558911596.1287,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/index.test.ts"},{"assertionResults":[{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should skip save for casual mode","status":"passed","title":"should skip save for casual mode","duration":6.020399999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should save for elo mode","status":"passed","title":"should save for elo mode","duration":2.4384999999999764,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.024000000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.9282000000000608,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should save for elo mode","status":"passed","title":"should save for elo mode","duration":0.5602999999999838,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.8600999999999885,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should mark for elo mode","status":"passed","title":"should mark for elo mode","duration":0.5950000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.8052999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.6220999999999322,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.6567000000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.2907999999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for bots","status":"passed","title":"should skip for bots","duration":0.5344000000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.314899999999966,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should create for elo mode + human players","status":"passed","title":"should create for elo mode + human players","duration":0.35960000000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should handle database errors and return null","status":"passed","title":"should handle database errors and return null","duration":0.6268000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.42279999999993834,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should delete for elo mode","status":"passed","title":"should delete for elo mode","duration":0.18689999999992324,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.17679999999995744,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.14560000000005857,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.0757999999999583,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for casual mode","status":"passed","title":"should return 0 for casual mode","duration":0.5908000000000584,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for bots","status":"passed","title":"should return 0 for bots","duration":0.4574000000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should calculate real ELO changes for elo mode","status":"passed","title":"should calculate real ELO changes for elo mode","duration":0.6476000000000113,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should use default ELO 1200 for new players","status":"passed","title":"should use default ELO 1200 for new players","duration":0.3913000000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.8208000000000766,"failureMessages":[],"meta":{}}],"startTime":1763558906695,"endTime":1763558906719.8208,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/persistenceManager.test.ts"},{"assertionResults":[{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create a new refresh token successfully","status":"passed","title":"should create a new refresh token successfully","duration":7.301000000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create token with default expiry of 30 days","status":"passed","title":"should create token with default expiry of 30 days","duration":0.7382000000000062,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":7.7888000000000375,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should return null when pool is not available","status":"passed","title":"should return null when pool is not available","duration":0.39659999999992124,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should verify valid token successfully","status":"passed","title":"should verify valid token successfully","duration":1.393199999999979,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for expired token","status":"passed","title":"should return null for expired token","duration":0.5219999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for revoked token","status":"passed","title":"should return null for revoked token","duration":0.2535000000000309,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.436700000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rotate token successfully","status":"passed","title":"should rotate token successfully","duration":1.270399999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rollback on error","status":"passed","title":"should rollback on error","duration":0.864400000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should return null for invalid old token","status":"passed","title":"should return null for invalid old token","duration":0.35400000000004184,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should revoke token successfully","status":"passed","title":"should revoke token successfully","duration":0.6955000000000382,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should return false for already revoked token","status":"passed","title":"should return false for already revoked token","duration":0.2744999999999891,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.8431000000000495,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should revoke all tokens for user","status":"passed","title":"should revoke all tokens for user","duration":0.6042999999999665,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should return 0 when user has no tokens","status":"passed","title":"should return 0 when user has no tokens","duration":0.2280999999999267,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.9725999999999431,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should detect revoked token reuse","status":"passed","title":"should detect revoked token reuse","duration":0.6274999999999409,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for valid token","status":"passed","title":"should return false for valid token","duration":0.27530000000001564,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for non-existent token","status":"passed","title":"should return false for non-existent token","duration":0.23919999999998254,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should hash token consistently","status":"passed","title":"should hash token consistently","duration":0.8704999999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should produce different hashes for different tokens","status":"passed","title":"should produce different hashes for different tokens","duration":0.48710000000005493,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should delete expired tokens","status":"passed","title":"should delete expired tokens","duration":1.0043000000000575,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should return 0 when no expired tokens","status":"passed","title":"should return 0 when no expired tokens","duration":0.42180000000007567,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return active tokens for user","status":"passed","title":"should return active tokens for user","duration":0.5373999999999342,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return empty array when user has no active tokens","status":"passed","title":"should return empty array when user has no active tokens","duration":0.47519999999997253,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should generate cryptographically secure tokens","status":"passed","title":"should generate cryptographically secure tokens","duration":0.5593999999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should hash tokens before database storage","status":"passed","title":"should hash tokens before database storage","duration":0.5733999999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null IP address","status":"passed","title":"should handle null IP address","duration":0.35829999999998563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null user agent","status":"passed","title":"should handle null user agent","duration":0.4116999999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle concurrent token rotations gracefully","status":"passed","title":"should handle concurrent token rotations gracefully","duration":1.1491999999999507,"failureMessages":[],"meta":{}}],"startTime":1763558906495,"endTime":1763558906531.1492,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/refreshTokens.test.ts"},{"assertionResults":[{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should create user with hashed password","status":"passed","title":"should create user with hashed password","duration":1022.1970999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate email","status":"passed","title":"should reject duplicate email","duration":284.35329999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate username","status":"passed","title":"should reject duplicate username","duration":341.07519999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should auto-verify user when email service is not configured","status":"passed","title":"should auto-verify user when email service is not configured","duration":194.8127999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by email","status":"passed","title":"should return user by email","duration":19.384599999999864,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return null for non-existent email","status":"passed","title":"should return null for non-existent email","duration":18.280899999999747,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by username","status":"passed","title":"should return user by username","duration":19.17990000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by ID without password hash","status":"passed","title":"should return user by ID without password hash","duration":19.010600000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should mark email as verified with valid token","status":"passed","title":"should mark email as verified with valid token","duration":276.9279999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject invalid token","status":"passed","title":"should reject invalid token","duration":62.66879999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject already verified token","status":"passed","title":"should reject already verified token","duration":309.2330999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject expired token","status":"passed","title":"should reject expired token","duration":291.1898999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should create password reset token","status":"passed","title":"should create password reset token","duration":236.34199999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should update password with valid reset token","status":"passed","title":"should update password with valid reset token","duration":379.3320999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject invalid reset token","status":"passed","title":"should reject invalid reset token","duration":59.18080000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject already used reset token","status":"passed","title":"should reject already used reset token","duration":396.03260000000046,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update display name","status":"passed","title":"should update display name","duration":177.39260000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update avatar URL","status":"passed","title":"should update avatar URL","duration":179.01719999999932,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if username exists","status":"passed","title":"should correctly check if username exists","duration":192.97609999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if email exists","status":"passed","title":"should correctly check if email exists","duration":196.16330000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","linkPlayerToUser"],"fullName":"User Database Operations linkPlayerToUser should link player_stats to user account","status":"passed","title":"should link player_stats to user account","duration":234.95929999999953,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateLastLogin"],"fullName":"User Database Operations updateLastLogin should update last_login_at timestamp","status":"passed","title":"should update last_login_at timestamp","duration":333.35429999999997,"failureMessages":[],"meta":{}}],"startTime":1763558907232,"endTime":1763558912643.3542,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/users.test.ts"},{"assertionResults":[{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate and return CSRF token","status":"passed","title":"should generate and return CSRF token","duration":26.45880000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set CSRF token in cookie","status":"passed","title":"should set CSRF token in cookie","duration":5.1983000000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set httpOnly cookie","status":"passed","title":"should set httpOnly cookie","duration":4.841300000000047,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set SameSite=Strict","status":"passed","title":"should set SameSite=Strict","duration":4.116199999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate different tokens for different requests","status":"passed","title":"should generate different tokens for different requests","duration":9.929499999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should allow request with valid CSRF token","status":"passed","title":"should allow request with valid CSRF token","duration":20.521799999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request without CSRF token","status":"passed","title":"should reject request without CSRF token","duration":6.490400000000136,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with invalid CSRF token","status":"passed","title":"should reject request with invalid CSRF token","duration":4.89449999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with token but no cookie","status":"passed","title":"should reject request with token but no cookie","duration":7.57510000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with cookie but no token","status":"passed","title":"should reject request with cookie but no token","duration":6.969000000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should protect PUT requests","status":"passed","title":"should protect PUT requests","duration":6.798900000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should reject PUT without token","status":"passed","title":"should reject PUT without token","duration":3.30170000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should protect DELETE requests","status":"passed","title":"should protect DELETE requests","duration":5.5324999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should reject DELETE without token","status":"passed","title":"should reject DELETE without token","duration":3.3389000000001943,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should allow GET requests without CSRF token","status":"passed","title":"should allow GET requests without CSRF token","duration":4.264799999999923,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should not require CSRF token for GET to protected route","status":"passed","title":"should not require CSRF token for GET to protected route","duration":3.39429999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return user-friendly error message","status":"passed","title":"should return user-friendly error message","duration":4.304800000000114,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return 403 status code for CSRF errors","status":"passed","title":"should return 403 status code for CSRF errors","duration":7.4042000000001735,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should pass through non-CSRF errors","status":"passed","title":"should pass through non-CSRF errors","duration":4.2094999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should validate token matches cookie","status":"passed","title":"should validate token matches cookie","duration":7.563899999999876,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should accept token from same session","status":"passed","title":"should accept token from same session","duration":4.602499999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use different tokens for different sessions","status":"passed","title":"should use different tokens for different sessions","duration":3.9582000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should set httpOnly flag to prevent XSS","status":"passed","title":"should set httpOnly flag to prevent XSS","duration":2.4727000000000317,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use SameSite=Strict to prevent CSRF","status":"passed","title":"should use SameSite=Strict to prevent CSRF","duration":2.1847000000000207,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use Secure flag in production","status":"passed","title":"should use Secure flag in production","duration":2.283300000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle missing X-CSRF-Token header","status":"passed","title":"should handle missing X-CSRF-Token header","duration":5.393000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle empty CSRF token","status":"passed","title":"should handle empty CSRF token","duration":4.9202999999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle malformed CSRF token","status":"passed","title":"should handle malformed CSRF token","duration":5.382200000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle multiple CSRF tokens in header","status":"passed","title":"should handle multiple CSRF tokens in header","duration":5.349500000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should work with authenticated requests","status":"passed","title":"should work with authenticated requests","duration":5.827800000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should require both CSRF token and auth token","status":"passed","title":"should require both CSRF token and auth token","duration":4.781999999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Configuration"],"fullName":"CSRF Configuration should warn about default secret in production","status":"passed","title":"should warn about default secret in production","duration":1.212099999999964,"failureMessages":[],"meta":{}}],"startTime":1763558906912,"endTime":1763558907109.2122,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/middleware/csrf.test.ts"},{"assertionResults":[{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should restore game state with valid session","status":"passed","title":"should restore game state with valid session","duration":2.1487000000000194,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject invalid session token","status":"passed","title":"should reject invalid session token","duration":0.2381000000000313,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject expired session","status":"passed","title":"should reject expired session","duration":0.2504999999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should emit reconnection_successful","status":"passed","title":"should emit reconnection_successful","duration":0.5951000000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should notify other players of reconnection","status":"passed","title":"should notify other players of reconnection","duration":0.35710000000000264,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should mark player as disconnected","status":"passed","title":"should mark player as disconnected","duration":0.2249999999999659,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should start 15-minute reconnection timer","status":"passed","title":"should start 15-minute reconnection timer","duration":0.3543000000000234,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should emit player_disconnected event","status":"passed","title":"should emit player_disconnected event","duration":0.40919999999999845,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should remove player from game","status":"passed","title":"should remove player from game","duration":0.5858000000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should delete session","status":"passed","title":"should delete session","duration":0.3032000000000039,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should emit player_left event","status":"passed","title":"should emit player_left event","duration":0.3062999999999647,"failureMessages":[],"meta":{}}],"startTime":1763558906840,"endTime":1763558906846.3064,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/connection.test.ts"},{"assertionResults":[{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should accept valid bet in range 7-12","status":"passed","title":"should accept valid bet in range 7-12","duration":2.588799999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject bet out of range","status":"passed","title":"should reject bet out of range","duration":0.5439000000000078,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should enforce bet hierarchy (higher amount wins)","status":"passed","title":"should enforce bet hierarchy (higher amount wins)","duration":0.27420000000000755,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle without-trump bets correctly","status":"passed","title":"should handle without-trump bets correctly","duration":0.21739999999999782,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should allow dealer to equalize","status":"passed","title":"should allow dealer to equalize","duration":0.4613000000000511,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject dealer skip","status":"passed","title":"should reject dealer skip","duration":0.31389999999998963,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle skip bet correctly","status":"passed","title":"should handle skip bet correctly","duration":0.33299999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should accept valid card play","status":"passed","title":"should accept valid card play","duration":0.3020999999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should enforce suit-following rules","status":"passed","title":"should enforce suit-following rules","duration":0.4592999999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject card not in hand","status":"passed","title":"should reject card not in hand","duration":0.3502000000000294,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject play when not player turn","status":"passed","title":"should reject play when not player turn","duration":0.17170000000004393,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should resolve trick after 4 cards","status":"passed","title":"should resolve trick after 4 cards","duration":0.21750000000002956,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should calculate points correctly (red 0, brown 0)","status":"passed","title":"should calculate points correctly (red 0, brown 0)","duration":0.252900000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should mark player ready after round","status":"passed","title":"should mark player ready after round","duration":0.23980000000000246,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should start new round when all ready","status":"passed","title":"should start new round when all ready","duration":0.220799999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should end game at 41+ points","status":"passed","title":"should end game at 41+ points","duration":0.20229999999997972,"failureMessages":[],"meta":{}}],"startTime":1763558906789,"endTime":1763558906797.2397,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/gameplay.test.ts"},{"assertionResults":[{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should create new game with valid player name","status":"passed","title":"should create new game with valid player name","duration":3.9968999999999824,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should reject invalid player names","status":"passed","title":"should reject invalid player names","duration":0.38179999999999836,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should assign player as host","status":"passed","title":"should assign player as host","duration":0.4434999999999718,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should emit game_created event","status":"passed","title":"should emit game_created event","duration":3.4033999999999764,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should add player to existing game","status":"passed","title":"should add player to existing game","duration":0.4796000000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game full","status":"passed","title":"should reject if game full","duration":0.21790000000004284,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game already started","status":"passed","title":"should reject if game already started","duration":0.212600000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should assign player to team","status":"passed","title":"should assign player to team","duration":0.24799999999999045,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should allow team selection before game starts","status":"passed","title":"should allow team selection before game starts","duration":0.33159999999998035,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should reject team selection during game","status":"passed","title":"should reject team selection during game","duration":0.19369999999997844,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should balance teams (2v2)","status":"passed","title":"should balance teams (2v2)","duration":0.23040000000003147,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should swap positions within team","status":"passed","title":"should swap positions within team","duration":0.2108000000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should detect cross-team scenarios","status":"passed","title":"should detect cross-team scenarios","duration":0.12850000000003092,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should update player order","status":"passed","title":"should update player order","duration":0.4060999999999808,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should allow host to kick players","status":"passed","title":"should allow host to kick players","duration":0.3350000000000364,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should reject non-host kick attempts","status":"passed","title":"should reject non-host kick attempts","duration":0.13150000000001683,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should update game state after kick","status":"passed","title":"should update game state after kick","duration":0.16960000000000264,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should start game with 4 players","status":"passed","title":"should start game with 4 players","duration":0.13769999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should reject if teams unbalanced","status":"passed","title":"should reject if teams unbalanced","duration":0.17889999999999873,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should deal cards and set dealer","status":"passed","title":"should deal cards and set dealer","duration":0.25670000000002346,"failureMessages":[],"meta":{}}],"startTime":1763558906734,"endTime":1763558906746.2566,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/lobby.test.ts"},{"assertionResults":[{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should hash password with bcrypt","status":"passed","title":"should hash password with bcrypt","duration":62.232599999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should generate different hash for same password","status":"passed","title":"should generate different hash for same password","duration":248.4604999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return true for correct password","status":"passed","title":"should return true for correct password","duration":104.74000000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return false for incorrect password","status":"passed","title":"should return false for incorrect password","duration":102.4099000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should generate access and refresh tokens","status":"passed","title":"should generate access and refresh tokens","duration":3.4952999999998156,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should create valid JWT tokens","status":"passed","title":"should create valid JWT tokens","duration":1.8015000000000327,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should include user data in payload","status":"passed","title":"should include user data in payload","duration":2.1537000000000717,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should verify valid access token","status":"passed","title":"should verify valid access token","duration":1.5179999999998017,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject refresh token as access token","status":"passed","title":"should reject refresh token as access token","duration":1.758100000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.1773000000000593,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject malformed token","status":"passed","title":"should reject malformed token","duration":0.10410000000001673,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should verify valid refresh token","status":"passed","title":"should verify valid refresh token","duration":1.3971000000001368,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject access token as refresh token","status":"passed","title":"should reject access token as refresh token","duration":1.472400000000107,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.15260000000012042,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate random token","status":"passed","title":"should generate random token","duration":0.3002999999998792,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate unique tokens","status":"passed","title":"should generate unique tokens","duration":0.3224999999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate hex string","status":"passed","title":"should generate hex string","duration":0.146900000000187,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should accept valid passwords","status":"passed","title":"should accept valid passwords","duration":0.34969999999998436,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password too short","status":"passed","title":"should reject password too short","duration":0.19220000000018445,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without uppercase","status":"passed","title":"should reject password without uppercase","duration":0.10249999999996362,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without lowercase","status":"passed","title":"should reject password without lowercase","duration":0.09379999999987376,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without number","status":"passed","title":"should reject password without number","duration":0.08990000000017062,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should accept valid emails","status":"passed","title":"should accept valid emails","duration":0.24969999999984793,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should reject invalid email formats","status":"passed","title":"should reject invalid email formats","duration":0.1938000000000102,"failureMessages":[],"meta":{}}],"startTime":1763558906841,"endTime":1763558907377.2498,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/authHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 1 for empty game","status":"passed","title":"should return Bot 1 for empty game","duration":1.6879000000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 2 when Bot 1 exists","status":"passed","title":"should return Bot 2 when Bot 1 exists","duration":0.3177000000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should fill gaps in bot numbering","status":"passed","title":"should fill gaps in bot numbering","duration":0.21469999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 3 when Bot 1 and 2 exist","status":"passed","title":"should return Bot 3 when Bot 1 and 2 exist","duration":0.34710000000001173,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should ignore non-bot players","status":"passed","title":"should ignore non-bot players","duration":0.2359000000000151,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots when less than 3 exist","status":"passed","title":"should allow adding bots when less than 3 exist","duration":0.3147000000000162,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should reject adding bots when 3 already exist","status":"passed","title":"should reject adding bots when 3 already exist","duration":0.26650000000000773,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots to empty game","status":"passed","title":"should allow adding bots to empty game","duration":0.29460000000000264,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return true for teammates","status":"passed","title":"should return true for teammates","duration":0.5178000000000225,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false for non-teammates","status":"passed","title":"should return false for non-teammates","duration":0.17470000000002983,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when player not found","status":"passed","title":"should return false when player not found","duration":0.15390000000002146,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when both players not found","status":"passed","title":"should return false when both players not found","duration":0.10480000000001155,"failureMessages":[],"meta":{}}],"startTime":1763558906872,"endTime":1763558906877.5178,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/botHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by socket ID","status":"passed","title":"should find player by socket ID","duration":2.5150999999999613,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by name when socket ID not found","status":"passed","title":"should find player by name when socket ID not found","duration":0.4641000000000304,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should return undefined if player not found","status":"passed","title":"should return undefined if player not found","duration":0.291499999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should handle empty player array","status":"passed","title":"should handle empty player array","duration":0.21940000000000737,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by socket ID","status":"passed","title":"should find player index by socket ID","duration":0.4637000000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by name when socket ID not found","status":"passed","title":"should find player index by name when socket ID not found","duration":0.2536000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should return -1 if player not found","status":"passed","title":"should return -1 if player not found","duration":0.27379999999999427,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return true when human players exist","status":"passed","title":"should return true when human players exist","duration":0.24740000000002738,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when only bots exist","status":"passed","title":"should return false when only bots exist","duration":0.5,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when no players exist","status":"passed","title":"should return false when no players exist","duration":0.24540000000001783,"failureMessages":[],"meta":{}}],"startTime":1763558906825,"endTime":1763558906831.5,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/playerHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should accept valid player names","status":"passed","title":"should accept valid player names","duration":1.8527000000003682,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject empty names","status":"passed","title":"should reject empty names","duration":0.8135999999999513,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":9.41760000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should enforce max length of 20 characters","status":"passed","title":"should enforce max length of 20 characters","duration":0.6083000000003267,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject invalid characters","status":"passed","title":"should reject invalid characters","duration":0.20340000000032887,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should accept valid messages","status":"passed","title":"should accept valid messages","duration":0.33490000000028886,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should reject empty messages","status":"passed","title":"should reject empty messages","duration":0.2037000000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":1.6281999999996515,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should enforce max length of 200 characters","status":"passed","title":"should enforce max length of 200 characters","duration":0.3154999999997017,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should accept valid bet amounts (7-12)","status":"passed","title":"should accept valid bet amounts (7-12)","duration":0.2426999999997861,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject amounts outside range","status":"passed","title":"should reject amounts outside range","duration":0.23320000000012442,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.2598000000002685,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should accept valid card values (0-7)","status":"passed","title":"should accept valid card values (0-7)","duration":0.14580000000023574,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject values outside range","status":"passed","title":"should reject values outside range","duration":0.30150000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.13169999999990978,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should accept valid colors","status":"passed","title":"should accept valid colors","duration":0.14429999999993015,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should reject invalid colors","status":"passed","title":"should reject invalid colors","duration":0.20440000000007785,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should accept valid game IDs","status":"passed","title":"should accept valid game IDs","duration":0.29460000000017317,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should reject invalid formats","status":"passed","title":"should reject invalid formats","duration":0.21129999999993743,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should sanitize text and enforce max length","status":"passed","title":"should sanitize text and enforce max length","duration":1.2640000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should handle empty input","status":"passed","title":"should handle empty input","duration":0.08140000000003056,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should accept boolean values","status":"passed","title":"should accept boolean values","duration":0.12530000000015207,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert truthy values","status":"passed","title":"should convert truthy values","duration":0.1014999999997599,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert falsy values","status":"passed","title":"should convert falsy values","duration":0.09920000000010987,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should reject invalid values","status":"passed","title":"should reject invalid values","duration":0.12780000000020664,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should accept valid team IDs","status":"passed","title":"should accept valid team IDs","duration":0.14800000000013824,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should reject invalid team IDs","status":"passed","title":"should reject invalid team IDs","duration":0.19349999999985812,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should accept valid player indices","status":"passed","title":"should accept valid player indices","duration":0.1590000000001055,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should reject invalid indices","status":"passed","title":"should reject invalid indices","duration":0.19410000000016225,"failureMessages":[],"meta":{}}],"startTime":1763558908006,"endTime":1763558908027.194,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sanitization.test.ts"},{"assertionResults":[{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate unique session token","status":"passed","title":"should generate unique session token","duration":3.5551999999998998,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate 64 character hex string","status":"passed","title":"should generate 64 character hex string","duration":1.2744000000000142,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should create and store session","status":"passed","title":"should create and store session","duration":0.5934999999999491,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should store session in map","status":"passed","title":"should store session in map","duration":0.358600000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should return session object with correct properties","status":"passed","title":"should return session object with correct properties","duration":0.4732000000000198,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should generate unique tokens for multiple sessions","status":"passed","title":"should generate unique tokens for multiple sessions","duration":0.4979999999999336,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return session for valid token","status":"passed","title":"should return session for valid token","duration":0.3602000000000771,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for non-existent token","status":"passed","title":"should return null for non-existent token","duration":0.2038000000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for expired session","status":"passed","title":"should return null for expired session","duration":0.3567000000000462,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should delete expired session from map","status":"passed","title":"should delete expired session from map","duration":0.2681999999999789,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should accept session just before expiry","status":"passed","title":"should accept session just before expiry","duration":0.2376000000000431,"failureMessages":[],"meta":{}}],"startTime":1763558906420,"endTime":1763558906429.2683,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sessionManager.test.ts"}]}
