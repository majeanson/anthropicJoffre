
> trick-card-game-backend@2.3.0 test
> vitest --reporter=json

{"numTotalTestSuites":174,"numPassedTestSuites":174,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":456,"numPassedTests":451,"numFailedTests":0,"numPendingTests":5,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763567888474,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should refresh token with valid refresh token cookie","status":"passed","title":"should refresh token with valid refresh token cookie","duration":20.316899999999805,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should set secure cookie in production","status":"passed","title":"should set secure cookie in production","duration":3.8076999999998407,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should detect and reject suspicious token usage","status":"passed","title":"should detect and reject suspicious token usage","duration":3.588999999999942,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should revoke all user tokens on theft detection","status":"passed","title":"should revoke all user tokens on theft detection","duration":3.6076000000000477,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject request without refresh token cookie","status":"passed","title":"should reject request without refresh token cookie","duration":3.401100000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject expired refresh token","status":"passed","title":"should reject expired refresh token","duration":2.701999999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for banned user","status":"passed","title":"should reject token for banned user","duration":2.682700000000068,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for deleted user","status":"passed","title":"should reject token for deleted user","duration":2.873100000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Rate Limiting"],"fullName":"POST /api/auth/refresh Rate Limiting should apply rate limiting to refresh endpoint","status":"passed","title":"should apply rate limiting to refresh endpoint","duration":4.587299999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should invalidate old token when rotating","status":"passed","title":"should invalidate old token when rotating","duration":3.839000000000169,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should track IP and user agent in rotation","status":"passed","title":"should track IP and user agent in rotation","duration":2.192199999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":4.130600000000186,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle rotation failures gracefully","status":"passed","title":"should handle rotation failures gracefully","duration":2.8920000000000528,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should revoke refresh token on logout","status":"passed","title":"should revoke refresh token on logout","duration":2.9054000000000997,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even without refresh token","status":"passed","title":"should succeed even without refresh token","duration":2.2090999999998076,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even if revocation fails","status":"passed","title":"should succeed even if revocation fails","duration":2.329200000000128,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should revoke all user tokens","status":"passed","title":"should revoke all user tokens","duration":2.300799999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should require valid access token","status":"passed","title":"should require valid access token","duration":2.078800000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should reject invalid access token","status":"passed","title":"should reject invalid access token","duration":2.0666000000001077,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should clear refresh token cookie","status":"passed","title":"should clear refresh token cookie","duration":2.2800999999999476,"failureMessages":[],"meta":{}}],"startTime":1763567889677,"endTime":1763567889754.28,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/auth.refresh.test.ts"},{"assertionResults":[{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow viewing own profile with friends_only visibility","status":"passed","title":"should allow viewing own profile with friends_only visibility","duration":2.004700000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block anonymous users from friends_only profiles","status":"passed","title":"should block anonymous users from friends_only profiles","duration":0.2692000000000121,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block non-friends from friends_only profiles","status":"passed","title":"should block non-friends from friends_only profiles","duration":0.18479999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow friends to view friends_only profiles","status":"passed","title":"should allow friends to view friends_only profiles","duration":0.25420000000002574,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Public visibility"],"fullName":"Profile Visibility Logic Public visibility should allow anyone to view public profiles","status":"passed","title":"should allow anyone to view public profiles","duration":0.2370000000000232,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Private visibility"],"fullName":"Profile Visibility Logic Private visibility should block everyone from private profiles","status":"passed","title":"should block everyone from private profiles","duration":0.1967000000000212,"failureMessages":[],"meta":{}}],"startTime":1763567889512,"endTime":1763567889516.1968,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/profiles.test.ts"},{"assertionResults":[{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should save new game with correct status","status":"passed","title":"should save new game with correct status","duration":4.254899999999907,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to team_selection for 4 players in team_selection phase","status":"passed","title":"should set status to team_selection for 4 players in team_selection phase","duration":0.38220000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to in_progress for gameplay phases","status":"passed","title":"should set status to in_progress for gameplay phases","duration":0.2964999999999236,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to finished for game_over phase","status":"passed","title":"should set status to finished for game_over phase","duration":0.22640000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should convert Maps to objects for serialization","status":"passed","title":"should convert Maps to objects for serialization","duration":0.3229999999998654,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should load existing game","status":"passed","title":"should load existing game","duration":1.1177000000000135,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should return null for non-existent game","status":"passed","title":"should return null for non-existent game","duration":0.15629999999987376,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should restore Map objects from plain objects","status":"passed","title":"should restore Map objects from plain objects","duration":0.43840000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should deep clone to prevent mutations","status":"passed","title":"should deep clone to prevent mutations","duration":0.6039000000000669,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","deleteGameState"],"fullName":"gameState persistence deleteGameState should delete existing game","status":"passed","title":"should delete existing game","duration":0.4025000000001455,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should list all games by default","status":"passed","title":"should list all games by default","duration":0.801200000000108,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by status","status":"passed","title":"should filter by status","duration":0.23959999999988213,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by isPublic","status":"passed","title":"should filter by isPublic","duration":0.15660000000002583,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should apply limit","status":"passed","title":"should apply limit","duration":0.14610000000016043,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should include team assignments in result","status":"passed","title":"should include team assignments in result","duration":0.17279999999982465,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return games containing player","status":"passed","title":"should return games containing player","duration":0.4092000000000553,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return empty array if player has no games","status":"passed","title":"should return empty array if player has no games","duration":0.19230000000015934,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return true for existing game","status":"passed","title":"should return true for existing game","duration":0.2618999999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return false for non-existent game","status":"passed","title":"should return false for non-existent game","duration":0.10140000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should call cleanup function and return count","status":"passed","title":"should call cleanup function and return count","duration":0.17290000000002692,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should return 0 if no games cleaned up","status":"passed","title":"should return 0 if no games cleaned up","duration":0.09839999999985594,"failureMessages":[],"meta":{}}],"startTime":1763567890173,"endTime":1763567890185.1729,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/gameState.test.ts"},{"assertionResults":[{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first game stat update","status":"passed","title":"should initialize player_stats record on first game stat update","duration":1079.1626,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first round stat update","status":"passed","title":"should initialize player_stats record on first round stat update","duration":114.47890000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game win correctly","status":"passed","title":"should record game win correctly","duration":117.12509999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game loss correctly","status":"passed","title":"should record game loss correctly","duration":112.27369999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive wins (win streak)","status":"passed","title":"should track consecutive wins (win streak)","duration":371.3636999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive losses (loss streak)","status":"passed","title":"should track consecutive losses (loss streak)","duration":285.97080000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track fastest win","status":"passed","title":"should track fastest win","duration":375.2230999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track longest game","status":"passed","title":"should track longest game","duration":285.6527000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should calculate average game duration","status":"passed","title":"should calculate average game duration","duration":283.96979999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should update highest and lowest ELO ratings","status":"passed","title":"should update highest and lowest ELO ratings","duration":287.0895999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record successful bet","status":"passed","title":"should record successful bet","duration":87.27460000000065,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record failed bet","status":"passed","title":"should record failed bet","duration":86.55839999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track without trump bets","status":"passed","title":"should track without trump bets","duration":95.19390000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track trump cards played","status":"passed","title":"should track trump cards played","duration":174.9343999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track red zeros collected","status":"passed","title":"should track red zeros collected","duration":87.01609999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track brown zeros received","status":"passed","title":"should track brown zeros received","duration":88.3096000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should calculate average tricks per round","status":"passed","title":"should calculate average tricks per round","duration":175.1959999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should update highest bet","status":"passed","title":"should update highest bet","duration":260.8842999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should create game history record","status":"skipped","title":"should create game history record","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should mark game as finished","status":"skipped","title":"should mark game as finished","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve leaderboard with top players","status":"skipped","title":"should retrieve leaderboard with top players","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve player history","status":"skipped","title":"should retrieve player history","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Integration: Complete Game Flow"],"fullName":"Database Stats Functions Integration: Complete Game Flow should record all stats for a complete game","status":"skipped","title":"should record all stats for a complete game","failureMessages":[],"meta":{}}],"startTime":1763567889339,"endTime":1763567893708.8843,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/index.test.ts"},{"assertionResults":[{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should skip save for casual mode","status":"passed","title":"should skip save for casual mode","duration":5.963800000000106,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should save for elo mode","status":"passed","title":"should save for elo mode","duration":2.5330999999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.9601999999999862,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.7423000000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should save for elo mode","status":"passed","title":"should save for elo mode","duration":0.5557999999999765,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.7569999999999482,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should mark for elo mode","status":"passed","title":"should mark for elo mode","duration":0.41840000000001965,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.6886000000000649,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.530399999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.5984999999999445,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.3287000000000262,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for bots","status":"passed","title":"should skip for bots","duration":0.4996999999999616,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.43240000000002965,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should create for elo mode + human players","status":"passed","title":"should create for elo mode + human players","duration":0.44700000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should handle database errors and return null","status":"passed","title":"should handle database errors and return null","duration":0.7322999999998956,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.5068999999999733,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should delete for elo mode","status":"passed","title":"should delete for elo mode","duration":0.22289999999998145,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.2377999999999929,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.18869999999992615,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.7234999999999445,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for casual mode","status":"passed","title":"should return 0 for casual mode","duration":0.5121000000000322,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for bots","status":"passed","title":"should return 0 for bots","duration":0.3387000000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should calculate real ELO changes for elo mode","status":"passed","title":"should calculate real ELO changes for elo mode","duration":0.40990000000010696,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should use default ELO 1200 for new players","status":"passed","title":"should use default ELO 1200 for new players","duration":0.3569999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.718900000000076,"failureMessages":[],"meta":{}}],"startTime":1763567889163,"endTime":1763567889188.719,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/persistenceManager.test.ts"},{"assertionResults":[{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create a new refresh token successfully","status":"passed","title":"should create a new refresh token successfully","duration":6.536000000000058,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create token with default expiry of 30 days","status":"passed","title":"should create token with default expiry of 30 days","duration":0.7907999999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":11.173999999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should return null when pool is not available","status":"passed","title":"should return null when pool is not available","duration":0.3791999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should verify valid token successfully","status":"passed","title":"should verify valid token successfully","duration":1.483699999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for expired token","status":"passed","title":"should return null for expired token","duration":0.591899999999896,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for revoked token","status":"passed","title":"should return null for revoked token","duration":0.46479999999996835,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":4.079000000000065,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rotate token successfully","status":"passed","title":"should rotate token successfully","duration":1.846300000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rollback on error","status":"passed","title":"should rollback on error","duration":1.7873999999999342,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should return null for invalid old token","status":"passed","title":"should return null for invalid old token","duration":0.5439999999999827,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should revoke token successfully","status":"passed","title":"should revoke token successfully","duration":0.7436999999999898,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should return false for already revoked token","status":"passed","title":"should return false for already revoked token","duration":0.2599999999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.2656000000000631,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should revoke all tokens for user","status":"passed","title":"should revoke all tokens for user","duration":0.7457000000000562,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should return 0 when user has no tokens","status":"passed","title":"should return 0 when user has no tokens","duration":0.332300000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.3148000000001048,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should detect revoked token reuse","status":"passed","title":"should detect revoked token reuse","duration":0.8703000000000429,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for valid token","status":"passed","title":"should return false for valid token","duration":0.41809999999998126,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for non-existent token","status":"passed","title":"should return false for non-existent token","duration":0.3672000000000253,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should hash token consistently","status":"passed","title":"should hash token consistently","duration":0.983600000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should produce different hashes for different tokens","status":"passed","title":"should produce different hashes for different tokens","duration":0.4798000000000684,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should delete expired tokens","status":"passed","title":"should delete expired tokens","duration":1.1925999999999704,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should return 0 when no expired tokens","status":"passed","title":"should return 0 when no expired tokens","duration":0.5986000000000331,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return active tokens for user","status":"passed","title":"should return active tokens for user","duration":0.670099999999934,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return empty array when user has no active tokens","status":"passed","title":"should return empty array when user has no active tokens","duration":0.5827999999999065,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should generate cryptographically secure tokens","status":"passed","title":"should generate cryptographically secure tokens","duration":0.7958999999999605,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should hash tokens before database storage","status":"passed","title":"should hash tokens before database storage","duration":0.9710000000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null IP address","status":"passed","title":"should handle null IP address","duration":0.5452999999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null user agent","status":"passed","title":"should handle null user agent","duration":0.5733000000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle concurrent token rotations gracefully","status":"passed","title":"should handle concurrent token rotations gracefully","duration":3.641200000000026,"failureMessages":[],"meta":{}}],"startTime":1763567889040,"endTime":1763567889089.641,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/refreshTokens.test.ts"},{"assertionResults":[{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should create user with hashed password","status":"passed","title":"should create user with hashed password","duration":843.7650999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate email","status":"passed","title":"should reject duplicate email","duration":270.0646999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate username","status":"passed","title":"should reject duplicate username","duration":254.26929999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should auto-verify user when email service is not configured","status":"passed","title":"should auto-verify user when email service is not configured","duration":177.33479999999963,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by email","status":"passed","title":"should return user by email","duration":19.66339999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return null for non-existent email","status":"passed","title":"should return null for non-existent email","duration":19.152599999999893,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by username","status":"passed","title":"should return user by username","duration":19.079200000000128,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by ID without password hash","status":"passed","title":"should return user by ID without password hash","duration":17.954799999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should mark email as verified with valid token","status":"passed","title":"should mark email as verified with valid token","duration":280.1271999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject invalid token","status":"passed","title":"should reject invalid token","duration":53.54760000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject already verified token","status":"passed","title":"should reject already verified token","duration":296.2114999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject expired token","status":"passed","title":"should reject expired token","duration":233.23530000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should create password reset token","status":"passed","title":"should create password reset token","duration":225.38809999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should update password with valid reset token","status":"passed","title":"should update password with valid reset token","duration":370.15430000000015,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject invalid reset token","status":"passed","title":"should reject invalid reset token","duration":61.783300000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject already used reset token","status":"passed","title":"should reject already used reset token","duration":386.33040000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update display name","status":"passed","title":"should update display name","duration":187.51260000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update avatar URL","status":"passed","title":"should update avatar URL","duration":179.8793000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if username exists","status":"passed","title":"should correctly check if username exists","duration":192.07279999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if email exists","status":"passed","title":"should correctly check if email exists","duration":195.14570000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","linkPlayerToUser"],"fullName":"User Database Operations linkPlayerToUser should link player_stats to user account","status":"passed","title":"should link player_stats to user account","duration":218.03160000000025,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateLastLogin"],"fullName":"User Database Operations updateLastLogin should update last_login_at timestamp","status":"passed","title":"should update last_login_at timestamp","duration":324.3795,"failureMessages":[],"meta":{}}],"startTime":1763567889604,"endTime":1763567894606.3794,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/users.test.ts"},{"assertionResults":[{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should create a deck with 32 cards","status":"passed","title":"should create a deck with 32 cards","duration":3.759900000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have 8 cards of each color","status":"passed","title":"should have 8 cards of each color","duration":1.0686999999999784,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have values from 0 to 7","status":"passed","title":"should have values from 0 to 7","duration":1.4594999999999914,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should return a deck with the same cards","status":"passed","title":"should return a deck with the same cards","duration":1.8374000000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should not modify the original deck","status":"passed","title":"should not modify the original deck","duration":1.399499999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should deal cards evenly to 4 players","status":"passed","title":"should deal cards evenly to 4 players","duration":1.2212999999999852,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should distribute all cards","status":"passed","title":"should distribute all cards","duration":0.370399999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should not duplicate any cards","status":"passed","title":"should not duplicate any cards","duration":0.39229999999997744,"failureMessages":[],"meta":{}}],"startTime":1763567889052,"endTime":1763567889064.3923,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/deck.test.ts"},{"assertionResults":[{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 5 points for red 0","status":"passed","title":"should return 5 points for red 0","duration":2.6269000000000347,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return -3 points for brown 0","status":"passed","title":"should return -3 points for brown 0","duration":0.3129999999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 0 points for normal cards","status":"passed","title":"should return 0 points for normal cards","duration":0.38740000000001373,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should calculate total points including special cards","status":"passed","title":"should calculate total points including special cards","duration":0.33550000000002456,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should return 0 for trick with no special cards","status":"passed","title":"should return 0 for trick with no special cards","duration":0.341199999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should throw error for empty trick","status":"passed","title":"should throw error for empty trick","duration":1.4273999999999774,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner based on highest led suit card when no trump","status":"passed","title":"should determine winner based on highest led suit card when no trump","duration":0.5556000000000267,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when trump card is played","status":"passed","title":"should determine winner when trump card is played","duration":0.5043000000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when multiple trump cards are played","status":"passed","title":"should determine winner when multiple trump cards are played","duration":0.5433000000000447,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick trump 0 over led suit 7","status":"passed","title":"should pick trump 0 over led suit 7","duration":0.29829999999998336,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick higher trump when multiple trumps","status":"passed","title":"should pick higher trump when multiple trumps","duration":0.2576000000000249,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should handle single card trick","status":"passed","title":"should handle single card trick","duration":0.21520000000003847,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should keep first card when all equal values","status":"passed","title":"should keep first card when all equal values","duration":0.26219999999995025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate positive score when bet is met","status":"passed","title":"should calculate positive score when bet is met","duration":0.2559999999999718,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate negative score when bet is not met","status":"passed","title":"should calculate negative score when bet is not met","duration":0.34099999999995134,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should double score when without trump","status":"passed","title":"should double score when without trump","duration":0.2659999999999627,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return true when bet1 has higher amount","status":"passed","title":"should return true when bet1 has higher amount","duration":0.27080000000000837,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when bet1 has lower amount","status":"passed","title":"should return false when bet1 has lower amount","duration":0.15879999999998518,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.14220000000000255,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when both bets are identical","status":"passed","title":"should return false when both bets are identical","duration":0.16840000000001965,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when withoutTrump is reversed but amounts equal","status":"passed","title":"should return false when withoutTrump is reversed but amounts equal","duration":0.13079999999996517,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return the highest bet by amount","status":"passed","title":"should return the highest bet by amount","duration":0.22629999999998063,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.13659999999998718,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null for empty bets","status":"passed","title":"should return null for empty bets","duration":0.14760000000001128,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should filter out skipped bets","status":"passed","title":"should filter out skipped bets","duration":0.14960000000002083,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null when all bets are skipped","status":"passed","title":"should return null when all bets are skipped","duration":0.11079999999998336,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should give dealer priority when bets are exactly equal","status":"passed","title":"should give dealer priority when bets are exactly equal","duration":0.1338999999999828,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should not give dealer priority when without trump differs","status":"passed","title":"should not give dealer priority when without trump differs","duration":0.12040000000001783,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should handle multiple equal bets with dealer in middle","status":"passed","title":"should handle multiple equal bets with dealer in middle","duration":0.10539999999997463,"failureMessages":[],"meta":{}}],"startTime":1763567889424,"endTime":1763567889436.1497,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/logic.test.ts"},{"assertionResults":[{"ancestorTitles":["Round Statistics","initializeRoundStats"],"fullName":"Round Statistics initializeRoundStats should initialize empty stats for all players","status":"passed","title":"should initialize empty stats for all players","duration":2.1859999999999786,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return undefined if stats is undefined","status":"passed","title":"should return undefined if stats is undefined","duration":0.6542999999999779,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track red zero collection","status":"passed","title":"should track red zero collection","duration":0.7766000000000304,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track brown zero collection","status":"passed","title":"should track brown zero collection","duration":0.4186000000000263,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track both red and brown zeros in same trick","status":"passed","title":"should track both red and brown zeros in same trick","duration":0.4703000000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should accumulate stats across multiple tricks","status":"passed","title":"should accumulate stats across multiple tricks","duration":0.6674999999999613,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should not modify stats if no special cards in trick","status":"passed","title":"should not modify stats if no special cards in trick","duration":0.3254000000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return the stats object for chaining","status":"passed","title":"should return the stats object for chaining","duration":0.29820000000000846,"failureMessages":[],"meta":{}}],"startTime":1763567889519,"endTime":1763567889525.3254,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/roundStatistics.test.ts"},{"assertionResults":[{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should add card to trick and remove from hand","status":"passed","title":"should add card to trick and remove from hand","duration":3.09050000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should set trump on first card","status":"passed","title":"should set trump on first card","duration":0.5722999999999843,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should not set trump on subsequent cards","status":"passed","title":"should not set trump on subsequent cards","duration":0.29869999999999663,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should advance to next player","status":"passed","title":"should advance to next player","duration":0.3897000000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should wrap around after player 4","status":"passed","title":"should wrap around after player 4","duration":0.21760000000000446,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should mark trick as complete after 4 cards","status":"passed","title":"should mark trick as complete after 4 cards","duration":0.29059999999998354,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should add bet to currentBets","status":"passed","title":"should add bet to currentBets","duration":0.43259999999997945,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should handle skipped bet","status":"passed","title":"should handle skipped bet","duration":0.3322000000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should advance to next player","status":"passed","title":"should advance to next player","duration":0.39990000000000236,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should mark betting as complete after 4 bets","status":"passed","title":"should mark betting as complete after 4 bets","duration":0.24680000000000746,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should detect all players skipped","status":"passed","title":"should detect all players skipped","duration":0.2048000000000343,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should clear currentBets","status":"passed","title":"should clear currentBets","duration":0.19130000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.1291999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should wrap around when dealer is last player","status":"passed","title":"should wrap around when dealer is last player","duration":0.10310000000004038,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should set player teamId","status":"passed","title":"should set player teamId","duration":0.19310000000001537,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.1290000000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap player positions in array","status":"passed","title":"should swap player positions in array","duration":1.8712000000000444,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap all player data fields","status":"passed","title":"should swap all player data fields","duration":1.5896000000000186,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve bot status and difficulty when swapping","status":"passed","title":"should preserve bot status and difficulty when swapping","duration":2.4534999999999627,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve connection status fields when swapping","status":"passed","title":"should preserve connection status fields when swapping","duration":0.8695999999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentTrick references after swap","status":"passed","title":"should update currentTrick references after swap","duration":0.6172000000000253,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentBets references after swap","status":"passed","title":"should update currentBets references after swap","duration":0.6959000000000515,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update highestBet reference after swap","status":"passed","title":"should update highestBet reference after swap","duration":0.3567000000000462,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should recalculate team IDs based on position after swap","status":"passed","title":"should recalculate team IDs based on position after swap","duration":0.4560000000000173,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":1.509300000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should deal 8 cards to each player","status":"passed","title":"should deal 8 cards to each player","duration":0.393100000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should reset round state","status":"passed","title":"should reset round state","duration":0.5441000000000713,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should rotate dealer","status":"passed","title":"should rotate dealer","duration":0.2239000000000715,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.19679999999993925,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should clear currentTrick","status":"passed","title":"should clear currentTrick","duration":0.25339999999994234,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.15010000000006585,"failureMessages":[],"meta":{}},{"ancestorTitles":["addTeamPoints"],"fullName":"addTeamPoints should be a placeholder function (points tracked per player)","status":"passed","title":"should be a placeholder function (points tracked per player)","duration":0.13620000000003074,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should add round scores to team totals","status":"passed","title":"should add round scores to team totals","duration":0.2397999999999456,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 1 reaches 41","status":"passed","title":"should return true when team 1 reaches 41","duration":0.18240000000002965,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 2 reaches 41","status":"passed","title":"should return true when team 2 reaches 41","duration":0.16570000000001528,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should update game phase","status":"passed","title":"should update game phase","duration":0.1532999999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should handle all phase transitions","status":"passed","title":"should handle all phase transitions","duration":0.23279999999999745,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should award tricks and points to winner","status":"passed","title":"should award tricks and points to winner","duration":0.8578999999999724,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should store trick as previousTrick","status":"passed","title":"should store trick as previousTrick","duration":0.5102000000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should add trick to currentRoundTricks","status":"passed","title":"should add trick to currentRoundTricks","duration":1.3361999999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should NOT clear currentTrick (cleared later after delay)","status":"passed","title":"should NOT clear currentTrick (cleared later after delay)","duration":0.39440000000001874,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should set winner as current player","status":"passed","title":"should set winner as current player","duration":0.32580000000007203,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should detect round over when all hands empty","status":"passed","title":"should detect round over when all hands empty","duration":0.3143999999999778,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should not transition to scoring if hands remain","status":"passed","title":"should not transition to scoring if hands remain","duration":0.40009999999995216,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team wins bet","status":"passed","title":"should calculate offensive team wins bet","duration":0.8673000000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team fails bet","status":"passed","title":"should calculate offensive team fails bet","duration":0.41059999999993124,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should apply without-trump multiplier","status":"passed","title":"should apply without-trump multiplier","duration":0.33349999999995816,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over at 41 points","status":"passed","title":"should detect game over at 41 points","duration":0.2636999999999716,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over for team 2","status":"passed","title":"should detect game over for team 2","duration":0.2823999999999387,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should update team scores","status":"passed","title":"should update team scores","duration":0.35209999999995034,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should add round to history","status":"passed","title":"should add round to history","duration":0.7743000000000393,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should transition to game_over when gameOver is true","status":"passed","title":"should transition to game_over when gameOver is true","duration":0.2219000000000051,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should not transition if game continues","status":"passed","title":"should not transition if game continues","duration":0.15949999999998,"failureMessages":[],"meta":{}}],"startTime":1763567889037,"endTime":1763567889067.222,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/state.test.ts"},{"assertionResults":[{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should return new GameState (immutability)","status":"passed","title":"should return new GameState (immutability)","duration":3.444000000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should award trick to winner with correct points","status":"passed","title":"should award trick to winner with correct points","duration":0.6591000000000236,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Red 0 special card (+5 points)","status":"passed","title":"should handle Red 0 special card (+5 points)","duration":0.4123000000000161,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Brown 0 special card (-3 points)","status":"passed","title":"should handle Brown 0 special card (-3 points)","duration":0.3771000000000413,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should clear current trick after resolution","status":"passed","title":"should clear current trick after resolution","duration":0.2458000000000311,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set previousTrick with winner info","status":"passed","title":"should set previousTrick with winner info","duration":0.4504000000000019,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.2851999999999748,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should transition to scoring phase when round is over","status":"passed","title":"should transition to scoring phase when round is over","duration":0.2545000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should stay in playing phase when cards remain","status":"passed","title":"should stay in playing phase when cards remain","duration":0.5713999999999828,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should throw error if trick is incomplete","status":"passed","title":"should throw error if trick is incomplete","duration":1.2855000000000132,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - immutability guarantees"],"fullName":"stateTransitions - immutability guarantees should never mutate original game state","status":"passed","title":"should never mutate original game state","duration":0.39179999999998927,"failureMessages":[],"meta":{}}],"startTime":1763567889456,"endTime":1763567889465.3918,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/stateTransitions.test.ts"},{"assertionResults":[{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not in playing phase","status":"passed","title":"should reject play when not in playing phase","duration":2.362600000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when player already played in trick","status":"passed","title":"should reject play when player already played in trick","duration":0.46879999999998745,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when trick is complete (4 cards)","status":"passed","title":"should reject play when trick is complete (4 cards)","duration":0.32330000000001746,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not player's turn","status":"passed","title":"should reject play when not player's turn","duration":0.2398000000000593,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject invalid card data","status":"passed","title":"should reject invalid card data","duration":0.43689999999992324,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject card not in player's hand","status":"passed","title":"should reject card not in player's hand","duration":0.40399999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should enforce suit-following rule","status":"passed","title":"should enforce suit-following rule","duration":0.3972999999999729,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow playing off-suit when no led suit in hand","status":"passed","title":"should allow playing off-suit when no led suit in hand","duration":0.31380000000001473,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow valid card play","status":"passed","title":"should allow valid card play","duration":0.5119999999999436,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not in betting phase","status":"passed","title":"should reject bet when not in betting phase","duration":0.40790000000004056,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not player's turn","status":"passed","title":"should reject bet when not player's turn","duration":0.23349999999993543,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject duplicate bet","status":"passed","title":"should reject duplicate bet","duration":0.2440000000000282,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount < 7","status":"passed","title":"should reject bet amount < 7","duration":0.18679999999994834,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount > 12","status":"passed","title":"should reject bet amount > 12","duration":0.22249999999996817,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject dealer skip when no valid bets","status":"passed","title":"should reject dealer skip when no valid bets","duration":0.24270000000001346,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow dealer to skip when there are valid bets","status":"passed","title":"should allow dealer to skip when there are valid bets","duration":0.18070000000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow valid bet","status":"passed","title":"should allow valid bet","duration":0.1711999999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.2880000000000109,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.22419999999999618,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player already on team","status":"passed","title":"should reject when player already on team","duration":0.23540000000002692,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when team is full","status":"passed","title":"should reject when team is full","duration":0.20650000000000546,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should allow valid team selection","status":"passed","title":"should allow valid team selection","duration":0.165300000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with human during active gameplay","status":"passed","title":"should allow swapping with human during active gameplay","duration":0.27089999999998327,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with bot during active gameplay","status":"passed","title":"should allow swapping with bot during active gameplay","duration":0.1675000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap with bot during active gameplay","status":"passed","title":"should allow cross-team swap with bot during active gameplay","duration":0.19510000000002492,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping during game_over phase","status":"passed","title":"should reject swapping during game_over phase","duration":0.2240999999999076,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.20139999999992142,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping with self","status":"passed","title":"should reject swapping with self","duration":0.1894999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow valid position swap between teammates","status":"passed","title":"should allow valid position swap between teammates","duration":0.17680000000007112,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap during team_selection","status":"passed","title":"should allow cross-team swap during team_selection","duration":0.28110000000003765,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.27940000000000964,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not exactly 4 players","status":"passed","title":"should reject when not exactly 4 players","duration":0.19399999999995998,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when teams are not balanced","status":"passed","title":"should reject when teams are not balanced","duration":0.22680000000002565,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should allow starting with valid setup","status":"passed","title":"should allow starting with valid setup","duration":0.17579999999998108,"failureMessages":[],"meta":{}}],"startTime":1763567889134,"endTime":1763567889146.2268,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/validation.test.ts"},{"assertionResults":[{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate and return CSRF token","status":"passed","title":"should generate and return CSRF token","duration":39.23179999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set CSRF token in cookie","status":"passed","title":"should set CSRF token in cookie","duration":7.802900000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set httpOnly cookie","status":"passed","title":"should set httpOnly cookie","duration":6.612600000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set SameSite=Strict","status":"passed","title":"should set SameSite=Strict","duration":5.762100000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate different tokens for different requests","status":"passed","title":"should generate different tokens for different requests","duration":15.212800000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should allow request with valid CSRF token","status":"passed","title":"should allow request with valid CSRF token","duration":31.16629999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request without CSRF token","status":"passed","title":"should reject request without CSRF token","duration":10.131400000000099,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with invalid CSRF token","status":"passed","title":"should reject request with invalid CSRF token","duration":10.723499999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with token but no cookie","status":"passed","title":"should reject request with token but no cookie","duration":16.544599999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with cookie but no token","status":"passed","title":"should reject request with cookie but no token","duration":10.569100000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should protect PUT requests","status":"passed","title":"should protect PUT requests","duration":13.748100000000022,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should reject PUT without token","status":"passed","title":"should reject PUT without token","duration":5.525300000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should protect DELETE requests","status":"passed","title":"should protect DELETE requests","duration":8.546699999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should reject DELETE without token","status":"passed","title":"should reject DELETE without token","duration":3.9159000000000788,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should allow GET requests without CSRF token","status":"passed","title":"should allow GET requests without CSRF token","duration":4.72930000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should not require CSRF token for GET to protected route","status":"passed","title":"should not require CSRF token for GET to protected route","duration":3.546000000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return user-friendly error message","status":"passed","title":"should return user-friendly error message","duration":3.6602000000000317,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return 403 status code for CSRF errors","status":"passed","title":"should return 403 status code for CSRF errors","duration":3.242800000000102,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should pass through non-CSRF errors","status":"passed","title":"should pass through non-CSRF errors","duration":3.016599999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should validate token matches cookie","status":"passed","title":"should validate token matches cookie","duration":7.799400000000105,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should accept token from same session","status":"passed","title":"should accept token from same session","duration":6.6457000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use different tokens for different sessions","status":"passed","title":"should use different tokens for different sessions","duration":5.584299999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should set httpOnly flag to prevent XSS","status":"passed","title":"should set httpOnly flag to prevent XSS","duration":3.9266000000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use SameSite=Strict to prevent CSRF","status":"passed","title":"should use SameSite=Strict to prevent CSRF","duration":5.084599999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use Secure flag in production","status":"passed","title":"should use Secure flag in production","duration":2.589999999999918,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle missing X-CSRF-Token header","status":"passed","title":"should handle missing X-CSRF-Token header","duration":5.134199999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle empty CSRF token","status":"passed","title":"should handle empty CSRF token","duration":4.850400000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle malformed CSRF token","status":"passed","title":"should handle malformed CSRF token","duration":4.93139999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle multiple CSRF tokens in header","status":"passed","title":"should handle multiple CSRF tokens in header","duration":4.917099999999891,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should work with authenticated requests","status":"passed","title":"should work with authenticated requests","duration":4.373499999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should require both CSRF token and auth token","status":"passed","title":"should require both CSRF token and auth token","duration":3.7407000000000608,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Configuration"],"fullName":"CSRF Configuration should warn about default secret in production","status":"passed","title":"should warn about default secret in production","duration":0.8829000000000633,"failureMessages":[],"meta":{}}],"startTime":1763567889339,"endTime":1763567889605.8828,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/middleware/csrf.test.ts"},{"assertionResults":[{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should restore game state with valid session","status":"passed","title":"should restore game state with valid session","duration":2.293100000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject invalid session token","status":"passed","title":"should reject invalid session token","duration":0.2767000000000053,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject expired session","status":"passed","title":"should reject expired session","duration":0.2452000000000112,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should emit reconnection_successful","status":"passed","title":"should emit reconnection_successful","duration":0.42950000000001864,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should notify other players of reconnection","status":"passed","title":"should notify other players of reconnection","duration":0.3857999999999606,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should mark player as disconnected","status":"passed","title":"should mark player as disconnected","duration":0.25319999999999254,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should start 15-minute reconnection timer","status":"passed","title":"should start 15-minute reconnection timer","duration":0.3805999999999585,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should emit player_disconnected event","status":"passed","title":"should emit player_disconnected event","duration":0.3996000000000208,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should remove player from game","status":"passed","title":"should remove player from game","duration":0.49970000000001846,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should delete session","status":"passed","title":"should delete session","duration":0.28099999999994907,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should emit player_left event","status":"passed","title":"should emit player_left event","duration":0.2890000000000441,"failureMessages":[],"meta":{}}],"startTime":1763567889472,"endTime":1763567889478.289,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/connection.test.ts"},{"assertionResults":[{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should accept valid bet in range 7-12","status":"passed","title":"should accept valid bet in range 7-12","duration":3.1076999999999657,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject bet out of range","status":"passed","title":"should reject bet out of range","duration":0.632000000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should enforce bet hierarchy (higher amount wins)","status":"passed","title":"should enforce bet hierarchy (higher amount wins)","duration":0.29120000000000346,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle without-trump bets correctly","status":"passed","title":"should handle without-trump bets correctly","duration":0.19429999999999836,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should allow dealer to equalize","status":"passed","title":"should allow dealer to equalize","duration":0.394299999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject dealer skip","status":"passed","title":"should reject dealer skip","duration":0.2077000000000453,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle skip bet correctly","status":"passed","title":"should handle skip bet correctly","duration":0.24439999999998463,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should accept valid card play","status":"passed","title":"should accept valid card play","duration":0.25200000000000955,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should enforce suit-following rules","status":"passed","title":"should enforce suit-following rules","duration":0.4316000000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject card not in hand","status":"passed","title":"should reject card not in hand","duration":0.2656999999999812,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject play when not player turn","status":"passed","title":"should reject play when not player turn","duration":0.1590999999999667,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should resolve trick after 4 cards","status":"passed","title":"should resolve trick after 4 cards","duration":0.19319999999999027,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should calculate points correctly (red 0, brown 0)","status":"passed","title":"should calculate points correctly (red 0, brown 0)","duration":0.26269999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should mark player ready after round","status":"passed","title":"should mark player ready after round","duration":0.186300000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should start new round when all ready","status":"passed","title":"should start new round when all ready","duration":0.17549999999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should end game at 41+ points","status":"passed","title":"should end game at 41+ points","duration":0.15389999999996462,"failureMessages":[],"meta":{}}],"startTime":1763567889052,"endTime":1763567889060.1863,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/gameplay.test.ts"},{"assertionResults":[{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should create new game with valid player name","status":"passed","title":"should create new game with valid player name","duration":3.577799999999968,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should reject invalid player names","status":"passed","title":"should reject invalid player names","duration":0.4566000000000372,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should assign player as host","status":"passed","title":"should assign player as host","duration":0.5285000000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should emit game_created event","status":"passed","title":"should emit game_created event","duration":2.192800000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should add player to existing game","status":"passed","title":"should add player to existing game","duration":0.331799999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game full","status":"passed","title":"should reject if game full","duration":0.16540000000003374,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game already started","status":"passed","title":"should reject if game already started","duration":0.2225999999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should assign player to team","status":"passed","title":"should assign player to team","duration":0.21039999999999281,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should allow team selection before game starts","status":"passed","title":"should allow team selection before game starts","duration":0.24950000000001182,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should reject team selection during game","status":"passed","title":"should reject team selection during game","duration":0.134900000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should balance teams (2v2)","status":"passed","title":"should balance teams (2v2)","duration":0.16550000000000864,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should swap positions within team","status":"passed","title":"should swap positions within team","duration":0.15080000000000382,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should detect cross-team scenarios","status":"passed","title":"should detect cross-team scenarios","duration":0.0906999999999698,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should update player order","status":"passed","title":"should update player order","duration":0.31389999999998963,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should allow host to kick players","status":"passed","title":"should allow host to kick players","duration":0.22829999999999018,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should reject non-host kick attempts","status":"passed","title":"should reject non-host kick attempts","duration":0.0918999999999528,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should update game state after kick","status":"passed","title":"should update game state after kick","duration":0.13349999999996953,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should start game with 4 players","status":"passed","title":"should start game with 4 players","duration":0.1069999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should reject if teams unbalanced","status":"passed","title":"should reject if teams unbalanced","duration":0.1268999999999778,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should deal cards and set dealer","status":"passed","title":"should deal cards and set dealer","duration":0.18200000000001637,"failureMessages":[],"meta":{}}],"startTime":1763567889014,"endTime":1763567889024.2283,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/lobby.test.ts"},{"assertionResults":[{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should hash password with bcrypt","status":"passed","title":"should hash password with bcrypt","duration":74.50249999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should generate different hash for same password","status":"passed","title":"should generate different hash for same password","duration":118.69789999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return true for correct password","status":"passed","title":"should return true for correct password","duration":118.01150000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return false for incorrect password","status":"passed","title":"should return false for incorrect password","duration":110.68960000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should generate access and refresh tokens","status":"passed","title":"should generate access and refresh tokens","duration":3.7710000000001855,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should create valid JWT tokens","status":"passed","title":"should create valid JWT tokens","duration":1.8858999999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should include user data in payload","status":"passed","title":"should include user data in payload","duration":2.4023999999999432,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should verify valid access token","status":"passed","title":"should verify valid access token","duration":2.0647999999998774,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject refresh token as access token","status":"passed","title":"should reject refresh token as access token","duration":3.0170000000000528,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.3045999999999367,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject malformed token","status":"passed","title":"should reject malformed token","duration":0.17300000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should verify valid refresh token","status":"passed","title":"should verify valid refresh token","duration":2.494000000000142,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject access token as refresh token","status":"passed","title":"should reject access token as refresh token","duration":1.973799999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.15640000000007603,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate random token","status":"passed","title":"should generate random token","duration":0.25720000000001164,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate unique tokens","status":"passed","title":"should generate unique tokens","duration":0.27510000000006585,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate hex string","status":"passed","title":"should generate hex string","duration":0.17990000000008877,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should accept valid passwords","status":"passed","title":"should accept valid passwords","duration":0.4257999999999811,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password too short","status":"passed","title":"should reject password too short","duration":0.25549999999998363,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without uppercase","status":"passed","title":"should reject password without uppercase","duration":0.134900000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without lowercase","status":"passed","title":"should reject password without lowercase","duration":0.13069999999993342,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without number","status":"passed","title":"should reject password without number","duration":0.13439999999991414,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should accept valid emails","status":"passed","title":"should accept valid emails","duration":0.2876000000001113,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should reject invalid email formats","status":"passed","title":"should reject invalid email formats","duration":0.3059000000000651,"failureMessages":[],"meta":{}}],"startTime":1763567889154,"endTime":1763567889598.306,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/authHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 1 for empty game","status":"passed","title":"should return Bot 1 for empty game","duration":2.453800000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 2 when Bot 1 exists","status":"passed","title":"should return Bot 2 when Bot 1 exists","duration":0.5506999999999493,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should fill gaps in bot numbering","status":"passed","title":"should fill gaps in bot numbering","duration":0.2663000000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 3 when Bot 1 and 2 exist","status":"passed","title":"should return Bot 3 when Bot 1 and 2 exist","duration":0.3739999999999668,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should ignore non-bot players","status":"passed","title":"should ignore non-bot players","duration":0.27049999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots when less than 3 exist","status":"passed","title":"should allow adding bots when less than 3 exist","duration":0.3083000000000311,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should reject adding bots when 3 already exist","status":"passed","title":"should reject adding bots when 3 already exist","duration":0.24150000000003047,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots to empty game","status":"passed","title":"should allow adding bots to empty game","duration":0.23680000000001655,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return true for teammates","status":"passed","title":"should return true for teammates","duration":0.44420000000002346,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false for non-teammates","status":"passed","title":"should return false for non-teammates","duration":0.2518999999999778,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when player not found","status":"passed","title":"should return false when player not found","duration":0.15870000000001028,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when both players not found","status":"passed","title":"should return false when both players not found","duration":0.1198999999999728,"failureMessages":[],"meta":{}}],"startTime":1763567889520,"endTime":1763567889526.252,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/botHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by socket ID","status":"passed","title":"should find player by socket ID","duration":1.8986999999999625,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by name when socket ID not found","status":"passed","title":"should find player by name when socket ID not found","duration":0.39159999999998263,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should return undefined if player not found","status":"passed","title":"should return undefined if player not found","duration":0.3077000000000112,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should handle empty player array","status":"passed","title":"should handle empty player array","duration":0.19249999999999545,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by socket ID","status":"passed","title":"should find player index by socket ID","duration":0.35729999999995243,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by name when socket ID not found","status":"passed","title":"should find player index by name when socket ID not found","duration":0.22129999999998518,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should return -1 if player not found","status":"passed","title":"should return -1 if player not found","duration":0.4981999999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return true when human players exist","status":"passed","title":"should return true when human players exist","duration":0.28180000000003247,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when only bots exist","status":"passed","title":"should return false when only bots exist","duration":0.477299999999957,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when no players exist","status":"passed","title":"should return false when no players exist","duration":0.23419999999998709,"failureMessages":[],"meta":{}}],"startTime":1763567889497,"endTime":1763567889502.4773,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/playerHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should accept valid player names","status":"passed","title":"should accept valid player names","duration":1.7694000000001324,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject empty names","status":"passed","title":"should reject empty names","duration":0.7744000000000142,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":8.901600000000144,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should enforce max length of 20 characters","status":"passed","title":"should enforce max length of 20 characters","duration":0.5830000000000837,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject invalid characters","status":"passed","title":"should reject invalid characters","duration":0.19479999999998654,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should accept valid messages","status":"passed","title":"should accept valid messages","duration":0.32770000000004984,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should reject empty messages","status":"passed","title":"should reject empty messages","duration":0.20119999999997162,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":1.564200000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should enforce max length of 200 characters","status":"passed","title":"should enforce max length of 200 characters","duration":0.3164000000001579,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should accept valid bet amounts (7-12)","status":"passed","title":"should accept valid bet amounts (7-12)","duration":0.23319999999989705,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject amounts outside range","status":"passed","title":"should reject amounts outside range","duration":0.2240999999999076,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.25099999999997635,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should accept valid card values (0-7)","status":"passed","title":"should accept valid card values (0-7)","duration":0.13229999999998654,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject values outside range","status":"passed","title":"should reject values outside range","duration":0.28920000000016444,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.12979999999993197,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should accept valid colors","status":"passed","title":"should accept valid colors","duration":0.1391000000000986,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should reject invalid colors","status":"passed","title":"should reject invalid colors","duration":0.2051000000001295,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should accept valid game IDs","status":"passed","title":"should accept valid game IDs","duration":0.2897000000000389,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should reject invalid formats","status":"passed","title":"should reject invalid formats","duration":0.19850000000019463,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should sanitize text and enforce max length","status":"passed","title":"should sanitize text and enforce max length","duration":1.2523999999998523,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should handle empty input","status":"passed","title":"should handle empty input","duration":0.07910000000015316,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should accept boolean values","status":"passed","title":"should accept boolean values","duration":0.12630000000012842,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert truthy values","status":"passed","title":"should convert truthy values","duration":0.09839999999985594,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert falsy values","status":"passed","title":"should convert falsy values","duration":0.09789999999998145,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should reject invalid values","status":"passed","title":"should reject invalid values","duration":0.12310000000002219,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should accept valid team IDs","status":"passed","title":"should accept valid team IDs","duration":0.14420000000018263,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should reject invalid team IDs","status":"passed","title":"should reject invalid team IDs","duration":0.1856999999999971,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should accept valid player indices","status":"passed","title":"should accept valid player indices","duration":0.14520000000015898,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should reject invalid indices","status":"passed","title":"should reject invalid indices","duration":0.18719999999984793,"failureMessages":[],"meta":{}}],"startTime":1763567890121,"endTime":1763567890140.1873,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sanitization.test.ts"},{"assertionResults":[{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate unique session token","status":"passed","title":"should generate unique session token","duration":3.5844000000000165,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate 64 character hex string","status":"passed","title":"should generate 64 character hex string","duration":1.4249000000000365,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should create and store session","status":"passed","title":"should create and store session","duration":0.5966999999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should store session in map","status":"passed","title":"should store session in map","duration":0.45240000000001146,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should return session object with correct properties","status":"passed","title":"should return session object with correct properties","duration":0.6754000000000246,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should generate unique tokens for multiple sessions","status":"passed","title":"should generate unique tokens for multiple sessions","duration":0.5211999999999648,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return session for valid token","status":"passed","title":"should return session for valid token","duration":0.35650000000003956,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for non-existent token","status":"passed","title":"should return null for non-existent token","duration":0.1846999999999639,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for expired session","status":"passed","title":"should return null for expired session","duration":0.3224999999999909,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should delete expired session from map","status":"passed","title":"should delete expired session from map","duration":0.2766000000000304,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should accept session just before expiry","status":"passed","title":"should accept session just before expiry","duration":0.24040000000002237,"failureMessages":[],"meta":{}}],"startTime":1763567889053,"endTime":1763567889062.3225,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sessionManager.test.ts"}]}
