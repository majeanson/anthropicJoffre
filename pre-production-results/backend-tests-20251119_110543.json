
> trick-card-game-backend@2.3.0 test
> vitest --reporter=json

{"numTotalTestSuites":174,"numPassedTestSuites":174,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":456,"numPassedTests":451,"numFailedTests":0,"numPendingTests":5,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763568344679,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should refresh token with valid refresh token cookie","status":"passed","title":"should refresh token with valid refresh token cookie","duration":27.47440000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should set secure cookie in production","status":"passed","title":"should set secure cookie in production","duration":4.226599999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should detect and reject suspicious token usage","status":"passed","title":"should detect and reject suspicious token usage","duration":3.8760999999999513,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should revoke all user tokens on theft detection","status":"passed","title":"should revoke all user tokens on theft detection","duration":3.814300000000003,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject request without refresh token cookie","status":"passed","title":"should reject request without refresh token cookie","duration":3.5173999999999523,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject expired refresh token","status":"passed","title":"should reject expired refresh token","duration":2.797800000000052,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for banned user","status":"passed","title":"should reject token for banned user","duration":2.6853000000000975,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for deleted user","status":"passed","title":"should reject token for deleted user","duration":2.43529999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Rate Limiting"],"fullName":"POST /api/auth/refresh Rate Limiting should apply rate limiting to refresh endpoint","status":"passed","title":"should apply rate limiting to refresh endpoint","duration":4.671199999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should invalidate old token when rotating","status":"passed","title":"should invalidate old token when rotating","duration":4.378100000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should track IP and user agent in rotation","status":"passed","title":"should track IP and user agent in rotation","duration":2.9586000000001604,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":4.999699999999848,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle rotation failures gracefully","status":"passed","title":"should handle rotation failures gracefully","duration":2.8579999999999472,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should revoke refresh token on logout","status":"passed","title":"should revoke refresh token on logout","duration":2.775100000000066,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even without refresh token","status":"passed","title":"should succeed even without refresh token","duration":2.2274999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even if revocation fails","status":"passed","title":"should succeed even if revocation fails","duration":2.3695999999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should revoke all user tokens","status":"passed","title":"should revoke all user tokens","duration":2.2851000000000568,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should require valid access token","status":"passed","title":"should require valid access token","duration":2.0290999999999713,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should reject invalid access token","status":"passed","title":"should reject invalid access token","duration":2.027699999999868,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should clear refresh token cookie","status":"passed","title":"should clear refresh token cookie","duration":1.9674999999999727,"failureMessages":[],"meta":{}}],"startTime":1763568345807,"endTime":1763568345894.9675,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/auth.refresh.test.ts"},{"assertionResults":[{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow viewing own profile with friends_only visibility","status":"passed","title":"should allow viewing own profile with friends_only visibility","duration":1.7413000000000238,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block anonymous users from friends_only profiles","status":"passed","title":"should block anonymous users from friends_only profiles","duration":0.23840000000001282,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block non-friends from friends_only profiles","status":"passed","title":"should block non-friends from friends_only profiles","duration":0.2097999999999729,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow friends to view friends_only profiles","status":"passed","title":"should allow friends to view friends_only profiles","duration":0.2715999999999781,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Public visibility"],"fullName":"Profile Visibility Logic Public visibility should allow anyone to view public profiles","status":"passed","title":"should allow anyone to view public profiles","duration":0.24680000000000746,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Private visibility"],"fullName":"Profile Visibility Logic Private visibility should block everyone from private profiles","status":"passed","title":"should block everyone from private profiles","duration":0.17279999999999518,"failureMessages":[],"meta":{}}],"startTime":1763568345669,"endTime":1763568345672.2468,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/profiles.test.ts"},{"assertionResults":[{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should save new game with correct status","status":"passed","title":"should save new game with correct status","duration":4.13390000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to team_selection for 4 players in team_selection phase","status":"passed","title":"should set status to team_selection for 4 players in team_selection phase","duration":0.3952999999999065,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to in_progress for gameplay phases","status":"passed","title":"should set status to in_progress for gameplay phases","duration":0.2580000000000382,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to finished for game_over phase","status":"passed","title":"should set status to finished for game_over phase","duration":0.21920000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should convert Maps to objects for serialization","status":"passed","title":"should convert Maps to objects for serialization","duration":0.32600000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should load existing game","status":"passed","title":"should load existing game","duration":1.1586999999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should return null for non-existent game","status":"passed","title":"should return null for non-existent game","duration":0.15560000000004948,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should restore Map objects from plain objects","status":"passed","title":"should restore Map objects from plain objects","duration":0.42029999999999745,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should deep clone to prevent mutations","status":"passed","title":"should deep clone to prevent mutations","duration":0.6065000000000964,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","deleteGameState"],"fullName":"gameState persistence deleteGameState should delete existing game","status":"passed","title":"should delete existing game","duration":0.4048000000000229,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should list all games by default","status":"passed","title":"should list all games by default","duration":0.7638000000001739,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by status","status":"passed","title":"should filter by status","duration":0.23669999999992797,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by isPublic","status":"passed","title":"should filter by isPublic","duration":0.1492000000000644,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should apply limit","status":"passed","title":"should apply limit","duration":0.151299999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should include team assignments in result","status":"passed","title":"should include team assignments in result","duration":0.1756000000000313,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return games containing player","status":"passed","title":"should return games containing player","duration":0.5788000000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return empty array if player has no games","status":"passed","title":"should return empty array if player has no games","duration":0.21010000000001128,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return true for existing game","status":"passed","title":"should return true for existing game","duration":0.24099999999998545,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return false for non-existent game","status":"passed","title":"should return false for non-existent game","duration":0.10310000000004038,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should call cleanup function and return count","status":"passed","title":"should call cleanup function and return count","duration":0.18309999999996762,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should return 0 if no games cleaned up","status":"passed","title":"should return 0 if no games cleaned up","duration":0.0990999999999076,"failureMessages":[],"meta":{}}],"startTime":1763568346368,"endTime":1763568346379.241,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/gameState.test.ts"},{"assertionResults":[{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first game stat update","status":"passed","title":"should initialize player_stats record on first game stat update","duration":476.7967000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first round stat update","status":"passed","title":"should initialize player_stats record on first round stat update","duration":134.6639,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game win correctly","status":"passed","title":"should record game win correctly","duration":130.48270000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game loss correctly","status":"passed","title":"should record game loss correctly","duration":113.70169999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive wins (win streak)","status":"passed","title":"should track consecutive wins (win streak)","duration":385.8119999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive losses (loss streak)","status":"passed","title":"should track consecutive losses (loss streak)","duration":289.6099999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track fastest win","status":"passed","title":"should track fastest win","duration":385.5664999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track longest game","status":"passed","title":"should track longest game","duration":451.46540000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should calculate average game duration","status":"passed","title":"should calculate average game duration","duration":290.12919999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should update highest and lowest ELO ratings","status":"passed","title":"should update highest and lowest ELO ratings","duration":286.23939999999993,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record successful bet","status":"passed","title":"should record successful bet","duration":92.85339999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record failed bet","status":"passed","title":"should record failed bet","duration":89.08379999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track without trump bets","status":"passed","title":"should track without trump bets","duration":90.93330000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track trump cards played","status":"passed","title":"should track trump cards played","duration":181.14829999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track red zeros collected","status":"passed","title":"should track red zeros collected","duration":90.11010000000078,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track brown zeros received","status":"passed","title":"should track brown zeros received","duration":88.94749999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should calculate average tricks per round","status":"passed","title":"should calculate average tricks per round","duration":176.15529999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should update highest bet","status":"passed","title":"should update highest bet","duration":263.2310000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should create game history record","status":"skipped","title":"should create game history record","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should mark game as finished","status":"skipped","title":"should mark game as finished","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve leaderboard with top players","status":"skipped","title":"should retrieve leaderboard with top players","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve player history","status":"skipped","title":"should retrieve player history","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Integration: Complete Game Flow"],"fullName":"Database Stats Functions Integration: Complete Game Flow should record all stats for a complete game","status":"skipped","title":"should record all stats for a complete game","failureMessages":[],"meta":{}}],"startTime":1763568345516,"endTime":1763568349534.231,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/index.test.ts"},{"assertionResults":[{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should skip save for casual mode","status":"passed","title":"should skip save for casual mode","duration":5.524199999999951,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should save for elo mode","status":"passed","title":"should save for elo mode","duration":2.6119999999999663,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.084600000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.907799999999952,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should save for elo mode","status":"passed","title":"should save for elo mode","duration":0.5123000000000957,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.7941000000000713,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should mark for elo mode","status":"passed","title":"should mark for elo mode","duration":0.4580999999999449,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.7554000000000087,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.5629000000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.6467999999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.3310999999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for bots","status":"passed","title":"should skip for bots","duration":0.5819000000000187,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.461400000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should create for elo mode + human players","status":"passed","title":"should create for elo mode + human players","duration":0.47109999999997854,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should handle database errors and return null","status":"passed","title":"should handle database errors and return null","duration":0.7785999999999831,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.5978000000000065,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should delete for elo mode","status":"passed","title":"should delete for elo mode","duration":0.2074999999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":2.200399999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.241800000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.48880000000008295,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for casual mode","status":"passed","title":"should return 0 for casual mode","duration":0.5479000000000269,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for bots","status":"passed","title":"should return 0 for bots","duration":0.42470000000002983,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should calculate real ELO changes for elo mode","status":"passed","title":"should calculate real ELO changes for elo mode","duration":0.5435999999999694,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should use default ELO 1200 for new players","status":"passed","title":"should use default ELO 1200 for new players","duration":0.397199999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.815599999999904,"failureMessages":[],"meta":{}}],"startTime":1763568345322,"endTime":1763568345347.8157,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/persistenceManager.test.ts"},{"assertionResults":[{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create a new refresh token successfully","status":"passed","title":"should create a new refresh token successfully","duration":8.639899999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create token with default expiry of 30 days","status":"passed","title":"should create token with default expiry of 30 days","duration":0.8199000000000183,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":9.64209999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should return null when pool is not available","status":"passed","title":"should return null when pool is not available","duration":0.4250999999999294,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should verify valid token successfully","status":"passed","title":"should verify valid token successfully","duration":1.4160999999999149,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for expired token","status":"passed","title":"should return null for expired token","duration":0.5336999999999534,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for revoked token","status":"passed","title":"should return null for revoked token","duration":0.43619999999998527,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":4.842599999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rotate token successfully","status":"passed","title":"should rotate token successfully","duration":2.3934999999999036,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rollback on error","status":"passed","title":"should rollback on error","duration":1.9446000000000367,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should return null for invalid old token","status":"passed","title":"should return null for invalid old token","duration":0.6643000000000256,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should revoke token successfully","status":"passed","title":"should revoke token successfully","duration":0.8867000000000189,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should return false for already revoked token","status":"passed","title":"should return false for already revoked token","duration":0.27890000000002146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.5701999999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should revoke all tokens for user","status":"passed","title":"should revoke all tokens for user","duration":0.8129999999999882,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should return 0 when user has no tokens","status":"passed","title":"should return 0 when user has no tokens","duration":0.32910000000003947,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.2355999999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should detect revoked token reuse","status":"passed","title":"should detect revoked token reuse","duration":0.852800000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for valid token","status":"passed","title":"should return false for valid token","duration":0.43679999999994834,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for non-existent token","status":"passed","title":"should return false for non-existent token","duration":0.43230000000005475,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should hash token consistently","status":"passed","title":"should hash token consistently","duration":0.9820999999999458,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should produce different hashes for different tokens","status":"passed","title":"should produce different hashes for different tokens","duration":0.5288000000000466,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should delete expired tokens","status":"passed","title":"should delete expired tokens","duration":1.1965999999999894,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should return 0 when no expired tokens","status":"passed","title":"should return 0 when no expired tokens","duration":0.5341999999999416,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return active tokens for user","status":"passed","title":"should return active tokens for user","duration":0.7567999999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return empty array when user has no active tokens","status":"passed","title":"should return empty array when user has no active tokens","duration":0.6057000000000698,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should generate cryptographically secure tokens","status":"passed","title":"should generate cryptographically secure tokens","duration":0.7232999999999947,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should hash tokens before database storage","status":"passed","title":"should hash tokens before database storage","duration":0.7330000000000609,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null IP address","status":"passed","title":"should handle null IP address","duration":0.39599999999995816,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null user agent","status":"passed","title":"should handle null user agent","duration":0.46099999999989905,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle concurrent token rotations gracefully","status":"passed","title":"should handle concurrent token rotations gracefully","duration":6.276200000000017,"failureMessages":[],"meta":{}}],"startTime":1763568345233,"endTime":1763568345287.2761,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/refreshTokens.test.ts"},{"assertionResults":[{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should create user with hashed password","status":"passed","title":"should create user with hashed password","duration":426.1870000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate email","status":"passed","title":"should reject duplicate email","duration":301.3598999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate username","status":"passed","title":"should reject duplicate username","duration":283.35660000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should auto-verify user when email service is not configured","status":"passed","title":"should auto-verify user when email service is not configured","duration":197.12339999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by email","status":"passed","title":"should return user by email","duration":22.373199999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return null for non-existent email","status":"passed","title":"should return null for non-existent email","duration":21.43219999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by username","status":"passed","title":"should return user by username","duration":21.22440000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by ID without password hash","status":"passed","title":"should return user by ID without password hash","duration":21.86279999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should mark email as verified with valid token","status":"passed","title":"should mark email as verified with valid token","duration":300.0671000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject invalid token","status":"passed","title":"should reject invalid token","duration":61.645400000000336,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject already verified token","status":"passed","title":"should reject already verified token","duration":441.3649999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject expired token","status":"passed","title":"should reject expired token","duration":258.2763,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should create password reset token","status":"passed","title":"should create password reset token","duration":249.2864999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should update password with valid reset token","status":"passed","title":"should update password with valid reset token","duration":412.3819999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject invalid reset token","status":"passed","title":"should reject invalid reset token","duration":60.6877999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject already used reset token","status":"passed","title":"should reject already used reset token","duration":433.42279999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update display name","status":"passed","title":"should update display name","duration":196.61419999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update avatar URL","status":"passed","title":"should update avatar URL","duration":194.96870000000035,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if username exists","status":"passed","title":"should correctly check if username exists","duration":213.96579999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if email exists","status":"passed","title":"should correctly check if email exists","duration":222.17689999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","linkPlayerToUser"],"fullName":"User Database Operations linkPlayerToUser should link player_stats to user account","status":"passed","title":"should link player_stats to user account","duration":238.91880000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateLastLogin"],"fullName":"User Database Operations updateLastLogin should update last_login_at timestamp","status":"passed","title":"should update last_login_at timestamp","duration":347.39969999999994,"failureMessages":[],"meta":{}}],"startTime":1763568345747,"endTime":1763568350849.3997,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/users.test.ts"},{"assertionResults":[{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should create a deck with 32 cards","status":"passed","title":"should create a deck with 32 cards","duration":3.2660999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have 8 cards of each color","status":"passed","title":"should have 8 cards of each color","duration":1.3673000000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have values from 0 to 7","status":"passed","title":"should have values from 0 to 7","duration":1.5655999999999608,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should return a deck with the same cards","status":"passed","title":"should return a deck with the same cards","duration":1.7764999999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should not modify the original deck","status":"passed","title":"should not modify the original deck","duration":1.3573000000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should deal cards evenly to 4 players","status":"passed","title":"should deal cards evenly to 4 players","duration":1.139099999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should distribute all cards","status":"passed","title":"should distribute all cards","duration":0.3129000000000133,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should not duplicate any cards","status":"passed","title":"should not duplicate any cards","duration":0.3795000000000073,"failureMessages":[],"meta":{}}],"startTime":1763568345232,"endTime":1763568345243.3794,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/deck.test.ts"},{"assertionResults":[{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 5 points for red 0","status":"passed","title":"should return 5 points for red 0","duration":1.6680999999999813,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return -3 points for brown 0","status":"passed","title":"should return -3 points for brown 0","duration":0.22109999999997854,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 0 points for normal cards","status":"passed","title":"should return 0 points for normal cards","duration":0.3295999999999708,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should calculate total points including special cards","status":"passed","title":"should calculate total points including special cards","duration":0.26609999999999445,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should return 0 for trick with no special cards","status":"passed","title":"should return 0 for trick with no special cards","duration":0.2720000000000482,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should throw error for empty trick","status":"passed","title":"should throw error for empty trick","duration":1.1428999999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner based on highest led suit card when no trump","status":"passed","title":"should determine winner based on highest led suit card when no trump","duration":0.3170999999999822,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when trump card is played","status":"passed","title":"should determine winner when trump card is played","duration":0.25090000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when multiple trump cards are played","status":"passed","title":"should determine winner when multiple trump cards are played","duration":0.41689999999999827,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick trump 0 over led suit 7","status":"passed","title":"should pick trump 0 over led suit 7","duration":0.23739999999997963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick higher trump when multiple trumps","status":"passed","title":"should pick higher trump when multiple trumps","duration":0.14369999999996708,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should handle single card trick","status":"passed","title":"should handle single card trick","duration":0.12510000000003174,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should keep first card when all equal values","status":"passed","title":"should keep first card when all equal values","duration":0.13339999999999463,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate positive score when bet is met","status":"passed","title":"should calculate positive score when bet is met","duration":0.22469999999998436,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate negative score when bet is not met","status":"passed","title":"should calculate negative score when bet is not met","duration":0.14879999999999427,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should double score when without trump","status":"passed","title":"should double score when without trump","duration":0.126199999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return true when bet1 has higher amount","status":"passed","title":"should return true when bet1 has higher amount","duration":0.16269999999997253,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when bet1 has lower amount","status":"passed","title":"should return false when bet1 has lower amount","duration":0.1209999999999809,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.1471000000000231,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when both bets are identical","status":"passed","title":"should return false when both bets are identical","duration":0.14049999999997453,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when withoutTrump is reversed but amounts equal","status":"passed","title":"should return false when withoutTrump is reversed but amounts equal","duration":0.12920000000002574,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return the highest bet by amount","status":"passed","title":"should return the highest bet by amount","duration":0.25149999999996453,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.1272999999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null for empty bets","status":"passed","title":"should return null for empty bets","duration":0.12770000000000437,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should filter out skipped bets","status":"passed","title":"should filter out skipped bets","duration":0.18889999999998963,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null when all bets are skipped","status":"passed","title":"should return null when all bets are skipped","duration":0.19130000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should give dealer priority when bets are exactly equal","status":"passed","title":"should give dealer priority when bets are exactly equal","duration":0.23900000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should not give dealer priority when without trump differs","status":"passed","title":"should not give dealer priority when without trump differs","duration":0.20510000000001583,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should handle multiple equal bets with dealer in middle","status":"passed","title":"should handle multiple equal bets with dealer in middle","duration":0.24450000000001637,"failureMessages":[],"meta":{}}],"startTime":1763568345226,"endTime":1763568345235.2444,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/logic.test.ts"},{"assertionResults":[{"ancestorTitles":["Round Statistics","initializeRoundStats"],"fullName":"Round Statistics initializeRoundStats should initialize empty stats for all players","status":"passed","title":"should initialize empty stats for all players","duration":2.3168999999999755,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return undefined if stats is undefined","status":"passed","title":"should return undefined if stats is undefined","duration":0.30150000000003274,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track red zero collection","status":"passed","title":"should track red zero collection","duration":0.43329999999997426,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track brown zero collection","status":"passed","title":"should track brown zero collection","duration":0.3358000000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track both red and brown zeros in same trick","status":"passed","title":"should track both red and brown zeros in same trick","duration":0.258199999999988,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should accumulate stats across multiple tricks","status":"passed","title":"should accumulate stats across multiple tricks","duration":0.42910000000000537,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should not modify stats if no special cards in trick","status":"passed","title":"should not modify stats if no special cards in trick","duration":0.3235000000000241,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return the stats object for chaining","status":"passed","title":"should return the stats object for chaining","duration":0.2838999999999601,"failureMessages":[],"meta":{}}],"startTime":1763568345652,"endTime":1763568345657.3235,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/roundStatistics.test.ts"},{"assertionResults":[{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should add card to trick and remove from hand","status":"passed","title":"should add card to trick and remove from hand","duration":3.0021000000000413,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should set trump on first card","status":"passed","title":"should set trump on first card","duration":0.5896999999999935,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should not set trump on subsequent cards","status":"passed","title":"should not set trump on subsequent cards","duration":0.33619999999996253,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should advance to next player","status":"passed","title":"should advance to next player","duration":0.40690000000000737,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should wrap around after player 4","status":"passed","title":"should wrap around after player 4","duration":0.23570000000000846,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should mark trick as complete after 4 cards","status":"passed","title":"should mark trick as complete after 4 cards","duration":0.29939999999999145,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should add bet to currentBets","status":"passed","title":"should add bet to currentBets","duration":0.4729000000000383,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should handle skipped bet","status":"passed","title":"should handle skipped bet","duration":0.3649000000000342,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should advance to next player","status":"passed","title":"should advance to next player","duration":0.4812000000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should mark betting as complete after 4 bets","status":"passed","title":"should mark betting as complete after 4 bets","duration":0.324799999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should detect all players skipped","status":"passed","title":"should detect all players skipped","duration":0.24509999999997945,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should clear currentBets","status":"passed","title":"should clear currentBets","duration":0.24759999999997717,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.1593000000000302,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should wrap around when dealer is last player","status":"passed","title":"should wrap around when dealer is last player","duration":0.15100000000001046,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should set player teamId","status":"passed","title":"should set player teamId","duration":0.23940000000004602,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.17379999999997153,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap player positions in array","status":"passed","title":"should swap player positions in array","duration":3.1177000000000135,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap all player data fields","status":"passed","title":"should swap all player data fields","duration":2.024099999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve bot status and difficulty when swapping","status":"passed","title":"should preserve bot status and difficulty when swapping","duration":0.6716000000000122,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve connection status fields when swapping","status":"passed","title":"should preserve connection status fields when swapping","duration":3.122099999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentTrick references after swap","status":"passed","title":"should update currentTrick references after swap","duration":0.7380999999999744,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentBets references after swap","status":"passed","title":"should update currentBets references after swap","duration":0.6558999999999742,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update highestBet reference after swap","status":"passed","title":"should update highestBet reference after swap","duration":0.4519000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should recalculate team IDs based on position after swap","status":"passed","title":"should recalculate team IDs based on position after swap","duration":4.379200000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.48699999999996635,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should deal 8 cards to each player","status":"passed","title":"should deal 8 cards to each player","duration":0.4150000000000773,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should reset round state","status":"passed","title":"should reset round state","duration":0.39199999999993906,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should rotate dealer","status":"passed","title":"should rotate dealer","duration":0.17879999999991014,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.17879999999991014,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should clear currentTrick","status":"passed","title":"should clear currentTrick","duration":0.21000000000003638,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.12229999999999563,"failureMessages":[],"meta":{}},{"ancestorTitles":["addTeamPoints"],"fullName":"addTeamPoints should be a placeholder function (points tracked per player)","status":"passed","title":"should be a placeholder function (points tracked per player)","duration":0.13439999999991414,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should add round scores to team totals","status":"passed","title":"should add round scores to team totals","duration":0.22640000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 1 reaches 41","status":"passed","title":"should return true when team 1 reaches 41","duration":0.1449000000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 2 reaches 41","status":"passed","title":"should return true when team 2 reaches 41","duration":0.2135999999999285,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should update game phase","status":"passed","title":"should update game phase","duration":0.1710000000000491,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should handle all phase transitions","status":"passed","title":"should handle all phase transitions","duration":0.21620000000007167,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should award tricks and points to winner","status":"passed","title":"should award tricks and points to winner","duration":0.7703000000000202,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should store trick as previousTrick","status":"passed","title":"should store trick as previousTrick","duration":0.5657999999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should add trick to currentRoundTricks","status":"passed","title":"should add trick to currentRoundTricks","duration":1.3152999999999793,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should NOT clear currentTrick (cleared later after delay)","status":"passed","title":"should NOT clear currentTrick (cleared later after delay)","duration":0.4659000000000333,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should set winner as current player","status":"passed","title":"should set winner as current player","duration":0.3548000000000684,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should detect round over when all hands empty","status":"passed","title":"should detect round over when all hands empty","duration":0.39440000000001874,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should not transition to scoring if hands remain","status":"passed","title":"should not transition to scoring if hands remain","duration":0.3748000000000502,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team wins bet","status":"passed","title":"should calculate offensive team wins bet","duration":0.9779000000000906,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team fails bet","status":"passed","title":"should calculate offensive team fails bet","duration":0.36230000000000473,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should apply without-trump multiplier","status":"passed","title":"should apply without-trump multiplier","duration":0.31790000000000873,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over at 41 points","status":"passed","title":"should detect game over at 41 points","duration":0.24860000000001037,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over for team 2","status":"passed","title":"should detect game over for team 2","duration":0.25499999999999545,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should update team scores","status":"passed","title":"should update team scores","duration":0.3672000000000253,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should add round to history","status":"passed","title":"should add round to history","duration":0.5900000000000318,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should transition to game_over when gameOver is true","status":"passed","title":"should transition to game_over when gameOver is true","duration":0.23300000000006094,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should not transition if game continues","status":"passed","title":"should not transition if game continues","duration":0.1774000000000342,"failureMessages":[],"meta":{}}],"startTime":1763568345224,"endTime":1763568345259.233,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/state.test.ts"},{"assertionResults":[{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should return new GameState (immutability)","status":"passed","title":"should return new GameState (immutability)","duration":3.0831999999999766,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should award trick to winner with correct points","status":"passed","title":"should award trick to winner with correct points","duration":0.5653999999999542,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Red 0 special card (+5 points)","status":"passed","title":"should handle Red 0 special card (+5 points)","duration":0.3897999999999797,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Brown 0 special card (-3 points)","status":"passed","title":"should handle Brown 0 special card (-3 points)","duration":0.35130000000003747,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should clear current trick after resolution","status":"passed","title":"should clear current trick after resolution","duration":0.21299999999996544,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set previousTrick with winner info","status":"passed","title":"should set previousTrick with winner info","duration":0.37180000000000746,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.27830000000000155,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should transition to scoring phase when round is over","status":"passed","title":"should transition to scoring phase when round is over","duration":0.24969999999996162,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should stay in playing phase when cards remain","status":"passed","title":"should stay in playing phase when cards remain","duration":0.5137000000000285,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should throw error if trick is incomplete","status":"passed","title":"should throw error if trick is incomplete","duration":1.168200000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - immutability guarantees"],"fullName":"stateTransitions - immutability guarantees should never mutate original game state","status":"passed","title":"should never mutate original game state","duration":0.38210000000003674,"failureMessages":[],"meta":{}}],"startTime":1763568345628,"endTime":1763568345636.382,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/stateTransitions.test.ts"},{"assertionResults":[{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not in playing phase","status":"passed","title":"should reject play when not in playing phase","duration":2.359299999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when player already played in trick","status":"passed","title":"should reject play when player already played in trick","duration":0.6381000000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when trick is complete (4 cards)","status":"passed","title":"should reject play when trick is complete (4 cards)","duration":0.41809999999998126,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not player's turn","status":"passed","title":"should reject play when not player's turn","duration":0.3205000000000382,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject invalid card data","status":"passed","title":"should reject invalid card data","duration":0.43029999999998836,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject card not in player's hand","status":"passed","title":"should reject card not in player's hand","duration":0.37970000000007076,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should enforce suit-following rule","status":"passed","title":"should enforce suit-following rule","duration":0.3324000000000069,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow playing off-suit when no led suit in hand","status":"passed","title":"should allow playing off-suit when no led suit in hand","duration":0.2842000000000553,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow valid card play","status":"passed","title":"should allow valid card play","duration":0.4621999999999389,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not in betting phase","status":"passed","title":"should reject bet when not in betting phase","duration":0.3889000000000351,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not player's turn","status":"passed","title":"should reject bet when not player's turn","duration":0.1997000000000071,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject duplicate bet","status":"passed","title":"should reject duplicate bet","duration":0.2296999999999798,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount < 7","status":"passed","title":"should reject bet amount < 7","duration":0.22019999999997708,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount > 12","status":"passed","title":"should reject bet amount > 12","duration":0.21519999999998163,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject dealer skip when no valid bets","status":"passed","title":"should reject dealer skip when no valid bets","duration":0.21460000000001855,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow dealer to skip when there are valid bets","status":"passed","title":"should allow dealer to skip when there are valid bets","duration":0.16640000000006694,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow valid bet","status":"passed","title":"should allow valid bet","duration":0.16300000000001091,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.29910000000006676,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.20019999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player already on team","status":"passed","title":"should reject when player already on team","duration":0.2137000000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when team is full","status":"passed","title":"should reject when team is full","duration":0.24530000000004293,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should allow valid team selection","status":"passed","title":"should allow valid team selection","duration":0.20489999999995234,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with human during active gameplay","status":"passed","title":"should allow swapping with human during active gameplay","duration":0.3168000000000575,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with bot during active gameplay","status":"passed","title":"should allow swapping with bot during active gameplay","duration":0.1875999999999749,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap with bot during active gameplay","status":"passed","title":"should allow cross-team swap with bot during active gameplay","duration":0.211400000000026,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping during game_over phase","status":"passed","title":"should reject swapping during game_over phase","duration":0.2541999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.23279999999999745,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping with self","status":"passed","title":"should reject swapping with self","duration":0.20619999999996708,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow valid position swap between teammates","status":"passed","title":"should allow valid position swap between teammates","duration":0.1893000000000029,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap during team_selection","status":"passed","title":"should allow cross-team swap during team_selection","duration":0.1735999999999649,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.2980999999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not exactly 4 players","status":"passed","title":"should reject when not exactly 4 players","duration":0.19500000000005002,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when teams are not balanced","status":"passed","title":"should reject when teams are not balanced","duration":0.18840000000000146,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should allow starting with valid setup","status":"passed","title":"should allow starting with valid setup","duration":0.17899999999997362,"failureMessages":[],"meta":{}}],"startTime":1763568345306,"endTime":1763568345319.195,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/validation.test.ts"},{"assertionResults":[{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate and return CSRF token","status":"passed","title":"should generate and return CSRF token","duration":38.014099999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set CSRF token in cookie","status":"passed","title":"should set CSRF token in cookie","duration":7.8291000000000395,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set httpOnly cookie","status":"passed","title":"should set httpOnly cookie","duration":8.205400000000054,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set SameSite=Strict","status":"passed","title":"should set SameSite=Strict","duration":5.699499999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate different tokens for different requests","status":"passed","title":"should generate different tokens for different requests","duration":13.972599999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should allow request with valid CSRF token","status":"passed","title":"should allow request with valid CSRF token","duration":27.536699999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request without CSRF token","status":"passed","title":"should reject request without CSRF token","duration":9.389800000000037,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with invalid CSRF token","status":"passed","title":"should reject request with invalid CSRF token","duration":7.473799999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with token but no cookie","status":"passed","title":"should reject request with token but no cookie","duration":9.145900000000097,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with cookie but no token","status":"passed","title":"should reject request with cookie but no token","duration":9.491100000000074,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should protect PUT requests","status":"passed","title":"should protect PUT requests","duration":9.575399999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should reject PUT without token","status":"passed","title":"should reject PUT without token","duration":5.757399999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should protect DELETE requests","status":"passed","title":"should protect DELETE requests","duration":10.518300000000067,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should reject DELETE without token","status":"passed","title":"should reject DELETE without token","duration":5.35570000000007,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should allow GET requests without CSRF token","status":"passed","title":"should allow GET requests without CSRF token","duration":4.947399999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should not require CSRF token for GET to protected route","status":"passed","title":"should not require CSRF token for GET to protected route","duration":5.581400000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return user-friendly error message","status":"passed","title":"should return user-friendly error message","duration":4.537500000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return 403 status code for CSRF errors","status":"passed","title":"should return 403 status code for CSRF errors","duration":3.667899999999918,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should pass through non-CSRF errors","status":"passed","title":"should pass through non-CSRF errors","duration":3.342999999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should validate token matches cookie","status":"passed","title":"should validate token matches cookie","duration":9.014400000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should accept token from same session","status":"passed","title":"should accept token from same session","duration":7.334899999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use different tokens for different sessions","status":"passed","title":"should use different tokens for different sessions","duration":4.795600000000036,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should set httpOnly flag to prevent XSS","status":"passed","title":"should set httpOnly flag to prevent XSS","duration":2.1766000000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use SameSite=Strict to prevent CSRF","status":"passed","title":"should use SameSite=Strict to prevent CSRF","duration":4.196399999999926,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use Secure flag in production","status":"passed","title":"should use Secure flag in production","duration":2.1717000000001008,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle missing X-CSRF-Token header","status":"passed","title":"should handle missing X-CSRF-Token header","duration":3.844400000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle empty CSRF token","status":"passed","title":"should handle empty CSRF token","duration":7.627200000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle malformed CSRF token","status":"passed","title":"should handle malformed CSRF token","duration":4.241200000000049,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle multiple CSRF tokens in header","status":"passed","title":"should handle multiple CSRF tokens in header","duration":4.135500000000093,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should work with authenticated requests","status":"passed","title":"should work with authenticated requests","duration":4.9401000000000295,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should require both CSRF token and auth token","status":"passed","title":"should require both CSRF token and auth token","duration":3.1802999999999884,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Configuration"],"fullName":"CSRF Configuration should warn about default secret in production","status":"passed","title":"should warn about default secret in production","duration":0.767400000000066,"failureMessages":[],"meta":{}}],"startTime":1763568345483,"endTime":1763568345733.7673,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/middleware/csrf.test.ts"},{"assertionResults":[{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should restore game state with valid session","status":"passed","title":"should restore game state with valid session","duration":2.286200000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject invalid session token","status":"passed","title":"should reject invalid session token","duration":0.355700000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject expired session","status":"passed","title":"should reject expired session","duration":0.2831000000000472,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should emit reconnection_successful","status":"passed","title":"should emit reconnection_successful","duration":0.49160000000000537,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should notify other players of reconnection","status":"passed","title":"should notify other players of reconnection","duration":0.33909999999997353,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should mark player as disconnected","status":"passed","title":"should mark player as disconnected","duration":0.25010000000003174,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should start 15-minute reconnection timer","status":"passed","title":"should start 15-minute reconnection timer","duration":0.3539000000000101,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should emit player_disconnected event","status":"passed","title":"should emit player_disconnected event","duration":0.4175000000000182,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should remove player from game","status":"passed","title":"should remove player from game","duration":0.5672999999999888,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should delete session","status":"passed","title":"should delete session","duration":0.3177000000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should emit player_left event","status":"passed","title":"should emit player_left event","duration":0.29769999999996344,"failureMessages":[],"meta":{}}],"startTime":1763568345598,"endTime":1763568345605.2976,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/connection.test.ts"},{"assertionResults":[{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should accept valid bet in range 7-12","status":"passed","title":"should accept valid bet in range 7-12","duration":3.0664999999999623,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject bet out of range","status":"passed","title":"should reject bet out of range","duration":0.5559999999999832,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should enforce bet hierarchy (higher amount wins)","status":"passed","title":"should enforce bet hierarchy (higher amount wins)","duration":0.2635999999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle without-trump bets correctly","status":"passed","title":"should handle without-trump bets correctly","duration":0.21920000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should allow dealer to equalize","status":"passed","title":"should allow dealer to equalize","duration":0.43020000000001346,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject dealer skip","status":"passed","title":"should reject dealer skip","duration":0.26120000000003074,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle skip bet correctly","status":"passed","title":"should handle skip bet correctly","duration":0.27899999999999636,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should accept valid card play","status":"passed","title":"should accept valid card play","duration":0.32630000000000337,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should enforce suit-following rules","status":"passed","title":"should enforce suit-following rules","duration":0.4427000000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject card not in hand","status":"passed","title":"should reject card not in hand","duration":0.29750000000001364,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject play when not player turn","status":"passed","title":"should reject play when not player turn","duration":0.4753999999999792,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should resolve trick after 4 cards","status":"passed","title":"should resolve trick after 4 cards","duration":0.23140000000000782,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should calculate points correctly (red 0, brown 0)","status":"passed","title":"should calculate points correctly (red 0, brown 0)","duration":0.24959999999998672,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should mark player ready after round","status":"passed","title":"should mark player ready after round","duration":0.1945999999999799,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should start new round when all ready","status":"passed","title":"should start new round when all ready","duration":0.1897999999999911,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should end game at 41+ points","status":"passed","title":"should end game at 41+ points","duration":0.15460000000001628,"failureMessages":[],"meta":{}}],"startTime":1763568345646,"endTime":1763568345654.2495,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/gameplay.test.ts"},{"assertionResults":[{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should create new game with valid player name","status":"passed","title":"should create new game with valid player name","duration":2.5008000000000266,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should reject invalid player names","status":"passed","title":"should reject invalid player names","duration":0.2595999999999776,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should assign player as host","status":"passed","title":"should assign player as host","duration":0.2825000000000273,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should emit game_created event","status":"passed","title":"should emit game_created event","duration":1.872000000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should add player to existing game","status":"passed","title":"should add player to existing game","duration":0.3006000000000313,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game full","status":"passed","title":"should reject if game full","duration":0.16699999999997317,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game already started","status":"passed","title":"should reject if game already started","duration":0.17809999999997217,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should assign player to team","status":"passed","title":"should assign player to team","duration":0.1805999999999699,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should allow team selection before game starts","status":"passed","title":"should allow team selection before game starts","duration":0.23980000000000246,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should reject team selection during game","status":"passed","title":"should reject team selection during game","duration":0.1360000000000241,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should balance teams (2v2)","status":"passed","title":"should balance teams (2v2)","duration":0.14409999999998035,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should swap positions within team","status":"passed","title":"should swap positions within team","duration":0.13959999999997308,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should detect cross-team scenarios","status":"passed","title":"should detect cross-team scenarios","duration":0.09109999999998308,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should update player order","status":"passed","title":"should update player order","duration":0.29059999999998354,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should allow host to kick players","status":"passed","title":"should allow host to kick players","duration":0.23920000000003938,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should reject non-host kick attempts","status":"passed","title":"should reject non-host kick attempts","duration":0.09089999999997644,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should update game state after kick","status":"passed","title":"should update game state after kick","duration":0.12150000000002592,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should start game with 4 players","status":"passed","title":"should start game with 4 players","duration":0.09070000000002665,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should reject if teams unbalanced","status":"passed","title":"should reject if teams unbalanced","duration":0.1098999999999819,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should deal cards and set dealer","status":"passed","title":"should deal cards and set dealer","duration":0.1706999999999539,"failureMessages":[],"meta":{}}],"startTime":1763568345189,"endTime":1763568345197.2393,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/lobby.test.ts"},{"assertionResults":[{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should hash password with bcrypt","status":"passed","title":"should hash password with bcrypt","duration":70.0997000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should generate different hash for same password","status":"passed","title":"should generate different hash for same password","duration":113.75040000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return true for correct password","status":"passed","title":"should return true for correct password","duration":109.1522,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return false for incorrect password","status":"passed","title":"should return false for incorrect password","duration":106.43819999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should generate access and refresh tokens","status":"passed","title":"should generate access and refresh tokens","duration":4.632900000000063,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should create valid JWT tokens","status":"passed","title":"should create valid JWT tokens","duration":2.8351000000000113,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should include user data in payload","status":"passed","title":"should include user data in payload","duration":2.6118999999998778,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should verify valid access token","status":"passed","title":"should verify valid access token","duration":1.5418999999999414,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject refresh token as access token","status":"passed","title":"should reject refresh token as access token","duration":1.6356000000000677,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.1798999999998614,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject malformed token","status":"passed","title":"should reject malformed token","duration":0.10549999999989268,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should verify valid refresh token","status":"passed","title":"should verify valid refresh token","duration":1.3315999999999804,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject access token as refresh token","status":"passed","title":"should reject access token as refresh token","duration":1.2335000000000491,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.1230000000000473,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate random token","status":"passed","title":"should generate random token","duration":0.27150000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate unique tokens","status":"passed","title":"should generate unique tokens","duration":0.2619999999999436,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate hex string","status":"passed","title":"should generate hex string","duration":0.13619999999991705,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should accept valid passwords","status":"passed","title":"should accept valid passwords","duration":0.387000000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password too short","status":"passed","title":"should reject password too short","duration":0.17870000000016262,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without uppercase","status":"passed","title":"should reject password without uppercase","duration":0.10339999999996508,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without lowercase","status":"passed","title":"should reject password without lowercase","duration":0.09270000000014988,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without number","status":"passed","title":"should reject password without number","duration":0.08990000000017062,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should accept valid emails","status":"passed","title":"should accept valid emails","duration":0.2615000000000691,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should reject invalid email formats","status":"passed","title":"should reject invalid email formats","duration":0.1915000000001328,"failureMessages":[],"meta":{}}],"startTime":1763568345338,"endTime":1763568345757.2615,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/authHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 1 for empty game","status":"passed","title":"should return Bot 1 for empty game","duration":1.8835000000000264,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 2 when Bot 1 exists","status":"passed","title":"should return Bot 2 when Bot 1 exists","duration":0.233600000000024,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should fill gaps in bot numbering","status":"passed","title":"should fill gaps in bot numbering","duration":0.17339999999995825,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 3 when Bot 1 and 2 exist","status":"passed","title":"should return Bot 3 when Bot 1 and 2 exist","duration":0.22229999999996153,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should ignore non-bot players","status":"passed","title":"should ignore non-bot players","duration":0.1560000000000059,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots when less than 3 exist","status":"passed","title":"should allow adding bots when less than 3 exist","duration":0.1853999999999587,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should reject adding bots when 3 already exist","status":"passed","title":"should reject adding bots when 3 already exist","duration":0.19819999999998572,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots to empty game","status":"passed","title":"should allow adding bots to empty game","duration":0.1723999999999819,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return true for teammates","status":"passed","title":"should return true for teammates","duration":0.36089999999995825,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false for non-teammates","status":"passed","title":"should return false for non-teammates","duration":0.20050000000003365,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when player not found","status":"passed","title":"should return false when player not found","duration":0.1793999999999869,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when both players not found","status":"passed","title":"should return false when both players not found","duration":0.0928000000000111,"failureMessages":[],"meta":{}}],"startTime":1763568345669,"endTime":1763568345673.3608,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/botHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by socket ID","status":"passed","title":"should find player by socket ID","duration":2.161299999999983,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by name when socket ID not found","status":"passed","title":"should find player by name when socket ID not found","duration":0.41399999999998727,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should return undefined if player not found","status":"passed","title":"should return undefined if player not found","duration":0.24160000000000537,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should handle empty player array","status":"passed","title":"should handle empty player array","duration":0.19369999999997844,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by socket ID","status":"passed","title":"should find player index by socket ID","duration":0.39189999999996417,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by name when socket ID not found","status":"passed","title":"should find player index by name when socket ID not found","duration":0.23169999999998936,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should return -1 if player not found","status":"passed","title":"should return -1 if player not found","duration":0.23179999999996426,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return true when human players exist","status":"passed","title":"should return true when human players exist","duration":0.23699999999996635,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when only bots exist","status":"passed","title":"should return false when only bots exist","duration":0.46369999999996026,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when no players exist","status":"passed","title":"should return false when no players exist","duration":0.21749999999997272,"failureMessages":[],"meta":{}}],"startTime":1763568345668,"endTime":1763568345673.4636,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/playerHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should accept valid player names","status":"passed","title":"should accept valid player names","duration":1.77800000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject empty names","status":"passed","title":"should reject empty names","duration":0.7781999999999698,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":8.882200000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should enforce max length of 20 characters","status":"passed","title":"should enforce max length of 20 characters","duration":0.5833999999999833,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject invalid characters","status":"passed","title":"should reject invalid characters","duration":0.20319999999992433,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should accept valid messages","status":"passed","title":"should accept valid messages","duration":0.3267000000000735,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should reject empty messages","status":"passed","title":"should reject empty messages","duration":0.1972000000000662,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":1.5751000000000204,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should enforce max length of 200 characters","status":"passed","title":"should enforce max length of 200 characters","duration":0.3080999999999676,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should accept valid bet amounts (7-12)","status":"passed","title":"should accept valid bet amounts (7-12)","duration":0.2314000000001215,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject amounts outside range","status":"passed","title":"should reject amounts outside range","duration":0.21880000000010114,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.3000999999999294,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should accept valid card values (0-7)","status":"passed","title":"should accept valid card values (0-7)","duration":0.17499999999995453,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject values outside range","status":"passed","title":"should reject values outside range","duration":0.30940000000009604,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.13179999999988468,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should accept valid colors","status":"passed","title":"should accept valid colors","duration":0.1514999999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should reject invalid colors","status":"passed","title":"should reject invalid colors","duration":0.20100000000002183,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should accept valid game IDs","status":"passed","title":"should accept valid game IDs","duration":0.29320000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should reject invalid formats","status":"passed","title":"should reject invalid formats","duration":0.20319999999992433,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should sanitize text and enforce max length","status":"passed","title":"should sanitize text and enforce max length","duration":1.2472999999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should handle empty input","status":"passed","title":"should handle empty input","duration":0.07899999999995089,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should accept boolean values","status":"passed","title":"should accept boolean values","duration":0.12839999999982865,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert truthy values","status":"passed","title":"should convert truthy values","duration":0.10010000000011132,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert falsy values","status":"passed","title":"should convert falsy values","duration":0.09910000000013497,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should reject invalid values","status":"passed","title":"should reject invalid values","duration":0.12390000000004875,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should accept valid team IDs","status":"passed","title":"should accept valid team IDs","duration":0.14620000000013533,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should reject invalid team IDs","status":"passed","title":"should reject invalid team IDs","duration":0.18629999999984648,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should accept valid player indices","status":"passed","title":"should accept valid player indices","duration":0.14730000000008658,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should reject invalid indices","status":"passed","title":"should reject invalid indices","duration":0.19139999999993051,"failureMessages":[],"meta":{}}],"startTime":1763568346262,"endTime":1763568346282.1914,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sanitization.test.ts"},{"assertionResults":[{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate unique session token","status":"passed","title":"should generate unique session token","duration":3.6989000000000374,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate 64 character hex string","status":"passed","title":"should generate 64 character hex string","duration":1.3836999999999762,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should create and store session","status":"passed","title":"should create and store session","duration":0.7509999999999764,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should store session in map","status":"passed","title":"should store session in map","duration":0.5152999999999679,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should return session object with correct properties","status":"passed","title":"should return session object with correct properties","duration":0.7894000000000005,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should generate unique tokens for multiple sessions","status":"passed","title":"should generate unique tokens for multiple sessions","duration":0.6531999999999698,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return session for valid token","status":"passed","title":"should return session for valid token","duration":0.3819000000000301,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for non-existent token","status":"passed","title":"should return null for non-existent token","duration":0.20199999999999818,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for expired session","status":"passed","title":"should return null for expired session","duration":0.42679999999995744,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should delete expired session from map","status":"passed","title":"should delete expired session from map","duration":0.32220000000000937,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should accept session just before expiry","status":"passed","title":"should accept session just before expiry","duration":0.234800000000007,"failureMessages":[],"meta":{}}],"startTime":1763568345240,"endTime":1763568345250.3223,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sessionManager.test.ts"}]}
