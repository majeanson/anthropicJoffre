
> trick-card-game-backend@2.3.0 test
> vitest --reporter=json

{"numTotalTestSuites":174,"numPassedTestSuites":174,"numFailedTestSuites":0,"numPendingTestSuites":0,"numTotalTests":456,"numPassedTests":451,"numFailedTests":0,"numPendingTests":5,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1763604598486,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should refresh token with valid refresh token cookie","status":"passed","title":"should refresh token with valid refresh token cookie","duration":22.091699999999946,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Successful Token Refresh"],"fullName":"POST /api/auth/refresh Successful Token Refresh should set secure cookie in production","status":"passed","title":"should set secure cookie in production","duration":4.434999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should detect and reject suspicious token usage","status":"passed","title":"should detect and reject suspicious token usage","duration":4.722999999999956,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Theft Detection"],"fullName":"POST /api/auth/refresh Token Theft Detection should revoke all user tokens on theft detection","status":"passed","title":"should revoke all user tokens on theft detection","duration":5.430400000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject request without refresh token cookie","status":"passed","title":"should reject request without refresh token cookie","duration":3.5880999999999403,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject expired refresh token","status":"passed","title":"should reject expired refresh token","duration":3.127899999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for banned user","status":"passed","title":"should reject token for banned user","duration":2.9670999999998457,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Invalid Tokens"],"fullName":"POST /api/auth/refresh Invalid Tokens should reject token for deleted user","status":"passed","title":"should reject token for deleted user","duration":2.604000000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Rate Limiting"],"fullName":"POST /api/auth/refresh Rate Limiting should apply rate limiting to refresh endpoint","status":"passed","title":"should apply rate limiting to refresh endpoint","duration":4.207100000000082,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should invalidate old token when rotating","status":"passed","title":"should invalidate old token when rotating","duration":4.197400000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Token Rotation"],"fullName":"POST /api/auth/refresh Token Rotation should track IP and user agent in rotation","status":"passed","title":"should track IP and user agent in rotation","duration":2.662800000000061,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":3.124699999999848,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/refresh","Error Handling"],"fullName":"POST /api/auth/refresh Error Handling should handle rotation failures gracefully","status":"passed","title":"should handle rotation failures gracefully","duration":2.6078999999999724,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should revoke refresh token on logout","status":"passed","title":"should revoke refresh token on logout","duration":2.6859000000001743,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even without refresh token","status":"passed","title":"should succeed even without refresh token","duration":2.2590999999999894,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout"],"fullName":"POST /api/auth/logout should succeed even if revocation fails","status":"passed","title":"should succeed even if revocation fails","duration":2.484899999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should revoke all user tokens","status":"passed","title":"should revoke all user tokens","duration":2.5812000000000808,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should require valid access token","status":"passed","title":"should require valid access token","duration":2.938999999999851,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should reject invalid access token","status":"passed","title":"should reject invalid access token","duration":2.218599999999924,"failureMessages":[],"meta":{}},{"ancestorTitles":["POST /api/auth/logout-all"],"fullName":"POST /api/auth/logout-all should clear refresh token cookie","status":"passed","title":"should clear refresh token cookie","duration":2.069500000000062,"failureMessages":[],"meta":{}}],"startTime":1763604599791,"endTime":1763604599875.0696,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/auth.refresh.test.ts"},{"assertionResults":[{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow viewing own profile with friends_only visibility","status":"passed","title":"should allow viewing own profile with friends_only visibility","duration":1.865099999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block anonymous users from friends_only profiles","status":"passed","title":"should block anonymous users from friends_only profiles","duration":0.25670000000002346,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should block non-friends from friends_only profiles","status":"passed","title":"should block non-friends from friends_only profiles","duration":0.16960000000000264,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Friend-only visibility"],"fullName":"Profile Visibility Logic Friend-only visibility should allow friends to view friends_only profiles","status":"passed","title":"should allow friends to view friends_only profiles","duration":0.26530000000002474,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Public visibility"],"fullName":"Profile Visibility Logic Public visibility should allow anyone to view public profiles","status":"passed","title":"should allow anyone to view public profiles","duration":0.22919999999999163,"failureMessages":[],"meta":{}},{"ancestorTitles":["Profile Visibility Logic","Private visibility"],"fullName":"Profile Visibility Logic Private visibility should block everyone from private profiles","status":"passed","title":"should block everyone from private profiles","duration":0.18619999999998527,"failureMessages":[],"meta":{}}],"startTime":1763604599584,"endTime":1763604599587.2292,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/api/profiles.test.ts"},{"assertionResults":[{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should save new game with correct status","status":"passed","title":"should save new game with correct status","duration":3.503400000000056,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to team_selection for 4 players in team_selection phase","status":"passed","title":"should set status to team_selection for 4 players in team_selection phase","duration":0.4319000000000415,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to in_progress for gameplay phases","status":"passed","title":"should set status to in_progress for gameplay phases","duration":0.2886000000000877,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should set status to finished for game_over phase","status":"passed","title":"should set status to finished for game_over phase","duration":0.24350000000004002,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","saveGameState"],"fullName":"gameState persistence saveGameState should convert Maps to objects for serialization","status":"passed","title":"should convert Maps to objects for serialization","duration":0.35410000000001673,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should load existing game","status":"passed","title":"should load existing game","duration":1.1968000000001666,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should return null for non-existent game","status":"passed","title":"should return null for non-existent game","duration":0.22270000000003165,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should restore Map objects from plain objects","status":"passed","title":"should restore Map objects from plain objects","duration":0.5208000000000084,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","loadGameState"],"fullName":"gameState persistence loadGameState should deep clone to prevent mutations","status":"passed","title":"should deep clone to prevent mutations","duration":0.9202999999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","deleteGameState"],"fullName":"gameState persistence deleteGameState should delete existing game","status":"passed","title":"should delete existing game","duration":0.43800000000010186,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should list all games by default","status":"passed","title":"should list all games by default","duration":0.8274000000001251,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by status","status":"passed","title":"should filter by status","duration":0.2768999999998414,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should filter by isPublic","status":"passed","title":"should filter by isPublic","duration":0.21129999999993743,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should apply limit","status":"passed","title":"should apply limit","duration":0.15200000000004366,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","listActiveGames"],"fullName":"gameState persistence listActiveGames should include team assignments in result","status":"passed","title":"should include team assignments in result","duration":0.27330000000006294,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return games containing player","status":"passed","title":"should return games containing player","duration":0.7102999999999611,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","getPlayerGames"],"fullName":"gameState persistence getPlayerGames should return empty array if player has no games","status":"passed","title":"should return empty array if player has no games","duration":0.2238999999999578,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return true for existing game","status":"passed","title":"should return true for existing game","duration":0.32750000000010004,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","gameExists"],"fullName":"gameState persistence gameExists should return false for non-existent game","status":"passed","title":"should return false for non-existent game","duration":0.11009999999987485,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should call cleanup function and return count","status":"passed","title":"should call cleanup function and return count","duration":0.19420000000013715,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameState persistence","cleanupAbandonedGamesDB"],"fullName":"gameState persistence cleanupAbandonedGamesDB should return 0 if no games cleaned up","status":"passed","title":"should return 0 if no games cleaned up","duration":0.10719999999992069,"failureMessages":[],"meta":{}}],"startTime":1763604600422,"endTime":1763604600434.3274,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/gameState.test.ts"},{"assertionResults":[{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first game stat update","status":"passed","title":"should initialize player_stats record on first game stat update","duration":462.1543999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Player Stats Initialization"],"fullName":"Database Stats Functions Player Stats Initialization should initialize player_stats record on first round stat update","status":"passed","title":"should initialize player_stats record on first round stat update","duration":112.11760000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game win correctly","status":"passed","title":"should record game win correctly","duration":109.82719999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should record game loss correctly","status":"passed","title":"should record game loss correctly","duration":110.12419999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive wins (win streak)","status":"passed","title":"should track consecutive wins (win streak)","duration":407.04890000000023,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track consecutive losses (loss streak)","status":"passed","title":"should track consecutive losses (loss streak)","duration":299.9760000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track fastest win","status":"passed","title":"should track fastest win","duration":360.33110000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should track longest game","status":"passed","title":"should track longest game","duration":303.5675000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should calculate average game duration","status":"passed","title":"should calculate average game duration","duration":275.84119999999984,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game Stats Recording"],"fullName":"Database Stats Functions Game Stats Recording should update highest and lowest ELO ratings","status":"passed","title":"should update highest and lowest ELO ratings","duration":272.00919999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record successful bet","status":"passed","title":"should record successful bet","duration":83.04269999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should record failed bet","status":"passed","title":"should record failed bet","duration":91.61200000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track without trump bets","status":"passed","title":"should track without trump bets","duration":88.0936999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track trump cards played","status":"passed","title":"should track trump cards played","duration":172.16869999999972,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track red zeros collected","status":"passed","title":"should track red zeros collected","duration":83.14060000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should track brown zeros received","status":"passed","title":"should track brown zeros received","duration":88.2475999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should calculate average tricks per round","status":"passed","title":"should calculate average tricks per round","duration":166.78099999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Round Stats Recording"],"fullName":"Database Stats Functions Round Stats Recording should update highest bet","status":"passed","title":"should update highest bet","duration":254.23329999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should create game history record","status":"skipped","title":"should create game history record","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Game History Recording"],"fullName":"Database Stats Functions Game History Recording should mark game as finished","status":"skipped","title":"should mark game as finished","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve leaderboard with top players","status":"skipped","title":"should retrieve leaderboard with top players","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Leaderboard & Player History"],"fullName":"Database Stats Functions Leaderboard & Player History should retrieve player history","status":"skipped","title":"should retrieve player history","failureMessages":[],"meta":{}},{"ancestorTitles":["Database Stats Functions","Integration: Complete Game Flow"],"fullName":"Database Stats Functions Integration: Complete Game Flow should record all stats for a complete game","status":"skipped","title":"should record all stats for a complete game","failureMessages":[],"meta":{}}],"startTime":1763604599468,"endTime":1763604603210.2334,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/index.test.ts"},{"assertionResults":[{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should skip save for casual mode","status":"passed","title":"should skip save for casual mode","duration":5.7082000000000335,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should save for elo mode","status":"passed","title":"should save for elo mode","duration":2.5185000000000173,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveOrUpdateGame"],"fullName":"persistenceManager saveOrUpdateGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":2.5697000000000116,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":1.1077999999999975,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","saveGameParticipants"],"fullName":"persistenceManager saveGameParticipants should save for elo mode","status":"passed","title":"should save for elo mode","duration":0.640700000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.9323000000000548,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","markGameFinished"],"fullName":"persistenceManager markGameFinished should mark for elo mode","status":"passed","title":"should mark for elo mode","duration":0.6404999999999745,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":1.0184000000000424,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateRoundStats"],"fullName":"persistenceManager updateRoundStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.7685999999999922,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.7338000000000875,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updateGameStats"],"fullName":"persistenceManager updateGameStats should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.32349999999996726,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for bots","status":"passed","title":"should skip for bots","duration":0.6488000000000511,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.5298000000000229,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should create for elo mode + human players","status":"passed","title":"should create for elo mode + human players","duration":0.5295999999999594,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","createSession"],"fullName":"persistenceManager createSession should handle database errors and return null","status":"passed","title":"should handle database errors and return null","duration":0.7758000000000038,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.5766999999999598,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","deletePlayerSessions"],"fullName":"persistenceManager deletePlayerSessions should delete for elo mode","status":"passed","title":"should delete for elo mode","duration":0.20850000000007185,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should skip for casual mode","status":"passed","title":"should skip for casual mode","duration":0.2380000000000564,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should update for elo mode","status":"passed","title":"should update for elo mode","duration":0.2880999999999858,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","updatePlayerPresence"],"fullName":"persistenceManager updatePlayerPresence should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.7618999999999687,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for casual mode","status":"passed","title":"should return 0 for casual mode","duration":0.6508999999999787,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should return 0 for bots","status":"passed","title":"should return 0 for bots","duration":0.4431999999999334,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should calculate real ELO changes for elo mode","status":"passed","title":"should calculate real ELO changes for elo mode","duration":0.6480999999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should use default ELO 1200 for new players","status":"passed","title":"should use default ELO 1200 for new players","duration":0.5149000000000115,"failureMessages":[],"meta":{}},{"ancestorTitles":["persistenceManager","calculateEloChangesForGame"],"fullName":"persistenceManager calculateEloChangesForGame should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.9182000000000698,"failureMessages":[],"meta":{}}],"startTime":1763604599219,"endTime":1763604599246.9182,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/persistenceManager.test.ts"},{"assertionResults":[{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create a new refresh token successfully","status":"passed","title":"should create a new refresh token successfully","duration":7.5243999999999005,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should create token with default expiry of 30 days","status":"passed","title":"should create token with default expiry of 30 days","duration":0.8800999999999704,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":11.870399999999904,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","createRefreshToken"],"fullName":"Refresh Token Management createRefreshToken should return null when pool is not available","status":"passed","title":"should return null when pool is not available","duration":0.38009999999997035,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should verify valid token successfully","status":"passed","title":"should verify valid token successfully","duration":1.8450999999998885,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for expired token","status":"passed","title":"should return null for expired token","duration":0.5513999999999442,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should return null for revoked token","status":"passed","title":"should return null for revoked token","duration":0.3206000000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","verifyRefreshToken"],"fullName":"Refresh Token Management verifyRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.527400000000057,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rotate token successfully","status":"passed","title":"should rotate token successfully","duration":1.7620999999999185,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should rollback on error","status":"passed","title":"should rollback on error","duration":1.6298000000000457,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","rotateRefreshToken"],"fullName":"Refresh Token Management rotateRefreshToken should return null for invalid old token","status":"passed","title":"should return null for invalid old token","duration":0.4836999999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should revoke token successfully","status":"passed","title":"should revoke token successfully","duration":0.8132000000000517,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should return false for already revoked token","status":"passed","title":"should return false for already revoked token","duration":0.3146999999999025,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeRefreshToken"],"fullName":"Refresh Token Management revokeRefreshToken should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":1.2404000000000224,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should revoke all tokens for user","status":"passed","title":"should revoke all tokens for user","duration":0.6652000000000271,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should return 0 when user has no tokens","status":"passed","title":"should return 0 when user has no tokens","duration":0.2501999999999498,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","revokeAllUserTokens"],"fullName":"Refresh Token Management revokeAllUserTokens should handle database errors gracefully","status":"passed","title":"should handle database errors gracefully","duration":0.9744999999999209,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should detect revoked token reuse","status":"passed","title":"should detect revoked token reuse","duration":0.7069000000000187,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for valid token","status":"passed","title":"should return false for valid token","duration":0.24230000000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","detectSuspiciousUsage"],"fullName":"Refresh Token Management detectSuspiciousUsage should return false for non-existent token","status":"passed","title":"should return false for non-existent token","duration":0.24430000000006658,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should hash token consistently","status":"passed","title":"should hash token consistently","duration":0.8763999999999896,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","hashRefreshToken"],"fullName":"Refresh Token Management hashRefreshToken should produce different hashes for different tokens","status":"passed","title":"should produce different hashes for different tokens","duration":0.448099999999954,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should delete expired tokens","status":"passed","title":"should delete expired tokens","duration":1.0657999999999674,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","cleanupExpiredTokens"],"fullName":"Refresh Token Management cleanupExpiredTokens should return 0 when no expired tokens","status":"passed","title":"should return 0 when no expired tokens","duration":0.42999999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return active tokens for user","status":"passed","title":"should return active tokens for user","duration":0.5572999999999411,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","getUserActiveTokens"],"fullName":"Refresh Token Management getUserActiveTokens should return empty array when user has no active tokens","status":"passed","title":"should return empty array when user has no active tokens","duration":0.5283999999999196,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should generate cryptographically secure tokens","status":"passed","title":"should generate cryptographically secure tokens","duration":0.6167000000000371,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Token Security"],"fullName":"Refresh Token Management Token Security should hash tokens before database storage","status":"passed","title":"should hash tokens before database storage","duration":0.6400000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null IP address","status":"passed","title":"should handle null IP address","duration":0.37199999999995725,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle null user agent","status":"passed","title":"should handle null user agent","duration":0.47069999999996526,"failureMessages":[],"meta":{}},{"ancestorTitles":["Refresh Token Management","Edge Cases"],"fullName":"Refresh Token Management Edge Cases should handle concurrent token rotations gracefully","status":"passed","title":"should handle concurrent token rotations gracefully","duration":1.4727000000000317,"failureMessages":[],"meta":{}}],"startTime":1763604599084,"endTime":1763604599127.4727,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/refreshTokens.test.ts"},{"assertionResults":[{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should create user with hashed password","status":"passed","title":"should create user with hashed password","duration":449.8390999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate email","status":"passed","title":"should reject duplicate email","duration":276.0173,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should reject duplicate username","status":"passed","title":"should reject duplicate username","duration":253.77719999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","createUser"],"fullName":"User Database Operations createUser should auto-verify user when email service is not configured","status":"passed","title":"should auto-verify user when email service is not configured","duration":175.79799999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by email","status":"passed","title":"should return user by email","duration":18.409700000000157,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return null for non-existent email","status":"passed","title":"should return null for non-existent email","duration":16.38460000000032,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by username","status":"passed","title":"should return user by username","duration":18.168199999999615,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","getUserBy* functions"],"fullName":"User Database Operations getUserBy* functions should return user by ID without password hash","status":"passed","title":"should return user by ID without password hash","duration":16.92179999999962,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should mark email as verified with valid token","status":"passed","title":"should mark email as verified with valid token","duration":248.04809999999998,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject invalid token","status":"passed","title":"should reject invalid token","duration":51.683700000000044,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject already verified token","status":"passed","title":"should reject already verified token","duration":296.3303000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","verifyUserEmail"],"fullName":"User Database Operations verifyUserEmail should reject expired token","status":"passed","title":"should reject expired token","duration":220.86100000000033,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should create password reset token","status":"passed","title":"should create password reset token","duration":219.2786000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should update password with valid reset token","status":"passed","title":"should update password with valid reset token","duration":350.32519999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject invalid reset token","status":"passed","title":"should reject invalid reset token","duration":50.647699999999986,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Password Reset"],"fullName":"User Database Operations Password Reset should reject already used reset token","status":"passed","title":"should reject already used reset token","duration":368.3444999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update display name","status":"passed","title":"should update display name","duration":163.46669999999995,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateUserProfile"],"fullName":"User Database Operations updateUserProfile should update avatar URL","status":"passed","title":"should update avatar URL","duration":173.01119999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if username exists","status":"passed","title":"should correctly check if username exists","duration":181.2433000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","Existence Checks"],"fullName":"User Database Operations Existence Checks should correctly check if email exists","status":"passed","title":"should correctly check if email exists","duration":185.9387999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","linkPlayerToUser"],"fullName":"User Database Operations linkPlayerToUser should link player_stats to user account","status":"passed","title":"should link player_stats to user account","duration":202.91809999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["User Database Operations","updateLastLogin"],"fullName":"User Database Operations updateLastLogin should update last_login_at timestamp","status":"passed","title":"should update last_login_at timestamp","duration":311.46209999999974,"failureMessages":[],"meta":{}}],"startTime":1763604599763,"endTime":1763604604167.4622,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/db/users.test.ts"},{"assertionResults":[{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should create a deck with 32 cards","status":"passed","title":"should create a deck with 32 cards","duration":3.0562000000000467,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have 8 cards of each color","status":"passed","title":"should have 8 cards of each color","duration":1.122099999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","createDeck"],"fullName":"Deck Functions createDeck should have values from 0 to 7","status":"passed","title":"should have values from 0 to 7","duration":1.508100000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should return a deck with the same cards","status":"passed","title":"should return a deck with the same cards","duration":1.7611000000000558,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","shuffleDeck"],"fullName":"Deck Functions shuffleDeck should not modify the original deck","status":"passed","title":"should not modify the original deck","duration":1.240000000000009,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should deal cards evenly to 4 players","status":"passed","title":"should deal cards evenly to 4 players","duration":1.0907999999999447,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should distribute all cards","status":"passed","title":"should distribute all cards","duration":0.3001000000000431,"failureMessages":[],"meta":{}},{"ancestorTitles":["Deck Functions","dealCards"],"fullName":"Deck Functions dealCards should not duplicate any cards","status":"passed","title":"should not duplicate any cards","duration":0.3284000000001015,"failureMessages":[],"meta":{}}],"startTime":1763604599076,"endTime":1763604599087.3284,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/deck.test.ts"},{"assertionResults":[{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 5 points for red 0","status":"passed","title":"should return 5 points for red 0","duration":2.3781000000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return -3 points for brown 0","status":"passed","title":"should return -3 points for brown 0","duration":0.29309999999998126,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getCardPoints"],"fullName":"Game Logic getCardPoints should return 0 points for normal cards","status":"passed","title":"should return 0 points for normal cards","duration":0.42070000000001073,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should calculate total points including special cards","status":"passed","title":"should calculate total points including special cards","duration":0.317799999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateTrickPoints"],"fullName":"Game Logic calculateTrickPoints should return 0 for trick with no special cards","status":"passed","title":"should return 0 for trick with no special cards","duration":0.3048999999999751,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should throw error for empty trick","status":"passed","title":"should throw error for empty trick","duration":1.3559999999999945,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner based on highest led suit card when no trump","status":"passed","title":"should determine winner based on highest led suit card when no trump","duration":0.3258999999999901,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when trump card is played","status":"passed","title":"should determine winner when trump card is played","duration":0.3067999999999529,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should determine winner when multiple trump cards are played","status":"passed","title":"should determine winner when multiple trump cards are played","duration":0.45549999999997226,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick trump 0 over led suit 7","status":"passed","title":"should pick trump 0 over led suit 7","duration":0.2506999999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should pick higher trump when multiple trumps","status":"passed","title":"should pick higher trump when multiple trumps","duration":0.15480000000002292,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should handle single card trick","status":"passed","title":"should handle single card trick","duration":0.1331000000000131,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","determineWinner"],"fullName":"Game Logic determineWinner should keep first card when all equal values","status":"passed","title":"should keep first card when all equal values","duration":0.1756000000000313,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate positive score when bet is met","status":"passed","title":"should calculate positive score when bet is met","duration":0.23510000000004538,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should calculate negative score when bet is not met","status":"passed","title":"should calculate negative score when bet is not met","duration":0.15179999999998017,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","calculateRoundScore"],"fullName":"Game Logic calculateRoundScore should double score when without trump","status":"passed","title":"should double score when without trump","duration":0.13060000000001537,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return true when bet1 has higher amount","status":"passed","title":"should return true when bet1 has higher amount","duration":0.1875,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when bet1 has lower amount","status":"passed","title":"should return false when bet1 has lower amount","duration":0.13869999999997162,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.12540000000001328,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when both bets are identical","status":"passed","title":"should return false when both bets are identical","duration":0.137800000000027,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","isBetHigher"],"fullName":"Game Logic isBetHigher should return false when withoutTrump is reversed but amounts equal","status":"passed","title":"should return false when withoutTrump is reversed but amounts equal","duration":0.1257999999999697,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return the highest bet by amount","status":"passed","title":"should return the highest bet by amount","duration":0.2366999999999848,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should prioritize without trump when amounts are equal","status":"passed","title":"should prioritize without trump when amounts are equal","duration":0.15469999999999118,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null for empty bets","status":"passed","title":"should return null for empty bets","duration":0.17760000000004084,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should filter out skipped bets","status":"passed","title":"should filter out skipped bets","duration":0.1442000000000121,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should return null when all bets are skipped","status":"passed","title":"should return null when all bets are skipped","duration":0.14080000000001291,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should give dealer priority when bets are exactly equal","status":"passed","title":"should give dealer priority when bets are exactly equal","duration":0.14240000000000919,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should not give dealer priority when without trump differs","status":"passed","title":"should not give dealer priority when without trump differs","duration":0.1342999999999961,"failureMessages":[],"meta":{}},{"ancestorTitles":["Game Logic","getHighestBet"],"fullName":"Game Logic getHighestBet should handle multiple equal bets with dealer in middle","status":"passed","title":"should handle multiple equal bets with dealer in middle","duration":0.13639999999998054,"failureMessages":[],"meta":{}}],"startTime":1763604599082,"endTime":1763604599093.1365,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/logic.test.ts"},{"assertionResults":[{"ancestorTitles":["Round Statistics","initializeRoundStats"],"fullName":"Round Statistics initializeRoundStats should initialize empty stats for all players","status":"passed","title":"should initialize empty stats for all players","duration":2.970799999999997,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return undefined if stats is undefined","status":"passed","title":"should return undefined if stats is undefined","duration":0.6228000000000407,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track red zero collection","status":"passed","title":"should track red zero collection","duration":0.6394999999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track brown zero collection","status":"passed","title":"should track brown zero collection","duration":0.3972999999999729,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should track both red and brown zeros in same trick","status":"passed","title":"should track both red and brown zeros in same trick","duration":0.39189999999996417,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should accumulate stats across multiple tricks","status":"passed","title":"should accumulate stats across multiple tricks","duration":0.4223999999999819,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should not modify stats if no special cards in trick","status":"passed","title":"should not modify stats if no special cards in trick","duration":0.33229999999997517,"failureMessages":[],"meta":{}},{"ancestorTitles":["Round Statistics","updateTrickStats"],"fullName":"Round Statistics updateTrickStats should return the stats object for chaining","status":"passed","title":"should return the stats object for chaining","duration":0.29179999999996653,"failureMessages":[],"meta":{}}],"startTime":1763604599571,"endTime":1763604599578.3323,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/roundStatistics.test.ts"},{"assertionResults":[{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should add card to trick and remove from hand","status":"passed","title":"should add card to trick and remove from hand","duration":2.7924000000000433,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should set trump on first card","status":"passed","title":"should set trump on first card","duration":0.6050999999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should not set trump on subsequent cards","status":"passed","title":"should not set trump on subsequent cards","duration":0.30350000000009913,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should advance to next player","status":"passed","title":"should advance to next player","duration":0.4196999999999207,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should wrap around after player 4","status":"passed","title":"should wrap around after player 4","duration":0.23749999999995453,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyCardPlay"],"fullName":"applyCardPlay should mark trick as complete after 4 cards","status":"passed","title":"should mark trick as complete after 4 cards","duration":0.31579999999996744,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should add bet to currentBets","status":"passed","title":"should add bet to currentBets","duration":0.476099999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should handle skipped bet","status":"passed","title":"should handle skipped bet","duration":0.3492999999999711,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should advance to next player","status":"passed","title":"should advance to next player","duration":0.4762000000000626,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should mark betting as complete after 4 bets","status":"passed","title":"should mark betting as complete after 4 bets","duration":0.26679999999998927,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyBet"],"fullName":"applyBet should detect all players skipped","status":"passed","title":"should detect all players skipped","duration":0.1937000000000353,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should clear currentBets","status":"passed","title":"should clear currentBets","duration":0.20299999999997453,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.14620000000002165,"failureMessages":[],"meta":{}},{"ancestorTitles":["resetBetting"],"fullName":"resetBetting should wrap around when dealer is last player","status":"passed","title":"should wrap around when dealer is last player","duration":0.1291999999999689,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should set player teamId","status":"passed","title":"should set player teamId","duration":0.226099999999974,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTeamSelection"],"fullName":"applyTeamSelection should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.17430000000001655,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap player positions in array","status":"passed","title":"should swap player positions in array","duration":2.396400000000085,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should swap all player data fields","status":"passed","title":"should swap all player data fields","duration":1.808300000000031,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve bot status and difficulty when swapping","status":"passed","title":"should preserve bot status and difficulty when swapping","duration":2.5416000000000167,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should preserve connection status fields when swapping","status":"passed","title":"should preserve connection status fields when swapping","duration":0.7083999999999833,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentTrick references after swap","status":"passed","title":"should update currentTrick references after swap","duration":0.504099999999994,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update currentBets references after swap","status":"passed","title":"should update currentBets references after swap","duration":0.5775999999999613,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should update highestBet reference after swap","status":"passed","title":"should update highestBet reference after swap","duration":0.3852000000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should recalculate team IDs based on position after swap","status":"passed","title":"should recalculate team IDs based on position after swap","duration":0.48500000000001364,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyPositionSwap"],"fullName":"applyPositionSwap should do nothing if player not found","status":"passed","title":"should do nothing if player not found","duration":0.3124000000000251,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should deal 8 cards to each player","status":"passed","title":"should deal 8 cards to each player","duration":0.403699999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should reset round state","status":"passed","title":"should reset round state","duration":0.471300000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should rotate dealer","status":"passed","title":"should rotate dealer","duration":0.21230000000002747,"failureMessages":[],"meta":{}},{"ancestorTitles":["initializeRound"],"fullName":"initializeRound should set currentPlayerIndex to player after dealer","status":"passed","title":"should set currentPlayerIndex to player after dealer","duration":0.21390000000008058,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should clear currentTrick","status":"passed","title":"should clear currentTrick","duration":0.24519999999995434,"failureMessages":[],"meta":{}},{"ancestorTitles":["clearTrick"],"fullName":"clearTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.134900000000016,"failureMessages":[],"meta":{}},{"ancestorTitles":["addTeamPoints"],"fullName":"addTeamPoints should be a placeholder function (points tracked per player)","status":"passed","title":"should be a placeholder function (points tracked per player)","duration":0.14389999999991687,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should add round scores to team totals","status":"passed","title":"should add round scores to team totals","duration":0.27559999999994034,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 1 reaches 41","status":"passed","title":"should return true when team 1 reaches 41","duration":0.18070000000000164,"failureMessages":[],"meta":{}},{"ancestorTitles":["updateScores"],"fullName":"updateScores should return true when team 2 reaches 41","status":"passed","title":"should return true when team 2 reaches 41","duration":0.1694999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should update game phase","status":"passed","title":"should update game phase","duration":0.16419999999993706,"failureMessages":[],"meta":{}},{"ancestorTitles":["setPhase"],"fullName":"setPhase should handle all phase transitions","status":"passed","title":"should handle all phase transitions","duration":0.25139999999998963,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should award tricks and points to winner","status":"passed","title":"should award tricks and points to winner","duration":0.8247000000000071,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should store trick as previousTrick","status":"passed","title":"should store trick as previousTrick","duration":0.5801999999999907,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should add trick to currentRoundTricks","status":"passed","title":"should add trick to currentRoundTricks","duration":1.3290000000000646,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should NOT clear currentTrick (cleared later after delay)","status":"passed","title":"should NOT clear currentTrick (cleared later after delay)","duration":0.4637000000000171,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should set winner as current player","status":"passed","title":"should set winner as current player","duration":0.36169999999992797,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should detect round over when all hands empty","status":"passed","title":"should detect round over when all hands empty","duration":0.41809999999998126,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyTrickResolution"],"fullName":"applyTrickResolution should not transition to scoring if hands remain","status":"passed","title":"should not transition to scoring if hands remain","duration":0.45249999999998636,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team wins bet","status":"passed","title":"should calculate offensive team wins bet","duration":0.8374999999999773,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should calculate offensive team fails bet","status":"passed","title":"should calculate offensive team fails bet","duration":0.36099999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should apply without-trump multiplier","status":"passed","title":"should apply without-trump multiplier","duration":0.28890000000001237,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over at 41 points","status":"passed","title":"should detect game over at 41 points","duration":0.25319999999999254,"failureMessages":[],"meta":{}},{"ancestorTitles":["calculateRoundScoring"],"fullName":"calculateRoundScoring should detect game over for team 2","status":"passed","title":"should detect game over for team 2","duration":0.20639999999991687,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should update team scores","status":"passed","title":"should update team scores","duration":0.28959999999995034,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should add round to history","status":"passed","title":"should add round to history","duration":0.5294000000000096,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should transition to game_over when gameOver is true","status":"passed","title":"should transition to game_over when gameOver is true","duration":0.18450000000007094,"failureMessages":[],"meta":{}},{"ancestorTitles":["applyRoundScoring"],"fullName":"applyRoundScoring should not transition if game continues","status":"passed","title":"should not transition if game continues","duration":0.14380000000005566,"failureMessages":[],"meta":{}}],"startTime":1763604599070,"endTime":1763604599099.1846,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/state.test.ts"},{"assertionResults":[{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should return new GameState (immutability)","status":"passed","title":"should return new GameState (immutability)","duration":3.529299999999978,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should award trick to winner with correct points","status":"passed","title":"should award trick to winner with correct points","duration":0.5321999999999889,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Red 0 special card (+5 points)","status":"passed","title":"should handle Red 0 special card (+5 points)","duration":0.33490000000000464,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should handle Brown 0 special card (-3 points)","status":"passed","title":"should handle Brown 0 special card (-3 points)","duration":0.3543000000000234,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should clear current trick after resolution","status":"passed","title":"should clear current trick after resolution","duration":0.205600000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set previousTrick with winner info","status":"passed","title":"should set previousTrick with winner info","duration":0.4407000000000494,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should set winner as next player","status":"passed","title":"should set winner as next player","duration":0.301400000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should transition to scoring phase when round is over","status":"passed","title":"should transition to scoring phase when round is over","duration":0.3079000000000178,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should stay in playing phase when cards remain","status":"passed","title":"should stay in playing phase when cards remain","duration":0.5456999999999539,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - resolveTrick"],"fullName":"stateTransitions - resolveTrick should throw error if trick is incomplete","status":"passed","title":"should throw error if trick is incomplete","duration":1.0556000000000267,"failureMessages":[],"meta":{}},{"ancestorTitles":["stateTransitions - immutability guarantees"],"fullName":"stateTransitions - immutability guarantees should never mutate original game state","status":"passed","title":"should never mutate original game state","duration":0.40999999999996817,"failureMessages":[],"meta":{}}],"startTime":1763604599555,"endTime":1763604599563.41,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/stateTransitions.test.ts"},{"assertionResults":[{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not in playing phase","status":"passed","title":"should reject play when not in playing phase","duration":2.347099999999955,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when player already played in trick","status":"passed","title":"should reject play when player already played in trick","duration":0.5349999999999682,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when trick is complete (4 cards)","status":"passed","title":"should reject play when trick is complete (4 cards)","duration":0.3605999999999767,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject play when not player's turn","status":"passed","title":"should reject play when not player's turn","duration":0.2898999999999887,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject invalid card data","status":"passed","title":"should reject invalid card data","duration":0.4410000000000309,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should reject card not in player's hand","status":"passed","title":"should reject card not in player's hand","duration":0.30779999999992924,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should enforce suit-following rule","status":"passed","title":"should enforce suit-following rule","duration":0.3451999999999771,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow playing off-suit when no led suit in hand","status":"passed","title":"should allow playing off-suit when no led suit in hand","duration":0.28160000000002583,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateCardPlay"],"fullName":"validateCardPlay should allow valid card play","status":"passed","title":"should allow valid card play","duration":0.435100000000034,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not in betting phase","status":"passed","title":"should reject bet when not in betting phase","duration":0.3643000000000711,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet when not player's turn","status":"passed","title":"should reject bet when not player's turn","duration":0.1977000000000544,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject duplicate bet","status":"passed","title":"should reject duplicate bet","duration":0.23059999999998126,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount < 7","status":"passed","title":"should reject bet amount < 7","duration":0.17290000000002692,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject bet amount > 12","status":"passed","title":"should reject bet amount > 12","duration":0.18170000000009168,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should reject dealer skip when no valid bets","status":"passed","title":"should reject dealer skip when no valid bets","duration":0.20519999999999072,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow dealer to skip when there are valid bets","status":"passed","title":"should allow dealer to skip when there are valid bets","duration":0.17290000000002692,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateBet"],"fullName":"validateBet should allow valid bet","status":"passed","title":"should allow valid bet","duration":0.15579999999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.2586000000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.1795000000000755,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when player already on team","status":"passed","title":"should reject when player already on team","duration":0.18600000000003547,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should reject when team is full","status":"passed","title":"should reject when team is full","duration":0.19639999999992597,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateTeamSelection"],"fullName":"validateTeamSelection should allow valid team selection","status":"passed","title":"should allow valid team selection","duration":0.15890000000001692,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with human during active gameplay","status":"passed","title":"should allow swapping with human during active gameplay","duration":0.22519999999997253,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow swapping with bot during active gameplay","status":"passed","title":"should allow swapping with bot during active gameplay","duration":0.14359999999999218,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap with bot during active gameplay","status":"passed","title":"should allow cross-team swap with bot during active gameplay","duration":0.1634999999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping during game_over phase","status":"passed","title":"should reject swapping during game_over phase","duration":0.17399999999997817,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject when player not found","status":"passed","title":"should reject when player not found","duration":0.16379999999992378,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should reject swapping with self","status":"passed","title":"should reject swapping with self","duration":0.15350000000000819,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow valid position swap between teammates","status":"passed","title":"should allow valid position swap between teammates","duration":0.2335000000000491,"failureMessages":[],"meta":{}},{"ancestorTitles":["validatePositionSwap"],"fullName":"validatePositionSwap should allow cross-team swap during team_selection","status":"passed","title":"should allow cross-team swap during team_selection","duration":0.29349999999999454,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not in team_selection phase","status":"passed","title":"should reject when not in team_selection phase","duration":0.4412999999999556,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when not exactly 4 players","status":"passed","title":"should reject when not exactly 4 players","duration":0.27800000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should reject when teams are not balanced","status":"passed","title":"should reject when teams are not balanced","duration":0.20810000000005857,"failureMessages":[],"meta":{}},{"ancestorTitles":["validateGameStart"],"fullName":"validateGameStart should allow starting with valid setup","status":"passed","title":"should allow starting with valid setup","duration":0.18200000000001637,"failureMessages":[],"meta":{}}],"startTime":1763604599184,"endTime":1763604599196.182,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/game/validation.test.ts"},{"assertionResults":[{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate and return CSRF token","status":"passed","title":"should generate and return CSRF token","duration":38.53600000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set CSRF token in cookie","status":"passed","title":"should set CSRF token in cookie","duration":7.981600000000071,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set httpOnly cookie","status":"passed","title":"should set httpOnly cookie","duration":5.9956999999999425,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should set SameSite=Strict","status":"passed","title":"should set SameSite=Strict","duration":6.275800000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","GET /api/csrf-token"],"fullName":"CSRF Protection Middleware GET /api/csrf-token should generate different tokens for different requests","status":"passed","title":"should generate different tokens for different requests","duration":13.857600000000048,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should allow request with valid CSRF token","status":"passed","title":"should allow request with valid CSRF token","duration":32.344499999999925,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request without CSRF token","status":"passed","title":"should reject request without CSRF token","duration":8.917799999999943,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with invalid CSRF token","status":"passed","title":"should reject request with invalid CSRF token","duration":7.92879999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with token but no cookie","status":"passed","title":"should reject request with token but no cookie","duration":15.920000000000073,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","POST requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests POST requests should reject request with cookie but no token","status":"passed","title":"should reject request with cookie but no token","duration":10.514399999999796,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should protect PUT requests","status":"passed","title":"should protect PUT requests","duration":12.813599999999951,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","PUT requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests PUT requests should reject PUT without token","status":"passed","title":"should reject PUT without token","duration":4.731800000000021,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should protect DELETE requests","status":"passed","title":"should protect DELETE requests","duration":7.495300000000043,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","DELETE requests"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests DELETE requests should reject DELETE without token","status":"passed","title":"should reject DELETE without token","duration":4.426600000000008,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should allow GET requests without CSRF token","status":"passed","title":"should allow GET requests without CSRF token","duration":3.070600000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Protection on State-Changing Requests","GET requests (should NOT be protected)"],"fullName":"CSRF Protection Middleware CSRF Protection on State-Changing Requests GET requests (should NOT be protected) should not require CSRF token for GET to protected route","status":"passed","title":"should not require CSRF token for GET to protected route","duration":2.5486000000000786,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return user-friendly error message","status":"passed","title":"should return user-friendly error message","duration":3.3343999999999596,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should return 403 status code for CSRF errors","status":"passed","title":"should return 403 status code for CSRF errors","duration":2.8858000000000175,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","CSRF Error Handler"],"fullName":"CSRF Protection Middleware CSRF Error Handler should pass through non-CSRF errors","status":"passed","title":"should pass through non-CSRF errors","duration":3.4049999999999727,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should validate token matches cookie","status":"passed","title":"should validate token matches cookie","duration":7.8197999999999865,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Token Validation"],"fullName":"CSRF Protection Middleware Token Validation should accept token from same session","status":"passed","title":"should accept token from same session","duration":6.511999999999944,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use different tokens for different sessions","status":"passed","title":"should use different tokens for different sessions","duration":5.5202999999999065,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should set httpOnly flag to prevent XSS","status":"passed","title":"should set httpOnly flag to prevent XSS","duration":2.7385999999999058,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use SameSite=Strict to prevent CSRF","status":"passed","title":"should use SameSite=Strict to prevent CSRF","duration":2.4226999999998498,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Security Features"],"fullName":"CSRF Protection Middleware Security Features should use Secure flag in production","status":"passed","title":"should use Secure flag in production","duration":2.7408000000000357,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle missing X-CSRF-Token header","status":"passed","title":"should handle missing X-CSRF-Token header","duration":8.242500000000064,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle empty CSRF token","status":"passed","title":"should handle empty CSRF token","duration":4.921399999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle malformed CSRF token","status":"passed","title":"should handle malformed CSRF token","duration":6.407199999999875,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Edge Cases"],"fullName":"CSRF Protection Middleware Edge Cases should handle multiple CSRF tokens in header","status":"passed","title":"should handle multiple CSRF tokens in header","duration":6.718499999999949,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should work with authenticated requests","status":"passed","title":"should work with authenticated requests","duration":5.830099999999902,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Protection Middleware","Integration with Authentication"],"fullName":"CSRF Protection Middleware Integration with Authentication should require both CSRF token and auth token","status":"passed","title":"should require both CSRF token and auth token","duration":4.588799999999992,"failureMessages":[],"meta":{}},{"ancestorTitles":["CSRF Configuration"],"fullName":"CSRF Configuration should warn about default secret in production","status":"passed","title":"should warn about default secret in production","duration":0.9373000000000502,"failureMessages":[],"meta":{}}],"startTime":1763604599461,"endTime":1763604599721.9373,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/middleware/csrf.test.ts"},{"assertionResults":[{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should restore game state with valid session","status":"passed","title":"should restore game state with valid session","duration":1.947499999999991,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject invalid session token","status":"passed","title":"should reject invalid session token","duration":0.24930000000000518,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should reject expired session","status":"passed","title":"should reject expired session","duration":0.198599999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should emit reconnection_successful","status":"passed","title":"should emit reconnection_successful","duration":0.38519999999999754,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","reconnect_to_game"],"fullName":"connection handlers reconnect_to_game should notify other players of reconnection","status":"passed","title":"should notify other players of reconnection","duration":0.3188000000000102,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should mark player as disconnected","status":"passed","title":"should mark player as disconnected","duration":0.17660000000000764,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should start 15-minute reconnection timer","status":"passed","title":"should start 15-minute reconnection timer","duration":0.3125,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","disconnect"],"fullName":"connection handlers disconnect should emit player_disconnected event","status":"passed","title":"should emit player_disconnected event","duration":0.3890999999999849,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should remove player from game","status":"passed","title":"should remove player from game","duration":0.5190999999999804,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should delete session","status":"passed","title":"should delete session","duration":0.2907000000000153,"failureMessages":[],"meta":{}},{"ancestorTitles":["connection handlers","leave_game"],"fullName":"connection handlers leave_game should emit player_left event","status":"passed","title":"should emit player_left event","duration":0.27089999999998327,"failureMessages":[],"meta":{}}],"startTime":1763604599498,"endTime":1763604599504.2908,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/connection.test.ts"},{"assertionResults":[{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should accept valid bet in range 7-12","status":"passed","title":"should accept valid bet in range 7-12","duration":2.7391000000000076,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject bet out of range","status":"passed","title":"should reject bet out of range","duration":0.5524000000000342,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should enforce bet hierarchy (higher amount wins)","status":"passed","title":"should enforce bet hierarchy (higher amount wins)","duration":0.28419999999999845,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle without-trump bets correctly","status":"passed","title":"should handle without-trump bets correctly","duration":0.23529999999999518,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should allow dealer to equalize","status":"passed","title":"should allow dealer to equalize","duration":0.44130000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should reject dealer skip","status":"passed","title":"should reject dealer skip","duration":0.248800000000017,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","place_bet"],"fullName":"gameplay handlers place_bet should handle skip bet correctly","status":"passed","title":"should handle skip bet correctly","duration":0.25130000000001473,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should accept valid card play","status":"passed","title":"should accept valid card play","duration":0.304300000000012,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should enforce suit-following rules","status":"passed","title":"should enforce suit-following rules","duration":0.4390000000000214,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject card not in hand","status":"passed","title":"should reject card not in hand","duration":0.2932999999999879,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should reject play when not player turn","status":"passed","title":"should reject play when not player turn","duration":0.1582000000000221,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should resolve trick after 4 cards","status":"passed","title":"should resolve trick after 4 cards","duration":0.19439999999997326,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","play_card"],"fullName":"gameplay handlers play_card should calculate points correctly (red 0, brown 0)","status":"passed","title":"should calculate points correctly (red 0, brown 0)","duration":0.2751999999999839,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should mark player ready after round","status":"passed","title":"should mark player ready after round","duration":0.19690000000002783,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should start new round when all ready","status":"passed","title":"should start new round when all ready","duration":0.19950000000000045,"failureMessages":[],"meta":{}},{"ancestorTitles":["gameplay handlers","player_ready"],"fullName":"gameplay handlers player_ready should end game at 41+ points","status":"passed","title":"should end game at 41+ points","duration":0.17390000000000327,"failureMessages":[],"meta":{}}],"startTime":1763604599081,"endTime":1763604599089.1995,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/gameplay.test.ts"},{"assertionResults":[{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should create new game with valid player name","status":"passed","title":"should create new game with valid player name","duration":4.710100000000011,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should reject invalid player names","status":"passed","title":"should reject invalid player names","duration":0.46839999999997417,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should assign player as host","status":"passed","title":"should assign player as host","duration":0.5244999999999891,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","create_game"],"fullName":"lobby handlers create_game should emit game_created event","status":"passed","title":"should emit game_created event","duration":3.6176999999999566,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should add player to existing game","status":"passed","title":"should add player to existing game","duration":0.6648000000000138,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game full","status":"passed","title":"should reject if game full","duration":0.33070000000003574,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should reject if game already started","status":"passed","title":"should reject if game already started","duration":0.27990000000005466,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","join_game"],"fullName":"lobby handlers join_game should assign player to team","status":"passed","title":"should assign player to team","duration":0.2540000000000191,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should allow team selection before game starts","status":"passed","title":"should allow team selection before game starts","duration":0.4218999999999937,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should reject team selection during game","status":"passed","title":"should reject team selection during game","duration":0.23429999999996198,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","select_team"],"fullName":"lobby handlers select_team should balance teams (2v2)","status":"passed","title":"should balance teams (2v2)","duration":0.2828000000000088,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should swap positions within team","status":"passed","title":"should swap positions within team","duration":0.25380000000001246,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should detect cross-team scenarios","status":"passed","title":"should detect cross-team scenarios","duration":0.1805999999999699,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","swap_position"],"fullName":"lobby handlers swap_position should update player order","status":"passed","title":"should update player order","duration":0.5667000000000257,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should allow host to kick players","status":"passed","title":"should allow host to kick players","duration":0.44479999999998654,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should reject non-host kick attempts","status":"passed","title":"should reject non-host kick attempts","duration":0.1342000000000212,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","kick_player"],"fullName":"lobby handlers kick_player should update game state after kick","status":"passed","title":"should update game state after kick","duration":0.3228000000000293,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should start game with 4 players","status":"passed","title":"should start game with 4 players","duration":0.3714999999999691,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should reject if teams unbalanced","status":"passed","title":"should reject if teams unbalanced","duration":0.2449999999999477,"failureMessages":[],"meta":{}},{"ancestorTitles":["lobby handlers","start_game"],"fullName":"lobby handlers start_game should deal cards and set dealer","status":"passed","title":"should deal cards and set dealer","duration":0.27789999999998827,"failureMessages":[],"meta":{}}],"startTime":1763604599521,"endTime":1763604599537.2778,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/socketHandlers/lobby.test.ts"},{"assertionResults":[{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should hash password with bcrypt","status":"passed","title":"should hash password with bcrypt","duration":75.20339999999999,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should generate different hash for same password","status":"passed","title":"should generate different hash for same password","duration":124.41819999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return true for correct password","status":"passed","title":"should return true for correct password","duration":114.55820000000006,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","hashPassword & comparePassword"],"fullName":"authHelpers hashPassword & comparePassword should return false for incorrect password","status":"passed","title":"should return false for incorrect password","duration":111.4439000000001,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should generate access and refresh tokens","status":"passed","title":"should generate access and refresh tokens","duration":5.966499999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should create valid JWT tokens","status":"passed","title":"should create valid JWT tokens","duration":2.708499999999958,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateTokens"],"fullName":"authHelpers generateTokens should include user data in payload","status":"passed","title":"should include user data in payload","duration":3.8695999999999913,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should verify valid access token","status":"passed","title":"should verify valid access token","duration":1.6842999999998938,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject refresh token as access token","status":"passed","title":"should reject refresh token as access token","duration":2.0842999999999847,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.26510000000007494,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyAccessToken"],"fullName":"authHelpers verifyAccessToken should reject malformed token","status":"passed","title":"should reject malformed token","duration":0.1434999999999036,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should verify valid refresh token","status":"passed","title":"should verify valid refresh token","duration":2.0802000000001044,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject access token as refresh token","status":"passed","title":"should reject access token as refresh token","duration":1.9841000000001259,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","verifyRefreshToken"],"fullName":"authHelpers verifyRefreshToken should reject invalid token","status":"passed","title":"should reject invalid token","duration":0.14769999999998618,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate random token","status":"passed","title":"should generate random token","duration":0.2522999999998774,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate unique tokens","status":"passed","title":"should generate unique tokens","duration":0.31780000000003383,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","generateSecureToken"],"fullName":"authHelpers generateSecureToken should generate hex string","status":"passed","title":"should generate hex string","duration":0.14450000000010732,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should accept valid passwords","status":"passed","title":"should accept valid passwords","duration":0.3269000000000233,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password too short","status":"passed","title":"should reject password too short","duration":0.21720000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without uppercase","status":"passed","title":"should reject password without uppercase","duration":0.10549999999989268,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without lowercase","status":"passed","title":"should reject password without lowercase","duration":0.12049999999999272,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validatePassword"],"fullName":"authHelpers validatePassword should reject password without number","status":"passed","title":"should reject password without number","duration":0.10530000000017026,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should accept valid emails","status":"passed","title":"should accept valid emails","duration":0.3951999999999316,"failureMessages":[],"meta":{}},{"ancestorTitles":["authHelpers","validateEmail"],"fullName":"authHelpers validateEmail should reject invalid email formats","status":"passed","title":"should reject invalid email formats","duration":0.23250000000007276,"failureMessages":[],"meta":{}}],"startTime":1763604599233,"endTime":1763604599684.2324,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/authHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 1 for empty game","status":"passed","title":"should return Bot 1 for empty game","duration":2.728999999999985,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 2 when Bot 1 exists","status":"passed","title":"should return Bot 2 when Bot 1 exists","duration":0.40039999999999054,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should fill gaps in bot numbering","status":"passed","title":"should fill gaps in bot numbering","duration":0.23500000000001364,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should return Bot 3 when Bot 1 and 2 exist","status":"passed","title":"should return Bot 3 when Bot 1 and 2 exist","duration":0.3564999999999827,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","getNextBotName"],"fullName":"botHelpers getNextBotName should ignore non-bot players","status":"passed","title":"should ignore non-bot players","duration":0.2837000000000103,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots when less than 3 exist","status":"passed","title":"should allow adding bots when less than 3 exist","duration":0.2958000000000425,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should reject adding bots when 3 already exist","status":"passed","title":"should reject adding bots when 3 already exist","duration":0.27789999999998827,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","canAddBot"],"fullName":"botHelpers canAddBot should allow adding bots to empty game","status":"passed","title":"should allow adding bots to empty game","duration":0.26370000000002847,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return true for teammates","status":"passed","title":"should return true for teammates","duration":0.5393000000000256,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false for non-teammates","status":"passed","title":"should return false for non-teammates","duration":0.24639999999999418,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when player not found","status":"passed","title":"should return false when player not found","duration":0.1675999999999931,"failureMessages":[],"meta":{}},{"ancestorTitles":["botHelpers","areTeammates"],"fullName":"botHelpers areTeammates should return false when both players not found","status":"passed","title":"should return false when both players not found","duration":0.12789999999995416,"failureMessages":[],"meta":{}}],"startTime":1763604599592,"endTime":1763604599599.2463,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/botHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by socket ID","status":"passed","title":"should find player by socket ID","duration":2.317099999999982,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should find player by name when socket ID not found","status":"passed","title":"should find player by name when socket ID not found","duration":0.42610000000001946,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should return undefined if player not found","status":"passed","title":"should return undefined if player not found","duration":0.300200000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayer"],"fullName":"playerHelpers findPlayer should handle empty player array","status":"passed","title":"should handle empty player array","duration":0.21520000000003847,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by socket ID","status":"passed","title":"should find player index by socket ID","duration":0.3586999999999989,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should find player index by name when socket ID not found","status":"passed","title":"should find player index by name when socket ID not found","duration":0.282100000000014,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","findPlayerIndex"],"fullName":"playerHelpers findPlayerIndex should return -1 if player not found","status":"passed","title":"should return -1 if player not found","duration":0.27249999999997954,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return true when human players exist","status":"passed","title":"should return true when human players exist","duration":0.24449999999995953,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when only bots exist","status":"passed","title":"should return false when only bots exist","duration":0.47460000000000946,"failureMessages":[],"meta":{}},{"ancestorTitles":["playerHelpers","hasAtLeastOneHuman"],"fullName":"playerHelpers hasAtLeastOneHuman should return false when no players exist","status":"passed","title":"should return false when no players exist","duration":0.24279999999998836,"failureMessages":[],"meta":{}}],"startTime":1763604599576,"endTime":1763604599582.243,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/playerHelpers.test.ts"},{"assertionResults":[{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should accept valid player names","status":"passed","title":"should accept valid player names","duration":2.0500999999999294,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject empty names","status":"passed","title":"should reject empty names","duration":0.8249000000000706,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":9.85069999999996,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should enforce max length of 20 characters","status":"passed","title":"should enforce max length of 20 characters","duration":0.6658999999999651,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizePlayerName"],"fullName":"sanitization utilities sanitizePlayerName should reject invalid characters","status":"passed","title":"should reject invalid characters","duration":0.21659999999997126,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should accept valid messages","status":"passed","title":"should accept valid messages","duration":0.3451999999999771,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should reject empty messages","status":"passed","title":"should reject empty messages","duration":0.2096000000001368,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should remove HTML tags","status":"passed","title":"should remove HTML tags","duration":1.738299999999981,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeChatMessage"],"fullName":"sanitization utilities sanitizeChatMessage should enforce max length of 200 characters","status":"passed","title":"should enforce max length of 200 characters","duration":0.33389999999985776,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should accept valid bet amounts (7-12)","status":"passed","title":"should accept valid bet amounts (7-12)","duration":0.24710000000004584,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject amounts outside range","status":"passed","title":"should reject amounts outside range","duration":0.2319999999999709,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBetAmount"],"fullName":"sanitization utilities validateBetAmount should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.274199999999837,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should accept valid card values (0-7)","status":"passed","title":"should accept valid card values (0-7)","duration":0.13889999999992142,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject values outside range","status":"passed","title":"should reject values outside range","duration":0.3079999999999927,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardValue"],"fullName":"sanitization utilities validateCardValue should reject non-integers","status":"passed","title":"should reject non-integers","duration":0.13779999999997017,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should accept valid colors","status":"passed","title":"should accept valid colors","duration":0.15190000000006876,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateCardColor"],"fullName":"sanitization utilities validateCardColor should reject invalid colors","status":"passed","title":"should reject invalid colors","duration":0.21720000000004802,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should accept valid game IDs","status":"passed","title":"should accept valid game IDs","duration":0.31349999999997635,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateGameId"],"fullName":"sanitization utilities validateGameId should reject invalid formats","status":"passed","title":"should reject invalid formats","duration":0.21550000000002,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should sanitize text and enforce max length","status":"passed","title":"should sanitize text and enforce max length","duration":1.285899999999856,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","sanitizeTextInput"],"fullName":"sanitization utilities sanitizeTextInput should handle empty input","status":"passed","title":"should handle empty input","duration":0.08969999999999345,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should accept boolean values","status":"passed","title":"should accept boolean values","duration":0.126700000000028,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert truthy values","status":"passed","title":"should convert truthy values","duration":0.10760000000004766,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should convert falsy values","status":"passed","title":"should convert falsy values","duration":0.10570000000006985,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateBoolean"],"fullName":"sanitization utilities validateBoolean should reject invalid values","status":"passed","title":"should reject invalid values","duration":0.14039999999999964,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should accept valid team IDs","status":"passed","title":"should accept valid team IDs","duration":0.1511000000000422,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validateTeamId"],"fullName":"sanitization utilities validateTeamId should reject invalid team IDs","status":"passed","title":"should reject invalid team IDs","duration":0.20249999999987267,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should accept valid player indices","status":"passed","title":"should accept valid player indices","duration":0.15200000000004366,"failureMessages":[],"meta":{}},{"ancestorTitles":["sanitization utilities","validatePlayerIndex"],"fullName":"sanitization utilities validatePlayerIndex should reject invalid indices","status":"passed","title":"should reject invalid indices","duration":0.2016000000000986,"failureMessages":[],"meta":{}}],"startTime":1763604600480,"endTime":1763604600502.2017,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sanitization.test.ts"},{"assertionResults":[{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate unique session token","status":"passed","title":"should generate unique session token","duration":3.4424000000000206,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","generateSessionToken"],"fullName":"sessionManager generateSessionToken should generate 64 character hex string","status":"passed","title":"should generate 64 character hex string","duration":1.522800000000018,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should create and store session","status":"passed","title":"should create and store session","duration":0.7257000000000176,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should store session in map","status":"passed","title":"should store session in map","duration":0.49579999999997426,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should return session object with correct properties","status":"passed","title":"should return session object with correct properties","duration":0.6048000000000116,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","createPlayerSession"],"fullName":"sessionManager createPlayerSession should generate unique tokens for multiple sessions","status":"passed","title":"should generate unique tokens for multiple sessions","duration":0.519299999999987,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return session for valid token","status":"passed","title":"should return session for valid token","duration":0.3131999999999948,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for non-existent token","status":"passed","title":"should return null for non-existent token","duration":0.15870000000001028,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should return null for expired session","status":"passed","title":"should return null for expired session","duration":0.32519999999999527,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should delete expired session from map","status":"passed","title":"should delete expired session from map","duration":0.255299999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["sessionManager","validateSessionToken"],"fullName":"sessionManager validateSessionToken should accept session just before expiry","status":"passed","title":"should accept session just before expiry","duration":0.18180000000000973,"failureMessages":[],"meta":{}}],"startTime":1763604599085,"endTime":1763604599094.2554,"status":"passed","message":"","name":"C:/Users/marc_/Documents/WebApp/anthropicJoffre/backend/src/utils/sessionManager.test.ts"}]}
